window.__require=function t(e,i,n){function a(c,s){if(!i[c]){if(!e[c]){var r=c.split("/");if(r=r[r.length-1],!e[r]){var l="function"==typeof __require&&__require;if(!s&&l)return l(r,!0);if(o)return o(r,!0);throw new Error("Cannot find module '"+c+"'")}}var d=i[c]={exports:{}};e[c][0].call(d.exports,function(t){return a(e[c][1][t]||t)},d,d.exports,t,e,i,n)}return i[c].exports}for(var o="function"==typeof __require&&__require,c=0;c<n.length;c++)a(n[c]);return a}({ArmoryBag:[function(t,e,i){"use strict";cc._RF.push(e,"9ea474HcKBMW5rgoE6nEOBY","ArmoryBag"),cc.Class({extends:cc.Component,properties:{item:{default:null,type:cc.Prefab},itemsPerPage:32,itemSize:78,bagSpacing:4,scrollToPrevButton:{default:null,type:cc.Node},scrollToNextButton:{default:null,type:cc.Node},sellPage:{default:null,type:cc.PageView},cancel:{default:null,type:cc.Label},comfirm:{default:null,type:cc.Label}},start:function(){},showHeroBag:function(t,e){this.sellPage.removeAllPages(),t||(t=cc.zz.LoginData.getBagData());var i=t.length;if(i>0){for(var n=Math.ceil(i/this.itemsPerPage),a=0;a<n;++a){var o=new cc.Node;o.setContentSize(cc.size(660,340)),o.name="page_"+n;var c=o.addComponent(cc.Layout);c.type=cc.Layout.Type.GRID,c.spacingX=this.bagSpacing,c.spacingY=this.bagSpacing,this.sellPage.addPage(o);var s=this.itemsPerPage;a==n-1?s=i:a<n-1&&(s=this.itemsPerPage*(a+1));for(var r=this.itemsPerPage*a;r<s;++r){var l=cc.instantiate(this.item);l.setContentSize(cc.size(this.itemSize,this.itemSize)),l.getComponent("ItemScripts").initData(t[r],this.type),o.addChild(l)}}this.sellPage.scrollToPage(0,.3),this.toggleScrollButtons()}},settype:function(t){this.type=t,this.showHeroBag(),2==t?(this.cancel.node.active=!1,this.comfirm.node.active=!1):(this.cancel.node.active=!0,this.comfirm.node.active=!0)},scrollToPrevPage:function(){var t=this.sellPage.getCurrentPageIndex(),e=t;t>0&&(e=t-1),this.sellPage.scrollToPage(e,.3)},scrollToNextPage:function(){var t=this.sellPage.getPages().length-1,e=this.sellPage.getCurrentPageIndex(),i=e;e<t&&(i=e+1),this.sellPage.scrollToPage(i,.3)},toggleScrollButtons:function(){this.sellPage.getPages().length>1?(this.scrollToNextButton.active=!0,this.scrollToPrevButton.active=!0):(this.scrollToNextButton.active=!1,this.scrollToPrevButton.active=!1)},onEnable:function(){},onDisable:function(){this.sellPage.removeAllPages()}}),cc._RF.pop()},{}],ArmoryBoard:[function(t,e,i){"use strict";cc._RF.push(e,"d7802e+FmpMur53L30wtvF9","ArmoryBoard");var n=t("EventType");cc.Class({extends:cc.Component,properties:{armory_level:{default:null,type:cc.Label},troop_hps:{default:[],type:cc.Label},troop_defenses:{default:[],type:cc.Label},troop_strengths:{default:[],type:cc.Label},troop_speeds:{default:[],type:cc.Label},troop_buff_hps:{default:[],type:cc.Label},troop_buff_defenses:{default:[],type:cc.Label},troop_buff_strengths:{default:[],type:cc.Label},troop_buff_speeds:{default:[],type:cc.Label},bag:{default:null,type:cc.Node},level_progress:{default:null,type:cc.ProgressBar},advancements:{default:[],type:cc.Node},availables:{default:[],type:cc.Node},advancementPopup:{default:null,type:cc.Node},tip:{default:null,type:cc.Node}},onLoad:function(){this.level_progress.node.on(cc.Node.EventType.MOUSE_ENTER,this.showLevelTip,this),this.level_progress.node.on(cc.Node.EventType.MOUSE_LEAVE,this.hideLevelTip,this),this.armory_level.node.on(cc.Node.EventType.MOUSE_ENTER,this.showLevelTip,this),this.armory_level.node.on(cc.Node.EventType.MOUSE_LEAVE,this.hideLevelTip,this),cc.zz.net.addHandler(cc.zz.net.constants.ARMORY_ADD_ITEMS,this.onArmoryUpdate.bind(this)),cc.zz.net.addHandler(cc.zz.net.constants.ARMORY_REMOVE_ITEMS,this.onArmoryUpdate.bind(this)),this.tip.parent=this.armory_level.node,this.tip.setPosition(0,-150),this.tip.active=!1},showLevelTip:function(t){if(void 0!=this.data){var e={titleKey:"label.311",contentKey:this.data.points+"/8400\nProvide "+this.data.buff_total+"% troop\n stats boost"},i=this.armory_level.node.convertToWorldSpace(cc.Vec2.ZERO);i.addSelf(new cc.Vec2(105,-50));var a={pos:i,data:e};cc.zz.fire.fire(n.EXPLANATION_TIP_SHOW,a)}},hideLevelTip:function(t){cc.zz.fire.fire(n.EXPLANATION_TIP_HIDE)},isOnArmoryBoard:function(){return!this.active_level},showMilitaryAdvancementTip:function(t){var e,i;console.log(this.active_level),console.log("Troops are "+this.active_troops),i=this.active_level,e=t.currentTarget.parent.children.indexOf(t.currentTarget)+1,console.log("Show the military advancement description for "+e+" at the level "+i);var a={contentKey:cc.zz.militaryAdvancements[i][e].description},o=t.currentTarget.convertToWorldSpace(cc.Vec2.ZERO);o.addSelf(new cc.Vec2(105,-500));var c={pos:o,data:a};cc.zz.fire.fire(n.EXPLANATION_TIP_SHOW,c),t.stopPropagation()},hideMilitaryAdvancementTip:function(t){cc.log("Hide the military advancement description tip"),cc.zz.fire.fire(n.EXPLANATION_TIP_HIDE)},showEnabledAdvancementTip:function(t){var e,i=0;if(console.log(this.active_level),console.log("Troops are "+this.active_troops),e=t.currentTarget.parent.children.indexOf(t.currentTarget)+1,cc.log("Chosen level"+e),e){var a=this.getAdvancementByLevel(this.data.advancements,e);console.log(a),a&&(i=a.troops),console.log("Show the military advancement description for "+i+" at the level "+e);var o={contentKey:cc.zz.militaryAdvancements[e][i].description},c=t.currentTarget.convertToWorldSpace(cc.Vec2.ZERO);c.addSelf(new cc.Vec2(105,-60));var s={pos:c,data:o};cc.zz.fire.fire(n.EXPLANATION_TIP_SHOW,s),t.stopPropagation()}},hideEnabledAdvancementTip:function(t){cc.log("Hide the military advancement description tip"),cc.zz.fire.fire(n.EXPLANATION_TIP_HIDE)},closePopups:function(){this.bag.active=!1},openPopup:function(){this.bag.active=!0},onArmoryUpdate:function(t){this.closePopups(),this.init(t)},onEnable:function(){this.tipsNode&&(this.tipsNode.opacity=0),this.bag.active=!1},onDisable:function(){this.closePopups(),this.node.off(cc.Node.EventType.MOUSE_UP,this.hideAdvancementPopup.bind(this))},initTroopStat:function(t,e){for(var i=0;i<t.length;i++)this.troop_hps[i].string=t[i].troop_hp,this.troop_strengths[i].string=t[i].troop_str,this.troop_speeds[i].string=t[i].troop_speed,this.troop_defenses[i].string=t[i].troop_def,e[i].troop_hp-t[i].troop_hp?this.troop_buff_hps[i].string="( +"+(e[i].troop_hp-t[i].troop_hp).toFixed(2)+" )":this.troop_buff_hps[i].string="",e[i].troop_str-t[i].troop_str?this.troop_buff_strengths[i].string="( +"+(e[i].troop_str-t[i].troop_str).toFixed(2)+" )":this.troop_buff_strengths[i].string="",e[i].troop_speed-t[i].troop_speed?this.troop_buff_speeds[i].string="( +"+(e[i].troop_speed-t[i].troop_speed).toFixed(2)+" )":this.troop_buff_speeds[i].string="",e[i].troop_def-t[i].troop_def?this.troop_buff_defenses[i].string="( +"+(e[i].troop_def-t[i].troop_def).toFixed(2)+" )":this.troop_buff_defenses[i].string=""},setArmoryLevel:function(t){this.armory_level.string=t},hideAllAdvancements:function(){for(var t=0;t<this.advancements.length;t++)this.advancements[t].off(cc.Node.EventType.MOUSE_UP,this.showAdvancementPopup,this),this.advancements[t].off(cc.Node.EventType.MOUSE_ENTER,this.showMilitaryAdvancementTip,this),this.advancements[t].off(cc.Node.EventType.MOUSE_LEAVE,this.hideMilitaryAdvancementTip,this),this.advancements[t].opacity=1},hideAllAvailables:function(){for(var t=0;t<this.availables.length;t++)this.availables[t].off(cc.Node.EventType.MOUSE_UP,this.showAdvancementPopupForAvailable,this),this.availables[t].opacity=0},initAdvancements:function(t){if(10==this.advancements.length){this.hideAllAdvancements();for(var e=0;e<t.length;e++)if(0!=t[e].state){var i=t[e].armory_level-1;this.advancements[i].on(cc.Node.EventType.MOUSE_UP,this.showAdvancementPopup,this),this.advancements[i].opacity=255,this.showTroopForAdvancement(this.advancements[i],t[e].troops),this.advancements[i].on(cc.Node.EventType.MOUSE_ENTER,this.showEnabledAdvancementTip,this),this.advancements[i].on(cc.Node.EventType.MOUSE_LEAVE,this.hideEnabledAdvancementTip,this)}else this.advancements[i].opacity=1}else cc.error("Not all level advancements are included")},initAvailables:function(t){if(10==this.availables.length){this.hideAllAvailables();for(var e=0;e<t;e++)this.availables[e].on(cc.Node.EventType.MOUSE_UP,this.showAdvancementPopupForAvailable.bind(this)),this.availables[e].opacity=255}else cc.error("Not all level availables (plus icons) are included")},showAdvancementPopupForAvailable:function(t){console.log("Show for av.");var e=t.currentTarget;console.log(e),this.oldParent=this.advancementPopup.parent,this.advancementPopup.parent=e,this.advancementPopup.active=!0,this.advancementPopup.opacity=255,this.advancementPopup.setPosition(0,-150),t.stopPropagation(),this.active_level=e.parent.children.indexOf(e)+1,this.active_troops=0;for(var i=this.advancementPopup.children,n=0;n<i.length;n++)this.disableIcon(i[n]),i[n].on(cc.Node.EventType.MOUSE_UP,this.onChangeAdvancement,this),i[n].on(cc.Node.EventType.MOUSE_ENTER,this.showMilitaryAdvancementTip,this),i[n].on(cc.Node.EventType.MOUSE_LEAVE,this.hideMilitaryAdvancementTip,this)},getAdvancementByLevel:function(t,e){for(var i=0;i<t.length;i++)if(t[i].armory_level==e)return t[i]},showAdvancementPopup:function(t){var e=t.currentTarget;console.log("Show"),console.log(e),this.oldParent=this.advancementPopup.parent,this.advancementPopup.parent=e,this.advancementPopup.active=!0,this.advancementPopup.opacity=255,this.advancementPopup.setPosition(0,-150),t.stopPropagation();var i=e.parent.children.indexOf(e)+1,n=this.getAdvancementByLevel(this.data.advancements,i),a=0;n&&(a=n.troops),this.active_level=i,this.active_troops=a,console.log("Returned advancement: for level "+i),console.log(this.data.advancements),console.log(n),this.hidePopupChildren(this.advancementPopup.children);for(var o=this.advancementPopup.children,c=0;c<o.length;c++)void 0!=n&&1==n.state&&n.troops>0&&c+1==n.troops?this.activateIcon(o[c]):this.disableIcon(o[c]),o[c].on(cc.Node.EventType.MOUSE_UP,this.onChangeAdvancement,this),o[c].on(cc.Node.EventType.MOUSE_ENTER,this.showMilitaryAdvancementTip,this),o[c].on(cc.Node.EventType.MOUSE_LEAVE,this.hideMilitaryAdvancementTip,this)},disableIcon:function(t){t.color=new cc.Color(93,93,93)},activateIcon:function(t){t.color=new cc.Color(255,255,255)},onChangeAdvancement:function(t){if(this.active_level&&void 0!=this.active_troops){var e=t.currentTarget.parent.children.indexOf(t.currentTarget)+1;console.log("Update the troop to "+e);var i=this.getAdvancementByLevel(this.data.advancements,this.active_level),n=this.active_troops,a=1,o=t.currentTarget;e==n&&void 0!=i?i.state?(a=0,this.disableIcon(o),this.advancements[this.active_level-1].off(cc.Node.EventType.MOUSE_UP,this.showAdvancementPopup,this),this.advancements[this.active_level-1].off(cc.Node.EventType.MOUSE_ENTER,this.showEnabledAdvancementTip,this),this.advancements[this.active_level-1].off(cc.Node.EventType.MOUSE_LEAVE,this.hideEnabledAdvancementTip,this),this.advancements[this.active_level-1].opacity=1,i.state=0,console.log("Node event should be closed"),console.log(this.advancements[this.active_level-1])):(a=1,this.activateIcon(o),this.advancements[this.active_level-1].on(cc.Node.EventType.MOUSE_UP,this.showAdvancementPopup,this),i.state=1,this.advancements[this.active_level-1].opacity=255,this.advancements[this.active_level-1].on(cc.Node.EventType.MOUSE_ENTER,this.showEnabledAdvancementTip,this),this.advancements[this.active_level-1].on(cc.Node.EventType.MOUSE_LEAVE,this.hideEnabledAdvancementTip,this)):(n=e,void 0!=i?(i.troops=n,i.state=1):this.data.advancements.push({troops:n,state:1,armory_level:this.active_level}),this.advancements[this.active_level-1].opacity=255,this.advancements[this.active_level-1].on(cc.Node.EventType.MOUSE_UP,this.showAdvancementPopup,this),this.advancements[this.active_level-1].on(cc.Node.EventType.MOUSE_ENTER,this.showEnabledAdvancementTip,this),this.advancements[this.active_level-1].on(cc.Node.EventType.MOUSE_LEAVE,this.hideEnabledAdvancementTip,this),this.showTroopForAdvancement(this.advancements[this.active_level-1],e)),n>0&&cc.zz.net.send(cc.zz.net.constants.ARMORY_SET_MILITARY_ADVANCEMENT,[cc.zz.LoginData.getHeroID(),cc.zz.LoginData.getWallet(),this.active_level,n,a]),this.active_level=void 0,this.active_troops=void 0,this.hideAdvancementPopup()}t.stopPropagation()},showTroopForAdvancement:function(t,e){t.opacity||(t.opacity=255);for(var i=0;i<t.children.length;i++)t.children[i].opacity=i+1==e?255:0},hidePopupChildren:function(t,e){},hideAdvancementPopup:function(t){this.advancementPopup.active&&(this.advancementPopup.parent=this.oldParent,this.advancementPopup.active=!1);for(var e=this.advancementPopup.children,i=0;i<e.length;i++)e[i].off(cc.Node.EventType.MOUSE_UP,this.onChangeAdvancement,this),e[i].off(cc.Node.EventType.MOUSE_ENTER,this.showMilitaryAdvancementTip,this),e[i].off(cc.Node.EventType.MOUSE_LEAVE,this.hideMilitaryAdvancementTip,this);t&&t.stopPropagation(),this.active_level=void 0,this.active_troops=void 0},init:function(t){this.data=t,this.initTroopStat(t.troops.basic,t.troops.boosted),this.level_progress.progress=this.pointsToProgress(t.points),this.setArmoryLevel(t.armory_level),this.advancementPopup.opacity=0,this.node.on(cc.Node.EventType.MOUSE_UP,this.hideAdvancementPopup.bind(this)),this.initAdvancements(t.advancements),this.initAvailables(t.armory_level)},showArmoryItems:function(){this.openPopup();var t=this.bag.getComponent("SellBag");this.data&&this.data.items&&t.showHeroBag(this.data.items,function(t){for(var e=this.data.items,i=0;i<e.length;i++){var a=parseInt(e[i].id);t.indexOf(a)>-1&&(cc.zz.LoginData.addBagItem(e[i]),cc.zz.fire.fire(n.HERO_EQUIP_OFF,e[i]))}cc.zz.net.send(cc.zz.net.constants.ARMORY_REMOVE_ITEMS,[t,cc.zz.LoginData.getHeroID(),cc.zz.LoginData.getWallet()])}.bind(this))},getBagItemIds:function(t){for(var e=[],i=0;i<t.length;i++){var n=parseInt(t[i].id);e.indexOf(n)<0&&(e[e.length]=n)}return e},showBagItems:function(){this.closePopups(),this.bag.active=!0;var t=cc.zz.LoginData.getBagData();this.bag.getComponent("SellBag").showHeroBag(t,function(t){for(var e=0;e<t.length;e++){var i=cc.zz.LoginData.getBagData(),a=this.getBagItemIds(i),o=t[e],c=a.indexOf(o);c>-1?(cc.zz.fire.fire(n.HERO_EQUIP_OFF,i[c]),cc.zz.LoginData.removeBagItem(i[c])):console.log("Item with id "+o+" not in the bag")}cc.zz.net.send(cc.zz.net.constants.ARMORY_ADD_ITEMS,[t,cc.zz.LoginData.getHeroID(),cc.zz.LoginData.getWallet()])}.bind(this))},ClickTips:function(t){1==this.tipsNode.active?this.tipsNode.active=!1:this.tipsNode.active=!0},showTips:function(){this.tipsNode&&(this.tipsNode.active=!0)},hideTips:function(){this.tipsNode&&(this.tipsNode.active=!1)},pointsToProgress:function(t){return t<350?0:t>=350&&t<840?.1:t>=840&&t<1400?.2:t>=1400&&t<2030?.3:t>=2030&&t<2800?.4:t>=2800&&t<3640?.5:t>=3640&&t<4620?.6:t>=4620&&t<5670?.7:t>=5670&&t<6930?.8:t>=6930&&t<8400?.9:1}}),cc._RF.pop()},{EventType:"EventType"}],BanditData:[function(t,e,i){"use strict";cc._RF.push(e,"b1957e+oxNE4rUmUZnqwe43","BanditData"),cc.Class({extends:cc.Component,properties:{},ctor:function(){this.banditData={}},initData:function(t){this.banditData=t},getBandList:function(){return this.banditData},getPathID:function(t){if(this.banditData[t])return this.banditData[t]}}),cc._RF.pop()},{}],Bandits:[function(t,e,i){"use strict";cc._RF.push(e,"c316a+LBAJBuLv9861ltwml","Bandits");var n=t("EventType");cc.Class({extends:cc.Component,properties:{},initData:function(t){this.data=t;var e=t.coordinate.split(",");this.node.setPosition(e[0],e[1])},start:function(){},onClickBand:function(){cc.zz.fire.fire(n.SHOW_NPCPOPUP,this.data)},hide:function(){this.node.active=!1},show:function(){this.node.active=!0}}),cc._RF.pop()},{EventType:"EventType"}],BlackCat:[function(t,e,i){"use strict";cc._RF.push(e,"bb5e7pdVqFFa79vsAfvReL/","BlackCat"),cc.Class({extends:cc.Component,properties:{appid:1000029,appkey:"eeed635adb323148fe351a23e907730f"},onLoad:function(){},start:function(){},initSDK:function(){BlackCat.SDK.init(this.appid,this.appkey,function(t){var e=JSON.parse(t);switch(console.log("listener => ",e),e.cmd){case"loginRes":var i=e.data,n=i.wallet;console.log("[BlaCat] Login",n),this.LoginCallBack(i);break;case"invokescriptRes":console.log("[BlaCat]","invokescript.callback.function.res => ",e);break;case"makeRawTransactionRes":var a=e.data.params;if(1==(c=e.data.res).err)switch(a.sbPushString){case"auctionEnd":console.log("[BlaCat] Aution End Error"),this.AuctionEndFail()}else{console.log("[makeRawTransactionRes]");var o=c.info;switch(a.sbPushString){case"putHero":this.PutHeroCallback(o);break;case"logBattle":this.LogBattleCallback(o);break;case"auctionBegin":console.log("[BlaCat] Aution Begin"),this.AuctionBeginCallback(o);break;case"auctionCancel":this.AuctioCancelCallback(o);break;case"auctionEnd":console.log("[BlaCat] Aution End"),this.AuctionEndCallback(o)}}console.log("[BlaCat]","makerawtransaction.callback.function.res => ",e);break;case"makeRechargeRes":break;case"makeGasTransferRes":console.log("makeGasTransfer.callback.function.res ",e);break;case"confirmAppNotifyRes":break;case"getBalanceRes":var c;(c=e.data).sgas,c.gas;break;case"getUserInfoRes":e.data;console.log("getUserInfo.callback.function.res ",e);break;case"getNetTypeRes":case"changeNetTypeRes":e.data;break;case"getAppNotifysRes":for(var s=0;s<e.data.length;s++){var r=e.data[s].txid;BlackCat.SDK.confirmAppNotify({txid:r})}}}.bind(this),"en")},setLang:function(t){BlackCat.SDK.setLang(t)},Login:function(t){this.LoginCallBack=t,BlackCat.SDK.login(t)},PutHero:function(t,e){this.PutHeroCallback=t,BlackCat.SDK.makeRawTransaction(e)},LogBattle:function(t,e){this.LogBattleCallback=t,BlackCat.SDK.makeRawTransaction(e)},AuctionBegin:function(t,e){this.AuctionBeginCallback=t,BlackCat.SDK.makeRawTransaction(e)},AuctionEnd:function(t,e,i){this.AuctionEndCallback=t,this.AuctionEndFail=e,BlackCat.SDK.makeRawTransaction(i)},AuctionCancel:function(t,e){this.AuctioCancelCallback=t,BlackCat.SDK.makeRawTransaction(e)},invokescript:function(){var t={nnc:document.getElementById("nnc").value,sbParamJson:document.getElementById("sbParamJson").value,sbPushString:document.getElementById("sbPushString").value,extString:document.getElementById("extString").value};t.sbParamJson=JSON.parse(t.sbParamJson),BlackCat.SDK.invokescript(t)},makerawtransaction:function(){var t={nnc:document.getElementById("nnc2").value,sbParamJson:document.getElementById("sbParamJson2").value,sbPushString:document.getElementById("sbPushString2").value,extString:document.getElementById("extString2").value};t.sbParamJson=JSON.parse(t.sbParamJson),BlackCat.SDK.makeRawTransaction(t)},makerecharge:function(){var t={count:document.getElementById("count").value,extString:document.getElementById("extString3").value};BlackCat.SDK.makeRecharge(t,function(t){console.log("[BlaCat]","makeRecharge.callback.function.res => ",t)})},confirmappnotify:function(){var t={txid:document.getElementById("txid").value};BlackCat.SDK.confirmAppNotify(t,function(t){console.log("[BlaCat]","confirmAppNotify.callback.function.res => ",t)})},showMain:function(){BlackCat.SDK.showMain()},showIcon:function(){BlackCat.SDK.showIcon()},getbalance:function(){BlackCat.SDK.getBalance()},getUserInfo:function(){BlackCat.SDK.getUserInfo()},makeGasTransfer:function(){var t={toaddr:document.getElementById("toaddr").value,count:document.getElementById("gascount").value,extString:document.getElementById("extString4").value};BlackCat.SDK.makeGasTransfer(t)},makeGasTransferMulti:function(){var t=[{toaddr:document.getElementById("toaddrMulti1").value,count:document.getElementById("gascountMulti1").value,extString:document.getElementById("extStringMulti1").value},{toaddr:document.getElementById("toaddrMulti2").value,count:document.getElementById("gascountMulti2").value,extString:document.getElementById("extStringMulti2").value}];BlackCat.SDK.makeGasTransferMulti(t,function(t){console.log("makeGasTransfeMultir.callback.function.res ",t)})},getNetType:function(){BlackCat.SDK.getNetType(function(t){console.log("getNetType.callback.function.res ",t)})},setDefaultNetType:function(t){BlackCat.SDK.setDefaultNetType(t)},stringToBytes:function(t){for(var e,i,n=[],a=0;a<t.length;a++){e=t.charCodeAt(a),i=[];do{i.push(255&e),e>>=8}while(e);n=n.concat(i.reverse())}return n}}),cc._RF.pop()},{}],BlockchainTimer:[function(t,e,i){"use strict";cc._RF.push(e,"f20e261K+tGG5yUKE8it/7z","BlockchainTimer");var n=t("EventType");cc.Class({ctor:function(){this.tron={cofferBlockDistance:15e4,lastCofferBlock:-1,cofferBlockLeft:-1,dropBlockDistance:800,lastDropBlock:-1,dropBlockLeft:-1,blockDistance:3},this.neo={cofferBlockDistance:15e3,lastCofferBlock:0,cofferBlockLeft:0,dropBlockDistance:80,lastDropBlock:0,dropBlockLeft:0,blockDistance:5,lastStrongholdRewardKey:"39",lastCofferPaymentKey:"37"},this.currentBlock=0,this.currentBlockTimer=void 0},onLoad:function(){},cofferPayedOut:function(t){var e=this;"neo"==cc.zz.LoginData.getBlockchainType()?o3dapi.NEO.getStorage({scriptHash:cc.zz.LoginData.getContractAddress(),key:this.neo.lastCofferPaymentKey,network:cc.zz.LoginData.getNetAlias()}).then(function(t){if(void 0!=t.result&&t.result.length>0){var i=e.deserializeCofferSession(t.result);e.neo.lastCofferBlock=i.block}else e.neo.lastCofferBlock=0}):this.contract.getCoffersBlock().call().then(function(t){e.tron.lastCofferBlock=parseInt(t)})},itemDropped:function(t){var e=this;"neo"==cc.zz.LoginData.getBlockchainType()?o3dapi.NEO.getStorage({scriptHash:cc.zz.LoginData.getContractAddress(),key:this.neo.lastStrongholdRewardKey,network:cc.zz.LoginData.getNetAlias()}).then(function(t){if(void 0!=t.result&&t.result.length>0){var i=e.deserializeDropData(t.result);e.neo.lastDropBlock=i.block}else e.neo.lastDropBlock=0}):e.contract.getDropItemBlock().call().then(function(t){e.tron.lastDropBlock=parseInt(t)})},onDestroy:function(){void 0!=this.currentBlockTimer&&clearInterval(this.currentBlockTimer),cc.zz.net.removeHandler(10007)},initTimer:function(t,e,i){if(cc.zz.net.addHandler(10007,this.cofferPayedOut.bind(this)),cc.zz.net.addHandler(10008,this.itemDropped.bind(this)),cc.zz.net.addHandler(10009,this.itemDropped.bind(this)),"tron"==t)this.contract=i,this.getTronLastBlocks();else{if("neo"!=t)throw"Unsupported Blockchain given to Blockchain Timer";this.rpcClient=new Neon.rpc.RPCClient(cc.zz.LoginData.getFullNode()),this.contract=i,this.getNeoLastBlock(e)}},changeContract:function(t,e,i){"tron"==t&&(this.contract=i,this.getTronLastBlocks())},getTronLastBlocks:function(){var t=this;this.contract.getCoffersBlock().call().then(function(e){t.tron.lastCofferBlock=parseInt(e),t.contract.getDropItemBlock().call().then(function(e){t.tron.lastDropBlock=parseInt(e),t.runTronCurrentBlockGetter()})})},deserializeCofferSession:function(t){try{var e=Neon.sc.StackItem.deserialize(t)}catch(t){return{}}return{block:parseInt(Neon.u.reverseHex(e.value[1].value),16)}},deserializeDropData:function(t){try{var e=Neon.sc.StackItem.deserialize(t)}catch(t){return{}}return{block:0==e.value[0].value?0:parseInt(Neon.u.reverseHex(e.value[0].value),16),stronghold:0==e.value[1].value?0:parseInt(Neon.u.reverseHex(e.value[1].value),16),hero:0==e.value[2].value?0:parseInt(Neon.u.reverseHex(e.value[2].value),16),item:0==e.value[3].value?0:parseInt(Neon.u.reverseHex(e.value[3].value),16)}},getNeoLastBlock:function(t){var e=this,i=this;o3dapi.NEO.getStorage({scriptHash:cc.zz.LoginData.getContractAddress(),key:this.neo.lastCofferPaymentKey,network:cc.zz.LoginData.getNetAlias()}).then(function(t){if(void 0!=t.result&&t.result.length>0){var n=i.deserializeCofferSession(t.result);i.neo.lastCofferBlock=n.block}else i.neo.lastCofferBlock=0;o3dapi.NEO.getStorage({scriptHash:cc.zz.LoginData.getContractAddress(),key:e.neo.lastStrongholdRewardKey,network:cc.zz.LoginData.getNetAlias()}).then(function(t){if(void 0!=t.result&&t.result.length>0){var e=i.deserializeDropData(t.result);i.neo.lastDropBlock=e.block}else i.neo.lastDropBlock=0;i.runNeoCurrentBlockGetter()})})},runTronCurrentBlockGetter:function(){var t=this;void 0!=this.currentBlockTimer&&clearInterval(this.currentBlockTimer);var e=this,i=0,a=0;this.currentBlockTimer=setInterval(function(){tronWeb.trx.getCurrentBlock().then(function(o){var c=parseInt(o.block_header.raw_data.number);if(c!=e.currentBlock){e.currentBlock=c,e.tron.cofferBlockLeft=e.calculateLeft(e.tron.cofferBlockDistance,e.tron.lastCofferBlock,e.currentBlock),e.tron.dropBlockLeft=e.calculateLeft(e.tron.dropBlockDistance,e.tron.lastDropBlock,e.currentBlock),cc.zz.fire.fire(n.BLOCK_NUMBER_INCREASED,e.currentBlock);var s=cc.zz.LoginData.getBlockchainType(),r=cc.zz.LoginData.getNetType();t.isCofferPayable(s,r)&&0==a&&(cc.log("Time to coffer payouts!"),cc.zz.net.send(3003,[s,r,cc.zz.LoginData.getWallet()]),a++),t.isItemDroppable(s,r)&&0==i&&(cc.log("Time to drop an item!"),cc.zz.net.send(3002,[s,r,cc.zz.LoginData.getWallet()]),i++),i&&++i>=120&&(i=0),a&&++a>=120&&(a=0)}})},1e3*this.tron.blockDistance)},runNeoCurrentBlockGetter:function(){var t=this;void 0!=this.currentBlockTimer&&clearInterval(this.currentBlockTimer);var e=this,i=0,a=0;void 0==this.rpcClient&&(this.rpcClient=new Neon.rpc.RPCClient(cc.zz.LoginData.getFullNode())),this.currentBlockTimer=setInterval(function(){t.rpcClient.getBlockCount().then(function(o){var c=parseInt(o);if(c!=e.currentBlock){e.currentBlock=c,e.neo.cofferBlockLeft=e.calculateLeft(e.neo.cofferBlockDistance,e.neo.lastCofferBlock,e.currentBlock),e.neo.dropBlockLeft=e.calculateLeft(e.neo.dropBlockDistance,e.neo.lastDropBlock,e.currentBlock),cc.zz.fire.fire(n.BLOCK_NUMBER_INCREASED,e.currentBlock);var s=cc.zz.LoginData.getBlockchainType(),r=cc.zz.LoginData.getNetType();t.isCofferPayable(s,r)&&0==a&&(cc.zz.net.send(3003,[s,r,cc.zz.LoginData.getWallet()]),a++),t.isItemDroppable(s,r)&&0==i&&(cc.zz.net.send(3002,[s,r,cc.zz.LoginData.getWallet()]),i++),i&&++i>=120&&(i=0),a&&++a>=120&&(a=0)}})},1e3*this.neo.blockDistance)},getCofferLeft:function(t,e){return"tron"==t?this.tron.cofferBlockLeft:this.neo.cofferBlockLeft},getDropLeft:function(t,e){return"tron"==t?this.tron.dropBlockLeft:this.neo.dropBlockLeft},isCofferPayable:function(t,e){return 0==this.getCofferLeft(t,e)},isItemDroppable:function(t,e){return 0==this.getDropLeft(t,e)},calculateLeft:function(t,e,i){return-1==e?0:-1==i?0:i<t+e?t+e-i:0}});cc._RF.pop()},{EventType:"EventType"}],BusinessMan:[function(t,e,i){"use strict";cc._RF.push(e,"71e00O0sy9FeKEfWBZNs5fj","BusinessMan");var n=t("EventType");cc.Class({extends:cc.Component,properties:{},start:function(){},onEnterBusineView:function(){cc.zz.fire.fire(n.SHOW_BUSINESSMAN,2)}}),cc._RF.pop()},{EventType:"EventType"}],BusinessView:[function(t,e,i){"use strict";cc._RF.push(e,"bf317d548lHObQltIa5Cvin","BusinessView");var n=t("EventType");cc.Class({extends:cc.Component,properties:{},start:function(){},showHeroBag:function(){cc.zz.fire.fire(n.SHOW_BAG_VIEW,3)}}),cc._RF.pop()},{EventType:"EventType"}],BuyView:[function(t,e,i){"use strict";cc._RF.push(e,"bfcadA0xAlOY6u5E073pFKl","BuyView");t("EventType");cc.Class({extends:cc.Component,properties:{myWallet:{default:null,type:cc.Label},otherWallet:{default:null,type:cc.Label},price:{default:null,type:cc.Label},fee:{default:null,type:cc.Label},lord:{default:null,type:cc.Label},total:{default:null,type:cc.Label},itemIcon:{default:null,type:cc.Sprite}},start:function(){},initData:function(t){this.data=t,this.itemIcon.spriteFrame=cc.loader.getRes("ItemIcons/"+t.icon,cc.SpriteFrame),void 0==this.itemIcon.spriteFrame&&cc.loader.loadRes("ItemIcons/"+t.icon,cc.SpriteFrame,function(t,e){this.itemIcon.spriteFrame=t?cc.loader.getRes("common/icon_Qmark",cc.SpriteFrame):e}.bind(this)),this.myWallet.string=cc.zz.LoginData.getWallet(),this.otherWallet.string=t.seller_address,this.price.string=cc.zz.utils.ReservedDecimal(t.price,4)+cc.zz.LoginData.getCurrency(),this.fee.string=cc.zz.utils.ReservedDecimal(.05*t.price,4)+cc.zz.LoginData.getCurrency(),this.lord.string=cc.zz.utils.ReservedDecimal(.1*t.price,4)+cc.zz.LoginData.getCurrency(),this.total.string=cc.zz.utils.ReservedDecimal(1.15*t.price,4)+cc.zz.LoginData.getCurrency()},onBuy:function(){cc.zz.BlockchainInteractor.buyMarketItem(this.data)},onCancel:function(){}}),cc._RF.pop()},{EventType:"EventType"}],CityData:[function(t,e,i){"use strict";cc._RF.push(e,"d9da6wg+8lMHYZW7R+XAdBM","CityData"),cc.Class({extends:cc.Component,properties:{},ctor:function(){this.CityPath={}},initData:function(t){this.CityPath=t},getCityList:function(){return this.CityPath},getPathID:function(t){if(this.CityPath[t])return this.CityPath[t]}}),cc._RF.pop()},{}],CityNode:[function(t,e,i){"use strict";cc._RF.push(e,"4dfcbcHLhZAmr7J64wnB8lN","CityNode");var n=t("EventType");cc.Class({extends:cc.Component,properties:{icon:{default:null,type:cc.Sprite},cityname:{default:null,type:cc.Label},owner:{default:null,type:cc.Label},redFlag:{default:null,type:cc.Sprite},blueFlag:{default:null,type:cc.Sprite},blackFlag:{default:null,type:cc.Sprite},timeLabel:{default:null,type:cc.Label},immuneIcon:{default:null,type:cc.Sprite},blueTimerBack:{default:null,type:cc.Sprite}},occupation:function(t){parseInt(t.is_npc)>0?this.showFlag("black"):t.lord_id==t.current_hero_id?this.showFlag("blue"):this.showFlag("red")},onLoad:function(){},initData:function(t){this.cityname.string=t.name,this.citydata=t,cc.loader.loadRes("world/"+t.appearance,cc.SpriteFrame,function(t,e){this.icon.spriteFrame=e}.bind(this));var e=t.coordinate.split(",");this.node.setPosition(e[0],e[1])},onClickCity:function(){cc.zz.fire.fire(n.SHOW_CITYPOPUP,this.citydata)},updateInfo:function(t){if(parseInt(t.is_npc)>0?this.showFlag("black"):void 0!==cc.zz.LoginData.getHeroID()&&t.lord_id==cc.zz.LoginData.getHeroID()&&0==parseInt(t.is_npc)?this.showFlag("blue"):this.showFlag("red"),this.owner.node.active=!0,this.owner.string=cc.zz.TableDataManage.Language.getLangueForID(t.first_name)+" "+cc.zz.TableDataManage.Language.getLangueForID(t.last_name),0==parseInt(t.is_npc)){var e=new Date(1e3*t.created_time);if(e.setHours(e.getHours()+parseInt(t.immune_period)),new Date<=e)return this.showTimer(t.created_time+3600*parseInt(t.immune_period)),this.schedule(this.CountDown,1),this.timeLabel.node.active=!0,this.immuneIcon.node.active=!0,void(this.blueTimerBack.node.active=!0)}this.immuneIcon.node.active=!1,this.blueTimerBack.node.active=!1,this.timeLabel.node.active=!1},showTimer:function(t){this.timeNum=t-cc.zz.utils.realTime,this.timeLabel.node.active=!0,this.timeLabel.string=cc.zz.utils.showTime(this.timeNum)},CountDown:function(){this.timeNum--,this.timeLabel.string=cc.zz.utils.showTime(this.timeNum),this.timeNum<=0&&1==this.immuneIcon.node.active&&(this.immuneIcon.node.active=!1,this.blueTimerBack.node.active=!1,this.timeLabel.node.active=!1,this.unschedule(this.CountDown,1))},showFlag:function(t){this.redFlag.node.active="red"==t,this.blackFlag.node.active="black"==t,this.blueFlag.node.active="blue"==t}}),cc._RF.pop()},{EventType:"EventType"}],CityPanel:[function(t,e,i){"use strict";cc._RF.push(e,"a2a29eN42FH5oo/tr5qZ8UY","CityPanel");var n=[cc.v2(-434.5,149),cc.v2(-153.5,149),cc.v2(127.5,149),cc.v2(408.5,149),cc.v2(-434.5,-3),cc.v2(-153.5,-3),cc.v2(127.5,-3),cc.v2(408.5,-3),cc.v2(-434.5,-155),cc.v2(-153.5,-155),cc.v2(127.5,-155),cc.v2(408.5,-155)],a=t("EventType");cc.Class({extends:cc.Component,properties:{cityName:{default:null,type:cc.Label},TroopsNum:{default:null,type:cc.Label},TroopsBar:{default:null,type:cc.Slider},bags:{default:null,type:cc.PageView},bagitems:{default:null,type:cc.Prefab},sellBtn:{default:null,type:cc.Button},showNode_1:{default:null,type:cc.Node},showNode_2:{default:null,type:cc.Node},lordName:{default:null,type:cc.Label},cofferTotal:{default:null,type:cc.Label},cofferLord:{default:null,type:cc.Label},cofferBlockRemain:{default:null,type:cc.Label},taxEarned:{default:null,type:cc.Label},cityHero:{default:null,type:cc.Node}},onLoad:function(){this.buyType=1,this.sellType=2,this.sellMap=[],this.buyMap=[],this.totalPage=1,this.type=this.buyType,cc.zz.net.addHandler(7002,this.Shelfsuccess.bind(this),!0),cc.zz.net.addHandler(7005,this.getSellList.bind(this),!0),cc.zz.net.addHandler(10001,this.getSellList.bind(this),!0),cc.zz.net.addHandler(10002,this.getSellList.bind(this),!0),cc.zz.net.addHandler(10003,this.buySuccess.bind(this),!0),cc.zz.fire.on(a.SHOW_COMMOODITY,this.showCommodity.bind(this))},initBag:function(t){if(t==this.by&&(this.itemMap=[]),this.bags.removeAllPages(),t==this.buyType){if(this.buyMap.length>0)for(var e=0;e<this.buyMap.length;++e)this.addBagItem(this.buyMap[e],t,this.bags)}else if(this.sellType==t&&this.sellMap.length>0)for(var i=0;i<this.sellMap.length;++i)this.addBagItem(this.sellMap[i],t,this.bags);this.page=0,this.bags.setCurrentPageIndex(this.page)},addNewPage:function(t){var e=new cc.Node;return e.setContentSize(cc.size(1150,450)),t.addPage(e),this.totalPage=t.getPages().length,this.page=this.totalPage,t.setCurrentPageIndex(this.page),t.getPages()[this.page-1]},getLatestPage:function(t){var e=t.getPages().length;if(0!=e)return t.getPages()[e-1]},addBagItem:function(t,e,i){var a=void 0;if(void 0!=(a=0==i.getPages().length||this.getLatestPage(i).children.length==n.length?this.addNewPage(i):this.getLatestPage(i))){var o=a.children.length,c=cc.instantiate(this.bagitems);c.getComponent("Commodity").initData(t,e,o),a.addChild(c,n.length-o),c.setPosition(n[o]),this.itemMap.push(c)}else cc.error("Failed to init the bag!")},PageUp:function(){--this.page,this.page<0&&(this.page=0),this.bags.setCurrentPageIndex(this.page)},pageDown:function(){++this.page,this.page>this.totalPage&&(this.page=this.totalPage),this.bags.setCurrentPageIndex(this.page)},getBuyList:function(t){cc.zz.net.removeHandler(7001),this.buyMap=t.items,this.initBag(this.type)},deleteItem:function(t){for(var e=0;e<this.sellMap.length;e++)this.sellMap[e].id==t.item_id&&this.sellMap.splice(e,1);for(e=0;e<this.buyMap.length;e++)this.buyMap[e].id==t.item_id&&this.buyMap.splice(e,1);this.initBag(this.type)},getSellList:function(t){this.sellMap=t.items,this.initBag(this.sellType)},Shelfsuccess:function(){this.setCofferTotalLabel(this.data.city_coffer),cc.zz.net.send(7005,[cc.zz.LoginData.getWallet(),this.data.id])},buySuccess:function(){this.requestBuyList(this.data.id)},updateBag:function(){},clearBag:function(){},ToogleEvent:function(t,e){this.sellBtn.node.active=!1,e==this.sellType?(cc.zz.net.send(7005,[cc.zz.LoginData.getWallet(),this.data.id]),this.sellBtn.node.active=!0):e==this.buyType&&this.requestBuyList(this.data.id),this.type=e},showHeroBag:function(){void 0!=this.data&&this.buyMap.length>=this.data.market_cap?cc.zz.fire.fire(a.POP_UP,cc.zz.Popup.TYPE.CITY_MARKET_FULL.id,{}):cc.zz.fire.fire(a.SHOW_BAG_VIEW,2)},showNodeOne:function(){this.showone=!this.showone,this.showNode_1.active=this.showone},showNodeTwo:function(){this.showtwo=!this.showtwo,this.showNode_2.active=this.showtwo},showCommodity:function(t){for(var e=0;e<this.itemMap.length;e++){var i=this.itemMap[e];i.getComponent("Commodity").index!=t&&i.getComponent("Commodity").showShort()}},hideAllItem:function(){for(var t=0;t<this.itemMap.length;t++){var e=this.itemMap[t];e.getComponent("Commodity").isLong&&e.getComponent("Commodity").showShort()}},onEnable:function(){this.showone=!0,this.showtwo=!0,this.showNodeOne(),this.showNodeTwo(),cc.zz.SoundManage.onPlayCityBgSound(),this.itemMap=[],this.data=cc.zz.CurrentMoveData,this.data.id=parseInt(this.data.id),this.setCofferTotalLabel(this.data.city_coffer),this.cofferLord.string=parseFloat(.3*this.data.city_coffer).toFixed(2),console.log(this.data.tax_earned),console.log(cc.zz.LoginData.getCurrency()),this.taxEarned.string=this.data.tax_earned+cc.zz.LoginData.getCurrency();var t=this.cityHero.getComponent("herocard");parseInt(this.data.is_npc)>0&&(this.data.lord.equipments=cc.zz.TableDataManage.NpcData.getNpcEquipData(this.data.lord_id)),t.initHeroCard(this.data.lord),cc.zz.LoginData.setCity(this.data),this.cityName.string=this.data.name,this.lordName.string=cc.zz.TableDataManage.Language.getLangueForID(this.data.first_name)+" "+cc.zz.TableDataManage.Language.getLangueForID(this.data.last_name),null==this.TroopsNum&&(this.TroopsNum=this.cityName),this.TroopsNum.string=this.data.troops+"/"+this.data.troops_cap,this.TroopsBar.getComponent("NewSlider").setData(this.data.troops,this.data.troops_cap),this.ToogleEvent(null,this.type)},requestBuyList:function(t){cc.zz.net.removeHandler(7001),cc.zz.net.addHandler(7001,this.getBuyList.bind(this),!0),cc.zz.net.send(7001,[t])},setCofferTotalLabel:function(t){this.cofferTotal.string=parseFloat(t).toFixed(2)},update:function(t){this.cofferBlockRemain.string=cc.zz.BlockchainTimer.getCofferLeft(cc.zz.LoginData.getBlockchainType())}}),cc._RF.pop()},{EventType:"EventType"}],CityPopupView:[function(t,e,i){"use strict";cc._RF.push(e,"cff50rK8+pL6bxlq9gR8Klb","CityPopupView"),cc.Class({extends:cc.Component,properties:{popupName:{default:null,type:cc.Label},cityHeroCard:{default:null,type:cc.Node},HeroStat:{default:null,type:cc.Node},TroopsBar:{default:null,type:cc.Slider},TroopsNum:{default:null,type:cc.Label}},InitInfo:function(t,e){console.log("data init info ",t),this.cityHeroCard.getComponent("herocard").initHeroCard(t.lord),this.HeroStat.getComponent("heroStars").initValue(t.lord.base),this.TroopsNum.string=t.troops+"/"+t.troops_cap,this.TroopsBar.getComponent("NewSlider").setData(t.troops,t.troops_cap)}}),cc._RF.pop()},{}],CityTargetsView:[function(t,e,i){"use strict";cc._RF.push(e,"2051e5THn1GgIAZ4VyDmUhv","CityTargetsView"),cc.Class({extends:cc.Component,properties:{topPlayersList:{default:[],type:cc.Node},topPlayerNames:{default:[],type:cc.Label},topPlayerPrizes:{default:[],type:cc.Label},topPlayerPoints:{default:[],type:cc.Label},myRankLabel:{default:null,type:cc.Label},myPointsLabel:{default:null,type:cc.Label},tipsNode:{default:null,type:cc.Node},tipicon:{default:null,type:cc.Sprite},subTitle:{default:null,type:cc.Label},remainingTime:{default:null,type:cc.Label},cityName:{default:null,type:cc.Label},cityTimer:{default:null,type:cc.Label},luckiest:{default:null,type:cc.Node},luckiestPrize:{default:null,type:cc.Label},luckiestName:{default:null,type:cc.Label},bravest:{default:null,type:cc.Node},bravestPrize:{default:null,type:cc.Label},bravestName:{default:null,type:cc.Label},topTargetersNode:{default:null,type:cc.Node},topTargetersNameList:{default:[],type:cc.Label},topTargetersCityNameList:{default:[],type:cc.Label},topLuckiestSprite:{default:null,type:cc.Node},topLuckiestTitle:{default:null,type:cc.Node},topBravestSprite:{default:null,type:cc.Node},topBravestTitle:{default:null,type:cc.Node}},onLoad:function(){this.tipicon.node.on(cc.Node.EventType.MOUSE_ENTER,this.showTips.bind(this)),this.tipicon.node.on(cc.Node.EventType.MOUSE_LEAVE,this.hideTips.bind(this)),void 0!=this.remainingTime&&(this.initialRemainingTimeString=this.remainingTime.string),this.topTargetersNode.active=!1,cc.zz.net.addHandler(6009,this.onFetchLuckiestList.bind(this)),cc.zz.net.addHandler(6010,this.onFetchBravestList.bind(this))},onFetchLuckiestList:function(t){this.openTopList(),this.updateList(t),this.topBravestTitle.active=!1,this.topBravestSprite.active=!1,this.topLuckiestTitle.active=!0,this.topLuckiestSprite.active=!0},onFetchBravestList:function(t){this.openTopList(),this.updateList(t),this.topBravestTitle.active=!0,this.topBravestSprite.active=!0,this.topLuckiestTitle.active=!1,this.topLuckiestSprite.active=!1},updateList:function(t){for(var e=t.length-1,i=0;i<this.topTargetersNameList.length;i++)if(i>e)this.topTargetersNameList[i].node.parent.active=!1;else{if(console.log(this.topTargetersNameList[i]),console.log(i),window.tops=this.topTargetersNameList,this.topTargetersNameList[i].node.parent.active=!0,void 0!=t[i].first_name){var n=cc.zz.TableDataManage.Language.getLangueForID(t[i].first_name),a=cc.zz.TableDataManage.Language.getLangueForID(t[i].last_name);this.topTargetersNameList[i].string=n+" "+a}else this.topTargetersNameList[i].string="No one";this.topTargetersCityNameList[i].string=t[i].name}},onEnable:function(){this.tipsNode.active=!1},onDisable:function(){this.closeTopList()},init:function(t){if(t.active){for(var e=0;e<this.topPlayersList.length;e++)this.topPlayersList[e].active=!1;t.ranks.length&&this.UpdateRankInfos(t.ranks),Object.keys(t.brave_heart).length?(this.bravest.active=!0,this.UpdateBravest(t.brave_heart)):this.bravest.active=!1,Object.keys(t.lucky_bastard).length?(this.luckiest.active=!0,this.UpdateLuckiest(t.lucky_bastard)):this.luckiest.active=!1,Object.keys(t.hero_rank).length?this.UpdateMyRankInfo(t.hero_rank):(this.myPointsLabel.string="0",this.myRankLabel.stirng="0"),this.UpdateRemainingTimer(t),this.UpdateCityRemainingTimer({start_time:t.city_start_time,end_time:t.city_end_time}),this.cityName.string=t.city_name}},UpdateLuckiest:function(t){this.luckiestName.string=cc.zz.TableDataManage.Language.getLangueForID(t.first_name)+" "+cc.zz.TableDataManage.Language.getLangueForID(t.last_name),this.luckiestPrize.string=t.price},UpdateBravest:function(t){this.bravestName.string=cc.zz.TableDataManage.Language.getLangueForID(t.first_name)+" "+cc.zz.TableDataManage.Language.getLangueForID(t.last_name),this.bravestPrize.string=t.price},countDownEvent:function(){this.eventTimeNum--,this.remainingTime.string=cc.zz.utils.showTime(this.eventTimeNum),this.eventTimeNum<=0&&(this.unschedule(this.countDownEvent),this.remainingTime.active=!1)},countDownCity:function(){this.cityTimeNum--,this.cityTimer.string=cc.zz.utils.showTime(this.cityTimeNum),this.cityTimeNum<=0&&(this.unschedule(this.countDownCity),this.cityTimer.node.active=!1)},UpdateRemainingTimer:function(t){this.eventTimeNum=t.end_time-cc.zz.utils.realTime,this.eventTimeNum>0&&(this.remainingTime.node.active=!0,this.remainingTime.string=cc.zz.utils.showTime(this.eventTimeNum),this.schedule(this.countDownEvent,1))},UpdateCityRemainingTimer:function(t){this.cityTimeNum=t.end_time-cc.zz.utils.realTime,this.cityTimeNum>0?(this.cityTimer.node.parent.active=!0,this.cityTimer.string=cc.zz.utils.showTime(this.cityTimeNum),this.schedule(this.countDownCity,1)):this.cityTimer.node.parent.active=!1},UpdateRankInfos:function(t){for(var e=0;e<t.length;e++)e<this.topPlayersList.length&&(this.topPlayersList[e].active=!0,t[e].all_points?this.topPlayerPoints[e].string=parseFloat(t[e].all_points):this.topPlayerPoints[e].string="0",this.topPlayerNames[e].string=cc.zz.TableDataManage.Language.getLangueForID(t[e].first_name)+" "+cc.zz.TableDataManage.Language.getLangueForID(t[e].last_name),this.topPlayerPrizes[e].string=t[e].price)},UpdateMyRankInfo:function(t){void 0!=t.rank&&(this.myRankLabel.string=t.rank,this.myPointsLabel.string=parseInt(t.all_points))},ClickTips:function(t){1==this.tipsNode.active?this.tipsNode.active=!1:this.tipsNode.active=!0},showTips:function(){this.tipsNode.active=!0},hideTips:function(){this.tipsNode.active=!1},closeTopList:function(){this.topTargetersNode.active=!1},openTopList:function(){this.topTargetersNode.active=!0},fetchLuckiestList:function(){this.closeTopList(),cc.zz.net.send(6009,[])},fetchBravestList:function(){this.closeTopList(),cc.zz.net.send(6010,[])}}),cc._RF.pop()},{}],CloseWindow:[function(t,e,i){"use strict";cc._RF.push(e,"ad4d46h2W5OfZN6m2K7DOtJ","CloseWindow"),cc.Class({extends:cc.Component,properties:{windows:{default:[],type:cc.Node}},start:function(){},closewindow:function(){for(var t=0;t<this.windows.length;++t){this.windows[t].getComponent("ShowWindow").hide()}},closewindowDirect:function(t,e){this.windows[e].getComponent("ShowWindow").closeDirectly()},closeForIndex:function(t,e){this.windows[e].getComponent("ShowWindow").hide()}}),cc._RF.pop()},{}],Commodity:[function(t,e,i){"use strict";cc._RF.push(e,"60225+5xWdPIrz3VaE+Ezie","Commodity");var n=t("EventType"),a=[0,"intelligence","leadership","speed","defense","strength"];cc.Class({extends:cc.Component,properties:{icon:{default:null,type:cc.Sprite},itemName:{default:null,type:cc.Label},quality:{default:null,type:cc.Sprite},bg_1:{default:null,type:cc.Sprite},bg_2:{default:null,type:cc.Sprite},node_1:{default:null,type:cc.Node},node_2:{default:null,type:cc.Node},btn_remove:{default:null,type:cc.Button},btn_buy:{default:null,type:cc.Button},itemValue:{default:null,type:cc.Label},itemDesc:{default:null,type:cc.Label},timeLabel1:{default:null,type:cc.Label},timeLabel2:{default:null,type:cc.Label},GAS:{default:null,type:cc.Label},TRX:{default:null,type:cc.Label},cityName:{default:null,type:cc.Label},playerName:{default:null,type:cc.Label},GASLong:{default:null,type:cc.Label},cityNameLong:{default:null,type:cc.Label},playerNameLong:{default:null,type:cc.Label},levelLabel:{default:null,type:cc.Label},isLong:!1,isGreyed:!1,slashIcon:{default:null,type:cc.Sprite},greyHeader:{default:null,type:cc.Sprite},greyShort:{default:null,type:cc.Sprite},greyLong:{default:null,type:cc.Sprite},greyItemBack:{default:null,type:cc.Sprite},greyIconColor:{default:new cc.Color},normalHeader:{default:null,type:cc.Sprite},normalShort:{default:null,type:cc.Sprite},normalLong:{default:null,type:cc.Sprite},normalItemBack:{default:null,type:cc.Sprite},normalIconColor:{default:new cc.Color},shortLocationIcon:{default:null,type:cc.Sprite},shortPlayerNameIcon:{default:null,type:cc.Sprite},longLocationIcon:{default:null,type:cc.Sprite},longPlayerNameIcon:{default:null,type:cc.Sprite},longLevelIcon:{default:null,type:cc.Sprite},longPriceLabel:{default:null,type:cc.Label},longTimeLabel:{default:null,type:cc.Label},generation:{default:null,type:cc.Label}},onLoad:function(){},getTimeString:function(t){return t<1?"Expired":cc.zz.utils.showTime(t)},getPlayerNameLabel:function(t,e){return cc.zz.TableDataManage.Language.getLangueForID(t)+" "+cc.zz.TableDataManage.Language.getLangueForID(e)},initData:function(t,e,i){if(this.data=t,this.index=i,this.icon.spriteFrame=cc.loader.getRes("ItemIcons/"+t.icon,cc.SpriteFrame),void 0==this.icon.spriteFrame&&cc.loader.loadRes("ItemIcons/"+t.icon,cc.SpriteFrame,function(t,e){this.icon.spriteFrame=t?cc.loader.getRes("common/icon_Qmark",cc.SpriteFrame):e}.bind(this)),this.itemName.string=cc.zz.TableDataManage.Language.getLangueForID(t.name),this.quality.spriteFrame=cc.loader.getRes("common/quality0"+t.quality,cc.SpriteFrame),this.itemDesc.string=cc.zz.TableDataManage.Language.getLangueForID(t.description),this.itemValue.string=a[t.stat_type]+"+"+t.stat_value,this.levelLabel.string="Lvl. "+t.level_value,this.GAS.string=t.price+cc.zz.LoginData.getCurrency(),this.GASLong.string=t.price+cc.zz.LoginData.getCurrency(),this.TRX.string=t.price+cc.zz.LoginData.getCurrency(),this.btn_buy.node.active=1==e,this.btn_remove.node.active=2==e,this.cityName.string=t.city_name,this.playerName.string=this.getPlayerNameLabel(t.owner_first_name,t.owner_last_name),this.timeNum=t.created_time+3600*t.duration-cc.zz.utils.realTime,this.timeLabel1.string=this.getTimeString(this.timeNum),this.cityNameLong.string=t.city_name,this.playerNameLong.string=this.getPlayerNameLabel(t.owner_first_name,t.owner_last_name),this.timeLabel2.string=this.getTimeString(this.timeNum),this.timeNum>0)this.schedule(this.CountDown,1);else{this.itemDesc.string="The market duration for this item has expired. The seller needs to remove it from the market to clear slot.",this.itemValue.node.active=!1;var n=this.itemDesc.node.getContentSize();n.height+=this.itemDesc.fontSize,this.itemDesc.node.setContentSize(n),this.isGreyed=!0,this.showGreyShort()}this.generation.string="Generation: "+t.generation},CountDown:function(){this.isGreyed||(this.timeNum--,this.timeLabel1.string=cc.zz.utils.showTime(this.timeNum),this.timeLabel2.string=cc.zz.utils.showTime(this.timeNum),this.timeNum<1&&(this.isGreyed=!0,this.unschedule(this.CountDown)))},showGreyLong:function(){this.showSlash(),this.isLong=!0,cc.zz.SoundManage.onPlayEffect("item_menu_paper_open",!1),this.bg_1.node.active=!1,this.node_1.active=!1,this.bg_2.node.active=!0,this.node_2.active=!0,this.btn_buy.node.active=!1,this.hideShort(),this.greyHeader.node.active=!0,this.greyLong.node.active=!0,this.greyItemBack.node.active=!0,this.normalHeader.node.active=!1,this.normalLong.node.active=!1,this.normalItemBack.node.active=!1,cc.zz.fire.fire(n.SHOW_COMMOODITY,this.index)},hideLong:function(){this.showSlash(),this.greyHeader.node.active=!1,this.greyLong.node.active=!1,this.greyItemBack.node.active=!1,this.normalHeader.node.active=!1,this.normalLong.node.active=!1,this.normalItemBack.node.active=!1},hideShort:function(){this.showSlash(),this.greyHeader.node.active=!1,this.greyShort.node.active=!1,this.greyItemBack.node.active=!1,this.normalHeader.node.active=!1,this.normalShort.node.active=!1,this.normalItemBack.node.active=!1},showGreyShort:function(){this.showSlash(),this.isLong=!1,cc.zz.SoundManage.onPlayEffect("item_menu_paper_close",!1),this.bg_2.node.active=!1,this.node_2.active=!1,this.bg_1.node.active=!0,this.node_1.active=!0,this.hideLong(),this.greyHeader.node.active=!0,this.greyShort.node.active=!0,this.greyItemBack.node.active=!0,this.normalHeader.node.active=!1,this.normalShort.node.active=!1,this.normalItemBack.node.active=!1},showNormalLong:function(){this.hideSlash(),this.isLong=!0,cc.zz.SoundManage.onPlayEffect("item_menu_paper_open",!1),this.bg_1.node.active=!1,this.node_1.active=!1,this.bg_2.node.active=!0,this.node_2.active=!0,this.greyHeader.node.active=!1,this.greyLong.node.active=!1,this.greyItemBack.node.active=!1,this.normalHeader.node.active=!0,this.normalLong.node.active=!0,this.normalItemBack.node.active=!0,cc.zz.fire.fire(n.SHOW_COMMOODITY,this.index)},showNormalShort:function(){this.hideSlash(),this.isLong=!1,cc.zz.SoundManage.onPlayEffect("item_menu_paper_close",!1),this.bg_2.node.active=!1,this.node_2.active=!1,this.bg_1.node.active=!0,this.node_1.active=!0,this.greyHeader.node.active=!1,this.greyShort.node.active=!1,this.greyItemBack.node.active=!1,this.normalHeader.node.active=!0,this.normalShort.node.active=!0,this.normalItemBack.node.active=!0},showLong:function(){this.isGreyed?this.showGreyLong():this.showNormalLong()},showShort:function(){this.isGreyed?this.showGreyShort():this.showNormalShort()},buyCommodity:function(){cc.zz.fire.fire(n.SHOW_BUY_VIEW,this.data)},onRemoveItem:function(){cc.zz.fire.fire(n.SHOW_REMOVE_COM,this.data)},start:function(){cc.zz.SoundManage.basicclickSound()},showSlash:function(){this.slashIcon.node.active=!0},hideSlash:function(){this.slashIcon.node.active=!1}}),cc._RF.pop()},{EventType:"EventType"}],CongratulationsView:[function(t,e,i){"use strict";cc._RF.push(e,"2eeccmGxXtOzqtozdchtEUV","CongratulationsView"),cc.Class({extends:cc.Component,properties:{},start:function(){},initData:function(){}}),cc._RF.pop()},{}],CorrectWalletUsage:[function(t,e,i){"use strict";cc._RF.push(e,"7b7c8za+ZlFmaOldSwl2NBP","CorrectWalletUsage");t("EventType"),cc.Class({properties:{},ctor:function(){this.blockchain="",this.network="",this.walletAddress=""},on:function(t,e,i){this.blockchain=t,this.network=e,this.walletAddress=i;var n=setInterval(function(){return cc.zz.BlockchainInteractor.isValidWalletAddress(this.walletAddress)?cc.zz.BlockchainInteractor.isValidWalletNetwork(this.network)?void 0:(console.warn("Wallet should be on "+this.network+"!"),alert("Restarting the game! Reason: wallet should be on "+this.network+"!"),this.restart(),void clearInterval(n)):(console.warn("Wallet Address was changed! Needs to restart the game!"),alert("Restarting the game! Reason: wallet address has been changed!"),this.restart(),void clearInterval(n))}.bind(this),100)},restart:function(){document.location.reload()}});cc._RF.pop()},{EventType:"EventType"}],EquipItem:[function(t,e,i){"use strict";cc._RF.push(e,"cc5fbF7gHxC7ZaIsNycM7aa","EquipItem");var n=t("EventType"),a=(t("FilterButton"),new cc.Color(168,152,123));cc.Class({extends:cc.Component,properties:{icon:{default:null,type:cc.Sprite},desc:{default:null,type:cc.Label},stat:{default:null,type:cc.Label},EMPTY:{default:null,type:cc.Label}},onLoad:function(){this.icon.node.on(cc.Node.EventType.MOUSE_ENTER,this.showTips.bind(this)),this.icon.node.on(cc.Node.EventType.MOUSE_LEAVE,this.hideTips.bind(this))},initItems:function(t){t?(this.icon.node.active=!0,this.EMPTY.node.active=!1,this.equipdata=t,this.setTexts(),this.icon.spriteFrame=cc.loader.getRes("ItemIcons/"+this.equipdata.icon,cc.SpriteFrame),void 0==this.icon.spriteFrame&&cc.loader.loadRes("ItemIcons/"+this.equipdata.icon,cc.SpriteFrame,function(t,e){this.icon.spriteFrame=t?cc.loader.getRes("common/icon_Qmark",cc.SpriteFrame):e}.bind(this))):(this.stat.node.active=!1,this.icon.node.active=!1,this.EMPTY.node.active=!0,this.desc.string=cc.zz.TableDataManage.Language.getLangueForID("label.12"),this.desc.node.color=a)},changeItems:function(t){cc.zz.LoginData.removeBagItem(t),cc.zz.LoginData.changeEquipData(t,t.item_type),this.equipdata&&cc.zz.LoginData.addBagItem(this.equipdata),this.equipdata=t,this.icon.node.active=!0,this.stat.node.active=!0,this.setTexts(),this.EMPTY.node.active=!1,this.icon.spriteFrame=cc.loader.getRes("ItemIcons/"+this.equipdata.icon,cc.SpriteFrame),void 0==this.icon.spriteFrame&&cc.loader.loadRes("ItemIcons/"+this.equipdata.icon,cc.SpriteFrame,function(t,e){this.icon.spriteFrame=t?cc.loader.getRes("common/icon_Qmark",cc.SpriteFrame):e}.bind(this))},setTexts:function(){switch(this.desc.string=cc.zz.TableDataManage.Language.getLangueForID(this.equipdata.name),this.equipdata.stat_type){case"1":this.stat.string=cc.zz.TableDataManage.Language.getLangueForID("label.4")+" +"+this.equipdata.stat_value;break;case"2":this.stat.string=cc.zz.TableDataManage.Language.getLangueForID("label.5")+" +"+this.equipdata.stat_value;break;case"3":this.stat.string=cc.zz.TableDataManage.Language.getLangueForID("label.6")+" +"+this.equipdata.stat_value;break;case"4":this.stat.string=cc.zz.TableDataManage.Language.getLangueForID("label.7")+" +"+this.equipdata.stat_value;break;case"5":this.stat.string=cc.zz.TableDataManage.Language.getLangueForID("label.8")+" +"+this.equipdata.stat_value}switch(this.equipdata.quality){case"1":this.desc.node.color=cc.Color.BLACK.fromHEX("#e9e9e9");break;case"2":this.desc.node.color=cc.Color.BLACK.fromHEX("#9fd862");break;case"3":this.desc.node.color=cc.Color.BLACK.fromHEX("#53a7f1");break;case"4":this.desc.node.color=cc.Color.BLACK.fromHEX("#d171ff");break;case"5":this.desc.node.color=cc.Color.BLACK.fromHEX("#f78333")}this.stat.node.color=this.desc.node.color},offHeroEquip:function(t,e){this.hideTips(),this.desc.string=cc.zz.TableDataManage.Language.getLangueForID("label.12"),this.desc.node.color=a,this.equipdata&&(this.stat.node.active=!1,this.icon.node.active=!1,this.EMPTY.node.active=!0,cc.zz.SoundManage.onPlayEffect("unequip_item_click",!1),cc.zz.fire.fire(n.HERO_EQUIP_OFF,this.equipdata),cc.zz.LoginData.addBagItem(this.equipdata),cc.zz.LoginData.changeEquipData(null,this.equipdata.item_type),this.equipdata=null)},showTips:function(t){if(this.icon.node.active){var e=this.node.convertToWorldSpace(cc.Vec2.ZERO),i=this.node.getContentSize();e.x=e.x+i.width/2,e.y=e.y+i.height/2;var a={};a.pos=e,a.data=this.equipdata,cc.zz.fire.fire(n.ITEM_TIP_SHOW,a)}},hideTips:function(t){this.icon.node.active&&cc.zz.fire.fire(n.ITEM_TIP_HIDE)}}),cc._RF.pop()},{EventType:"EventType",FilterButton:"FilterButton"}],EventType:[function(t,e,i){"use strict";var n;function a(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}cc._RF.push(e,"65be271pPBBSJc4216JfL+i","EventType");e.exports=(a(n={EventType:{},LOAD_IS_OVER:"LOAD_IS_OVER",OPEN_CREATEHERO:"OPEN_CREATEHERO",POP_UP:"POP_UP",SHOW_CITYPOPUP:"SHOW_CITYPOPUP",HIDE_CITYPOPUP:"HIDE_CITYPOPUP",SHOW_NPCPOPUP:"SHOW_NPCPOPUP",HIDE_NPCPOPUP:"HIDE_NPCPOPUP",SHOW_HOLDPOPUP:"SHOW_HOLDPOPUP"},"HIDE_NPCPOPUP","HIDE_NPCPOPUP"),a(n,"HERO_EQUIP_ON","HERO_EQUIP_ON"),a(n,"HERO_EQUIP_OFF","HERO_EQUIP_OFF"),a(n,"ITEM_TIP_SHOW","ITEM_TIP_SHOW"),a(n,"ITEM_TIP_HIDE","ITEM_TIP_HIDE"),a(n,"TROOPS_TIP_SHOW","TROOPS_TIP_SHOW"),a(n,"TROOPS_TIP_HIDE","TROOPS_TIP_HIDE"),a(n,"EXPLANATION_TIP_SHOW","EXPLANATION_TIP_SHOW"),a(n,"EXPLANATION_TIP_HIDE","EXPLANATION_TIP_HIDE"),a(n,"ENTER_CITY","ENTER_CITY"),a(n,"ENTER_FIGHT","ENTER_FIGHT"),a(n,"SHOW_COMMOODITY","SHOW_COMMOODITY"),a(n,"SHOW_BUY_VIEW","SHOW_BUY_VIEW"),a(n,"SHOW_SELL_VIEW","SHOW_SELL_VIEW"),a(n,"SHOW_SALE_VIEW","SHOW_SALE_VIEW"),a(n,"SHOW_PURCHASE_VIEW","SHOW_PURCHASE_VIEW"),a(n,"SHOW_REMOVE_COM","SHOW_REMOVE_COM"),a(n,"SHOW_SHELF_VIEW","SHOW_SHELF_VIEW"),a(n,"SHOW_BAG_VIEW","SHOW_BAG_VIEW"),a(n,"SHOW_SETTING_VIEW","SHOW_SETTING_VIEW"),a(n,"SHOW_LOADING_VIEW","SHOW_LOADING_VIEW"),a(n,"FIGHT_ATT_SHOW","FIGHT_TIP_SHOW"),a(n,"FIGHT_ATT_HIDE","FIGHT_TIP_SHOW"),a(n,"FIGHT_RESULIT","FIGHT_RESULIT"),a(n,"FIGHT_CANCEL","FIGHT_CANCEL"),a(n,"SHOW_BUSINESSMAN","SHOW_BUSINESSMAN"),a(n,"BLOCK_NUMBER_INCREASED","BLOCK_NUMBER_INCREASED"),a(n,"SHOW_LEADERBOARD","SHOW_LEADERBOARD"),a(n,"SHOW_ITEMBOARD","SHOW_ITEMBOARD"),a(n,"SHOW_COFFERBOARD","SHOW_COFFERBOARD"),a(n,"SHOW_ARMORY_BOARD","SHOW_ARMORY_BOARD"),a(n,"SHOW_CITY_TARGET_BOARD","SHOW_CITY_TARGET_BOARD"),a(n,"SHOW_REFERLINK_VIEW","SHOW_REFERLINK_VIEW"),n),cc._RF.pop()},{}],ExplanationTipAttacher:[function(t,e,i){"use strict";cc._RF.push(e,"3f3fbvxaqBN+aj17LugSCxU","ExplanationTipAttacher");var n=t("EventType");cc.Class({extends:cc.Component,properties:{titleKey:cc.String,contentKey:cc.String,deltaPos:cc.Vec2},onLoad:function(){this.data={titleKey:this.titleKey,contentKey:this.contentKey},this.node.on(cc.Node.EventType.MOUSE_ENTER,this.showTips.bind(this)),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this.hideTips.bind(this))},showTips:function(){var t=this.node.convertToWorldSpace(cc.Vec2.ZERO);t.addSelf(this.deltaPos);var e={pos:t,data:this.data};cc.zz.fire.fire(n.EXPLANATION_TIP_SHOW,e)},hideTips:function(){cc.zz.fire.fire(n.EXPLANATION_TIP_HIDE)}}),cc._RF.pop()},{EventType:"EventType"}],ExplanationTipView:[function(t,e,i){"use strict";cc._RF.push(e,"74adaUS3sRHXZzhDFOlAc2v","ExplanationTipView"),cc.Class({extends:cc.Component,properties:{itemName:{default:null,type:cc.Label},line:{default:null,type:cc.Node},info:{default:null,type:cc.Label}},initData:function(t){void 0==t.titleKey?(this.itemName.node.active=!1,this.line.active=!1):(this.itemName.node.active=!0,this.line.active=!0,this.itemName.string=t.titleKey,0==t.titleKey.indexOf("label.")&&(this.itemName.string=cc.zz.TableDataManage.Language.getLangueForID(t.titleKey))),this.info.string=t.contentKey,0==t.contentKey.indexOf("label.")&&(this.info.string=cc.zz.TableDataManage.Language.getLangueForID(t.contentKey))}}),cc._RF.pop()},{}],FightPanel:[function(t,e,i){"use strict";cc._RF.push(e,"746f7VmJj5Ce5PhxyGilkzQ","FightPanel");var n=t("EventType");cc.Class({extends:cc.Component,properties:{card_1:{default:null,type:cc.Node},bar_1:{default:null,type:cc.ProgressBar},card_2:{default:null,type:cc.Node},bar_2:{default:null,type:cc.ProgressBar},icon_1:{default:[],type:cc.Sprite},icon_2:{default:[],type:cc.Sprite},value_1:{default:[],type:cc.Label},value_2:{default:[],type:cc.Label},attribute_1:{default:[],type:cc.Node},attribute_2:{default:[],type:cc.Node},troops_1:{default:null,type:cc.Label},troops_2_label:{default:null,type:cc.Label},troops_2:{default:null,type:cc.Label},troops_bar_1:{default:null,type:cc.ProgressBar},troops_bar_2:{default:null,type:cc.ProgressBar},Match:{default:null,type:cc.Node},fight:{default:null,type:cc.Node},win:{default:null,type:cc.Node},lose:{default:null,type:cc.Node},cancel:{default:null,type:cc.Sprite},cityLabel:{default:null,type:cc.Node},npclabel:{default:null,type:cc.Node},strongholdlabel:{default:null,type:cc.Node},pageresultWin:{default:null,type:cc.Node},pageresult:{default:null,type:cc.Node},attackButton:{default:null,type:cc.Node},loadingIcon:{default:null,type:cc.Node}},onLoad:function(){cc.zz.fire.on(n.FIGHT_RESULIT,this.onFightResult.bind(this)),cc.zz.net.addHandler(2001,this.attackStronghold.bind(this)),cc.zz.net.addHandler(2002,this.attackCity.bind(this)),cc.zz.net.addHandler(2003,this.attackNpc.bind(this)),cc.zz.net.addHandler(2007,this.attack.bind(this))},initData:function(t,e,i,n){this.data=t,this.attackButton.active=!1,this.loadingIcon.active=!0,this.fightType=e,this.fightID=i,this.initMyData(cc.zz.LoginData.getHeroData()),this.initOtherData(t,parseInt(n)),this.initLabel(),"city"==this.fightType?cc.zz.net.send(2007,[cc.zz.LoginData.getHeroID(),this.fightID,2]):"npc"==this.fightType?cc.zz.net.send(2007,[cc.zz.LoginData.getHeroID(),this.fightID,3]):cc.zz.net.send(2007,[cc.zz.LoginData.getHeroID(),this.fightID,1])},start:function(){},initMyData:function(t){this.attackData=t,this.card_1.getComponent("herocard").initHeroCard(t),this.value_1[0].string=parseInt(t.base.stat_intelligence)+this.getEquipValue(t.equipments[0]),this.value_1[1].string=parseInt(t.base.stat_leadership)+this.getEquipValue(t.equipments[1]),this.value_1[2].string=parseInt(t.base.stat_speed)+this.getEquipValue(t.equipments[2]),this.value_1[3].string=parseInt(t.base.stat_defense)+this.getEquipValue(t.equipments[3]),this.value_1[4].string=parseInt(t.base.stat_strength)+this.getEquipValue(t.equipments[4]);for(var e=0;e<5;++e){this.icon_1[e].getComponent("ItemIcon").initData(t.equipments[e],e)}this.SetHeroTroops()},SetHeroTroops:function(){var t=100*this.value_1[1].string,e=0;e=cc.zz.LoginData.getHeroData().hasOwnProperty("current_troops")?cc.zz.LoginData.getHeroData().current_troops:t,this.troops_1.string=e+"/"+t,this.troops_bar_1.progress=this.getProgressValue(parseInt(e),parseInt(t))},requestHeroTroop:function(){cc.zz.net.send(4010,[cc.zz.LoginData.getHeroID(),0])},getProgressValue:function(t,e){return t/e},getEquipValue:function(t){return t&&t.hasOwnProperty("stat_value")?parseInt(t.stat_value):0},initOtherData:function(t,e){this.defendData={},1==e?(this.defendData.base=t.base,this.defendData.equipments=cc.zz.TableDataManage.NpcData.getNpcEquipData(t.base.id),this.defendData.current_troops=t.current_troops):this.defendData=t,this.card_2.getComponent("herocard").initHeroCard(this.defendData),this.value_2[0].string=this.defendData.base.stat_total_intelligence,this.value_2[1].string=this.defendData.base.stat_total_leadership,this.value_2[2].string=this.defendData.base.stat_total_speed,this.value_2[3].string=this.defendData.base.stat_total_defense,this.value_2[4].string=this.defendData.base.stat_total_strength;for(var i=0;i<5;++i){this.icon_2[i].getComponent("ItemIcon").initData(this.defendData.equipments[i],i+5)}var n=100*this.defendData.base.stat_total_leadership,a=0;a=void 0!==this.defendData.current_troops?this.defendData.current_troops:n;var o=this.troops_2_label.getComponent("LocalizedLabel");"city"==this.fightType?(a=cc.zz.LoginData.getCity().troops,n=cc.zz.LoginData.getCity().troops_cap):o.dataID="label.9",this.troops_2.string=a+"/"+n,this.troops_bar_2.progress=this.getProgressValue(a,n)},initLabel:function(){this.cityLabel.active=!1,this.npclabel.active=!1,this.strongholdlabel.active=!1,"city"==this.fightType?this.cityLabel.active=!0:"npc"==this.fightType?this.npclabel.active=!0:this.strongholdlabel.active=!0},FightStart:function(){void 0!=this.fightData&&("city"==this.fightType?this.startFight(this.fightData,this.fightData.battle_type,cc.zz.LoginData.getBattleFee("PVC")):"npc"==this.fightType?this.startFight(this.fightData,this.fightData.battle_type,cc.zz.LoginData.getBattleFee("PVE")):this.startFight(this.fightData,this.fightData.battle_type,cc.zz.LoginData.getBattleFee("PVP")))},onFightResult:function(t){cc.zz.SoundManage.onPlayFightBgSound(),this.Match.active=!0,1==t?(this.pageresult.active=!0,this.win.active=!0,this.lose.active=!1):(this.pageresult.active=!0,this.lose.active=!0,this.win.active=!1),this.cancel.node.active=!0},attackCity:function(t){this.startFight(t,2,cc.zz.LoginData.getBattleFee("PVC"))},attackNpc:function(t){this.startFight(t,3,cc.zz.LoginData.getBattleFee("PVE"))},attackStronghold:function(t){this.startFight(t,1,cc.zz.LoginData.getBattleFee("PVP"))},attack:function(t){this.loadingIcon.active=!1,this.attackButton.active=!0,this.fightData=t},startFight:function(t,e,i){var n={};n.fightPanel=this,this.currentBattleType=e,n.fightData=t,n.currentBattleType=e,n.battle_id=t.battle_id,n.battle_result=t.battle_result,n.battle_type=e,n.heroID=cc.zz.LoginData.getHeroID(),n.attacker_troops=t.attacker_troops,n.attacker_remained=t.attacker_remained,n.aequip_1=parseInt(this.attackData.equipments[0]?this.attackData.equipments[0].id:0),n.aequip_2=parseInt(this.attackData.equipments[1]?this.attackData.equipments[1].id:0),n.aequip_3=parseInt(this.attackData.equipments[2]?this.attackData.equipments[2].id:0),n.aequip_4=parseInt(this.attackData.equipments[3]?this.attackData.equipments[3].id:0),n.aequip_5=parseInt(this.attackData.equipments[4]?this.attackData.equipments[4].id:0),n.fightID=parseInt(this.fightID),n.dheroID=parseInt(this.defendData.base.id),n.defender_troops=t.defender_troops,n.defender_remained=t.defender_remained,n.dequip_1=parseInt(this.defendData.equipments[0]?this.defendData.equipments[0].id:0),n.dequip_2=parseInt(this.defendData.equipments[1]?this.defendData.equipments[1].id:0),n.dequip_3=parseInt(this.defendData.equipments[2]?this.defendData.equipments[2].id:0),n.dequip_4=parseInt(this.defendData.equipments[3]?this.defendData.equipments[3].id:0),n.dequip_5=parseInt(this.defendData.equipments[4]?this.defendData.equipments[4].id:0),n.attackData=this.attackData,n.defendData=this.defendData,n.fee=i,n.signature=t.signature,void 0==t.signature?(cc.zz.net.addHandler(2008,function(t){cc.zz.net.removeHandler(2008),n.signature=t.signature,cc.zz.BlockchainInteractor.addBattleLog(n)}.bind(this)),cc.zz.net.send(2008,[t.battle_id])):cc.zz.BlockchainInteractor.addBattleLog(n)},onCandel:function(){cc.zz.fire.fire(n.FIGHT_CANCEL),this.fightData=void 0},onEnable:function(){this.Match.active=!0,this.cancel.node.active=!1,this.win.active=!1,this.lose.active=!1,this.pageresult.active=!1,cc.zz.SoundManage.onPlayFightBgSound(),this.SetHeroTroops(),this.attackButton.active=!1,this.loadingIcon.active=!0},onDisable:function(){cc.audioEngine.stopMusic(),this.fightData=void 0,this.attackButton.active=!0,this.loadingIcon.active=!1}}),cc._RF.pop()},{EventType:"EventType"}],FightView:[function(t,e,i){"use strict";cc._RF.push(e,"3d172HU9whOloZw0OeIlmcP","FightView");var n=t("EventType");cc.Class({extends:cc.Component,properties:{myhero:{default:null,type:cc.Node},otherhero:{default:null,type:cc.Node},Troops:{default:null,type:cc.Prefab},map:{default:null,type:cc.Node},Troops1:{default:[],type:cc.Sprite},Troops2:{default:[],type:cc.Sprite}},onLoad:function(){},start:function(){},initData:function(t){this.myhero.getComponent("herocard").initHeroCard(cc.zz.LoginData.getHeroData()),this.otherhero.getComponent("herocard").initHeroCard(t)},setResult:function(t){this.result=t},FightResult:function(){this.Troops1[0].node.stopAllActions(),this.Troops2[0].node.stopAllActions(),this.Troops1[1].node.stopAllActions(),this.Troops2[1].node.stopAllActions(),this.Troops1[2].node.stopAllActions(),this.Troops2[2].node.stopAllActions(),this.node.active=!1,cc.zz.fire.fire(n.FIGHT_RESULIT,this.result)},startFight:function(){this.Troops1[0].node.runAction(cc.moveTo(3,cc.v2(0,0))),this.Troops2[0].node.runAction(cc.moveTo(3,cc.v2(0,0))),this.Troops1[1].node.runAction(cc.moveTo(3,cc.v2(0,0))),this.Troops2[1].node.runAction(cc.moveTo(3,cc.v2(0,0))),this.Troops1[2].node.runAction(cc.moveTo(3,cc.v2(0,0))),this.Troops2[2].node.runAction(cc.sequence(cc.moveTo(3,cc.v2(0,0)),cc.callFunc(function(){this.FightResult()}.bind(this))))},onEnable:function(){cc.zz.SoundManage.onPlayFightSound(),this.startFight()},onDisable:function(){this.Troops1[0].node.setPosition(-245,-177),this.Troops2[0].node.setPosition(0,184),this.Troops1[1].node.setPosition(0,-186),this.Troops2[1].node.setPosition(-245,184),this.Troops1[2].node.setPosition(221,-180),this.Troops2[2].node.setPosition(221,186)}}),cc._RF.pop()},{EventType:"EventType"}],FilterButton:[function(t,e,i){"use strict";cc._RF.push(e,"ee6c20z8WRDlbr5G0aJBhm0","FilterButton");t("HeroPanel");cc.Class({extends:cc.Component,properties:{index:""},onLoad:function(){this.toggle=this.node.getComponent(cc.Toggle)},onClick:function(t){""===this.index&&cc.error("Index of the filter icon must be set!"),this.checked!==t.isChecked&&(this.checked=t.isChecked,this.node.emit("filter",this))},isChecked:function(){return this.toggle.isChecked},uncheck:function(){this.toggle.uncheck()}}),cc._RF.pop()},{HeroPanel:"HeroPanel"}],HeroData:[function(t,e,i){"use strict";cc._RF.push(e,"4b6b0SMRrlIj6zRenO4KWRt","HeroData"),cc.Class({extends:cc.Component,properties:{},ctor:function(){this.heroData={},this.curtroops=0,this.totaltroops=0},initData:function(t){this.heroData=t},getHeroList:function(){return this.heroData},getHeroForID:function(t){if(this.heroData[t])return this.heroData[t]}}),cc._RF.pop()},{}],HeroPanel:[function(t,e,i){"use strict";cc._RF.push(e,"e31adv5KalE8KfbXcCqla/M","HeroPanel");var n=t("EventType"),a=t("TroopsPanel"),o=t("FilterButton");cc.Class({extends:cc.Component,properties:{itemsPerBagPage:0,itemSizeX:82,itemSizeY:86,bags:{default:null,type:cc.PageView},scrollToPrevButton:{default:null,type:cc.Node},scrollToNextButton:{default:null,type:cc.Node},bagitems:{default:null,type:cc.Prefab},filterButtons:[o],equips:{default:[],type:cc.Node},herocard:{default:null,type:cc.Node},INTELLIGENCE:{default:null,type:cc.Label},LEADERSHIP:{default:null,type:cc.Label},STREGTH:{default:null,type:cc.Label},DEFENSE:{default:null,type:cc.Label},SPEED:{default:null,type:cc.Label},troopPanel:{default:null,type:a},bagdesc:{default:null,type:cc.Node}},onLoad:function(){cc.zz.fire.on(n.HERO_EQUIP_ON,this.HeroEquipped.bind(this)),cc.zz.fire.on(n.HERO_EQUIP_OFF,this.HeroUnequipped.bind(this)),cc.zz.net.addHandler(10001,this.updateHeroInfo.bind(this),!0),cc.zz.net.addHandler(10002,this.updateHeroInfo.bind(this),!0),cc.zz.net.addHandler(10003,this.updateHeroInfo.bind(this),!0),cc.zz.net.addHandler(10008,this.updateHeroInfo.bind(this),!0),cc.zz.net.addHandler(4010,this.onHeroTroopsRetrieve.bind(this),!0)},onHeroTroopsRetrieve:function(t){cc.zz.LoginData._heroData.current_troops=t.current_troops,cc.zz.LoginData._heroData.troops_tip=t.troops_tip,this.SetHeroTroops()},HeroEquipped:function(t){var e=cc.zz.LoginData.getHeroData().base;if("1"==t.item_type)this.equips[0].getComponent("EquipItem").changeItems(t),this.INTELLIGENCE.string=parseInt(e.stat_intelligence)+this.getEquipValue(t);else if("2"==t.item_type){this.equips[1].getComponent("EquipItem").changeItems(t),this.LEADERSHIP.string=parseInt(e.stat_leadership)+this.getEquipValue(t)}else if("3"==t.item_type){this.equips[2].getComponent("EquipItem").changeItems(t),this.SPEED.string=parseInt(e.stat_speed)+this.getEquipValue(t)}else if("4"==t.item_type){this.equips[3].getComponent("EquipItem").changeItems(t),this.DEFENSE.string=parseInt(e.stat_defense)+this.getEquipValue(t)}else{this.equips[4].getComponent("EquipItem").changeItems(t),this.STREGTH.string=parseInt(e.stat_strength)+this.getEquipValue(t)}cc.zz.net.send(4002,[cc.zz.LoginData.getWallet(),cc.zz.LoginData.getHeroID(),t.id]),this.updateHeroInfo()},HeroUnequipped:function(t){var e=cc.zz.LoginData.getHeroData().base;"1"==t.item_type?this.INTELLIGENCE.string=parseInt(e.stat_intelligence):"2"==t.item_type?this.LEADERSHIP.string=parseInt(e.stat_leadership):"3"==t.item_type?this.SPEED.string=parseInt(e.stat_speed):"4"==t.item_type?this.DEFENSE.string=parseInt(e.stat_defense):this.STREGTH.string=parseInt(e.stat_strength),cc.zz.net.send(4003,[cc.zz.LoginData.getWallet(),cc.zz.LoginData.getHeroID(),t.id]),this.updateHeroInfo()},initHeroBag:function(t){var e=this.bags.getCurrentPageIndex(),i=this.bags.getPages().length;this.bags.removeAllPages();var n=cc.zz.LoginData.getBagData(),a=this.filterData(n),o=a.length;if(o>0){this.bagdesc.active=!1;for(var c=Math.ceil(o/this.itemsPerBagPage),s=0;s<c;++s){var r=new cc.Node;r.setContentSize(cc.size(656,344)),r.name="page_"+s,r.addComponent(cc.Layout),r.getComponent(cc.Layout).type=cc.Layout.Type.GRID,this.bags.addPage(r);var l=this.itemsPerBagPage;s===c-1?l=o:s<c-1&&(l=this.itemsPerBagPage*(s+1));for(var d=this.itemsPerBagPage*s;d<l;++d){var h=cc.instantiate(this.bagitems);h.setContentSize(cc.size(this.itemSizeX,this.itemSizeY)),h.getComponent("ItemScripts").initData(a[d],1),r.addChild(h)}}if(void 0==t||void 0==t.setToFirstPage||0==t.setToFirstPage){if(c>1)if(1==i){var u=c-1;this.bags.scrollToPage(u,0)}else this.bags.scrollToPage(e,0)}else c>1&&this.bags.scrollToPage(0,0)}else this.bags.removeAllPages(),this.bagdesc.active=!0;this.toggleScrollButtons()},initHeroEquip:function(t){var e=this.equips[0].getComponent("EquipItem"),i=this.equips[1].getComponent("EquipItem"),n=this.equips[2].getComponent("EquipItem"),a=this.equips[3].getComponent("EquipItem"),o=this.equips[4].getComponent("EquipItem");e.initItems(t[0]),i.initItems(t[1]),n.initItems(t[2]),a.initItems(t[3]),o.initItems(t[4])},scrollToPrevPage:function(){var t=this.bags.getCurrentPageIndex(),e=t;t>0&&(e=t-1),this.bags.scrollToPage(e,.3)},scrollToNextPage:function(){var t=this.bags.getPages().length-1,e=this.bags.getCurrentPageIndex(),i=e;e<t&&(i=e+1),this.bags.scrollToPage(i,.3)},toggleScrollButtons:function(){this.bags.getPages().length>1?(this.scrollToNextButton.active=!0,this.scrollToPrevButton.active=!0):(this.scrollToNextButton.active=!1,this.scrollToPrevButton.active=!1)},initHeroValue:function(){var t=cc.zz.LoginData.getHeroData().base,e=cc.zz.LoginData.getHeroEquip();this.INTELLIGENCE.string=parseInt(t.stat_intelligence)+this.getEquipValue(e[0]),this.LEADERSHIP.string=parseInt(t.stat_leadership)+this.getEquipValue(e[1]),this.SPEED.string=parseInt(t.stat_speed)+this.getEquipValue(e[2]),this.DEFENSE.string=parseInt(t.stat_defense)+this.getEquipValue(e[3]),this.STREGTH.string=parseInt(t.stat_strength)+this.getEquipValue(e[4]),this.SetHeroTroops()},SetHeroTroops:function(){var t=cc.zz.LoginData.getHeroData(),e=100*parseInt(this.LEADERSHIP.string),i=0;i=t.hasOwnProperty("current_troops")?parseInt(t.current_troops):e;var n=parseInt(t.base.infantry_proportion),a=parseInt(t.base.cavalry_proportion),o=parseInt(t.base.archer_proportion);this.troopPanel.setData(i,e,[n,a,o])},getEquipValue:function(t){return t&&t.hasOwnProperty("stat_value")?parseInt(t.stat_value):0},onEnable:function(){this.herocard.getComponent("herocard").initHeroCard(cc.zz.LoginData.getHeroData()),this.updateHeroInfo(),this.SetHeroTroops()},updateHeroInfo:function(){this.herocard.getComponent("herocard").initHeroCard(cc.zz.LoginData.getHeroData()),this.initHeroBag(),this.initHeroValue(),this.initHeroEquip(cc.zz.LoginData.getHeroEquip())},start:function(){var t=this;this.initHeroBag({setToFirstPage:!0}),this.initHeroValue(),this.initHeroEquip(cc.zz.LoginData.getHeroEquip()),this.SetHeroTroops(),this.filterButtons.forEach(function(e){e.node.on("filter",function(e){t.currentFilterButton&&t.currentFilterButton.uncheck(),t.currentFilterButton=e,e.isChecked()?t.filterType=e.index:(t.filterType=null,t.currentFilterButton=null),t.initHeroBag({setToFirstPage:!0})})})},filterData:function(t){var e=this,i=t.filter(function(t){return!e.filterType||e.filterType.toString()===t.stat_type});return i}}),cc._RF.pop()},{EventType:"EventType",FilterButton:"FilterButton",TroopsPanel:"TroopsPanel"}],Hero:[function(t,e,i){"use strict";cc._RF.push(e,"4b3ddnR/5NL9LEdWLy+Bvei","Hero");var n=t("EventType");cc.Class({extends:cc.Component,properties:{heroinfo:{default:null,type:cc.Prefab},heroList:{default:[],type:cc.Node},createHero:{default:null,type:cc.Node},referalLinkLabel:{default:null,type:cc.Label},stage:{default:null,type:cc.Node},loading:{default:null,type:cc.Node}},onLoad:function(){cc.zz.net.addHandler(4007,this.getHeroList.bind(this)),cc.zz.net.addHandler(4001,this.createMyHero.bind(this)),cc.zz.fire.on(n.POP_UP,this.showPopup.bind(this));var t=cc.zz.LoginData.getReferalLink().split("-");t[1]&&(cc.zz.net.addHandler(4005,this.getRefererHeroData.bind(this)),cc.zz.net.send(4005,[t[1],0])),cc.zz.net.send(4007,[])},getRefererHeroData:function(t){cc.zz.net.removeHandler(4005),this.referalLinkLabel.string="You have been refered by: "+cc.zz.TableDataManage.Language.getLangueForID(t.hero.base.first_name)+" "+cc.zz.TableDataManage.Language.getLangueForID(t.hero.base.last_name)},getHeroList:function(t){cc.zz.LoginData.setHeroID(t.hero_id),this.herodata=t.heroes;for(var e=0;e<t.heroes_amount;++e){this.heroList[e].getComponent("herocard").initHeroCard(this.herodata[e])}this.isplay=!1},onSeletedHero:function(t,e){this.stage.removeAllChildren(),this.index=e,this.createHero.active=!0,this.curHero=cc.instantiate(this.heroinfo),this.curHero.getComponent("heroinfo").initHero(this.herodata[e]),this.stage.addChild(this.curHero),this.curHero.setPosition(460,13),this.createHero.getComponent("ShowWindow").show(.1)},onClickLeft:function(t){cc.zz.SoundManage.basicclickSound(),this.isplay||(--this.index,this.index<0?this.index=2:this.index>2&&(this.index=0),this.onPageTurning(2))},onClickRight:function(t){cc.zz.SoundManage.basicclickSound(),this.isplay||(++this.index,this.index<0?this.index=2:this.index>2&&(this.index=0),this.onPageTurning(1))},onClickCreate:function(){var t=cc.zz.LoginData.getReferalLink(),e={id:0,addr:cc.zz.LoginData.getWallet(!1)};t&&(t=t.split("-"),e.addr=t[0],e.id=t[1]),cc.zz.SoundManage.basicclickSound(),cc.zz.BlockchainInteractor.putHero(this.herodata[this.index],e)},onPutHeroNeo:function(t){var e=this.herodata[this.index].base,i=this.herodata[this.index].equipments;cc.zz.net.send(4001,[cc.zz.LoginData.getWallet(),e.first_name,e.last_name,10*e.stat_leadership,e.stat_leadership,e.stat_defense,e.stat_speed,e.stat_strength,e.stat_intelligence,e.appearance_head,parseInt(i[1]?i[1].id:0),parseInt(i[0]?i[0].id:0),parseInt(i[2]?i[2].id:0),parseInt(i[3]?i[3].id:0),parseInt(i[4]?i[4].id:0),cc.zz.LoginData.getHeroID()])},createMyHero:function(t){cc.zz.LoginData.setHeroID(t.hero_id),cc.director.preloadScene("MainScene",function(t,e){cc.zz.fire.un(n.POP_UP)}.bind(this),function(){cc.director.loadScene("MainScene"),cc.zz.LoginData.setHeroData(this.herodata[this.index])}.bind(this))},onPageTurning:function(t){this.isplay=!0,this.nextHero=cc.instantiate(this.heroinfo),this.nextHero.getComponent("heroinfo").initHero(this.herodata[this.index]),this.stage.addChild(this.nextHero),1==t?(this.nextHero.setPosition(1501,13),this.curHero.runAction(cc.spawn(cc.sequence(cc.moveTo(.3,cc.v2(-495,13)),cc.callFunc(function(){this.curHero=this.nextHero,this.isplay=!1}.bind(this)),cc.removeSelf()),cc.callFunc(function(){this.nextHero.runAction(cc.moveTo(.3,cc.v2(460,13)))}.bind(this))))):(this.nextHero.setPosition(-495,13),this.curHero.runAction(cc.spawn(cc.sequence(cc.moveTo(.3,cc.v2(1501,13)),cc.callFunc(function(){this.curHero=this.nextHero,this.isplay=!1}.bind(this)),cc.removeSelf()),cc.callFunc(function(){this.nextHero.runAction(cc.moveTo(.3,cc.v2(460,13)))}.bind(this)))))},start:function(){},showPopup:function(t,e){this.loading.getComponent("popupView").show(t,e)},update:function(t){cc.zz.SoundManage.onPlayBgSound()}}),cc._RF.pop()},{EventType:"EventType"}],Http:[function(t,e,i){"use strict";cc._RF.push(e,"3b29e9JBppEiK3jIMLhK8fK","Http");var n=cc.Class({extends:cc.Component,statics:{url:"",send:function(t,e,i,a){var o=cc.loader.getXMLHttpRequest();o.timeout=5e3;var c="?";for(var s in e)"?"!=c&&(c+="&"),c+=s+"="+e[s];null===a&&(a=n.url);var r=a+t+encodeURI(c);return o.open("GET",r,!0),cc.sys.isNative&&o.setRequestHeader("Accept-Encoding","gzip,deflate","text/html;charset=UTF-8"),o.onreadystatechange=function(){if(4===o.readyState&&o.status>=200&&o.status<300)try{var t=JSON.parse(o.responseText);null!==i&&i(t)}catch(t){cc.error("Http-err: ",t)}},o.send(),o}}});cc._RF.pop()},{}],ItemData:[function(t,e,i){"use strict";cc._RF.push(e,"b53c1pgyuZJp4TT+NKd793s","ItemData"),cc.Class({extends:cc.Component,properties:{},ctor:function(){this.itemData={}},initData:function(t){this.itemData=t},getItemList:function(){return this.itemData},getItemIconForID:function(t){if(this.itemData[t])return this.itemData[t].icon},getHeloEquipForID:function(t){if(this.itemData[t])return this.itemData[t].appearance},getItemForType:function(t){var e={};for(var i in this.itemData){var n=this.itemData[i];n.parts==t&&(e[i]=n)}return e},getItemForQuality:function(t){var e={};for(var i in this.itemData){var n=this.itemData[i];n.quality==t&&(e[i]=n)}return e}}),cc._RF.pop()},{}],ItemIcon:[function(t,e,i){"use strict";cc._RF.push(e,"bf32dDjxxZFYYcrDBaAihfu","ItemIcon");t("EventType");var n=[137,55,-27,-110,-191];cc.Class({extends:cc.Component,properties:{icon:{default:null,type:cc.Sprite},attribute:{default:null,type:cc.Node}},onLoad:function(){},initData:function(t,e){this.data=t,this.index=e,this.data?this.icon.spriteFrame=cc.loader.getRes("ItemIcons/"+t.icon,cc.SpriteFrame):this.icon.spriteFrame=cc.loader.getRes("common/pubOpa",cc.SpriteFrame),this.icon.node.setContentSize(70,70)},onEnable:function(){this.node.on(cc.Node.EventType.MOUSE_ENTER,this.showTips.bind(this)),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this.hideTips.bind(this))},showTips:function(t){this.index>4?this.attribute.runAction(cc.moveTo(.1,cc.v2(66,n[this.index-5]))):this.attribute.runAction(cc.moveTo(.1,cc.v2(-66,n[this.index])))},hideTips:function(t){this.attribute.stopAllActions(),this.index>4?this.attribute.runAction(cc.moveTo(.1,cc.v2(-21,n[this.index-5]))):this.attribute.runAction(cc.moveTo(.1,cc.v2(22.8,n[this.index])))},onDisable:function(){this.node.off(cc.Node.EventType.MOUSE_ENTER),this.node.off(cc.Node.EventType.MOUSE_LEAVE)}}),cc._RF.pop()},{EventType:"EventType"}],ItemRemoveView:[function(t,e,i){"use strict";cc._RF.push(e,"5d08aV1ng1MYq/+Qgc6FbXM","ItemRemoveView");t("EventType");cc.Class({extends:cc.Component,properties:{},initData:function(t){this.data=t},onRemove:function(){cc.zz.BlockchainInteractor.deleteMarketItem(this.data)}}),cc._RF.pop()},{EventType:"EventType"}],ItemScripts:[function(t,e,i){"use strict";cc._RF.push(e,"1441d1ly+1E1bPYN8OhC998","ItemScripts");var n=t("EventType");cc.Class({extends:cc.Component,properties:{icon:{default:null,type:cc.Sprite},bg1:{default:null,type:cc.Sprite},bg2:{default:null,type:cc.Sprite},seleted:{default:null,type:cc.Sprite},qualityBar:{default:null,type:cc.Sprite}},onLoad:function(){this.icon.node.on(cc.Node.EventType.MOUSE_ENTER,this.showTips.bind(this)),this.icon.node.on(cc.Node.EventType.MOUSE_LEAVE,this.hideTips.bind(this))},initData:function(t,e){this.type=e,this.itemdata=t,this.icon.spriteFrame=cc.loader.getRes("ItemIcons/"+t.icon,cc.SpriteFrame),void 0==this.icon.spriteFrame&&cc.loader.loadRes("ItemIcons/"+t.icon,cc.SpriteFrame,function(t,e){this.icon.spriteFrame=t?cc.loader.getRes("common/icon_Qmark",cc.SpriteFrame):e}.bind(this)),1==e?(this.bg2.node.active=!1,this.seleted.node.active=!1):(this.bg2.node.active=!0,this.bg1.node.active=!1,this.seleted.node.active=!1),this.setQualityBar(this.itemdata.quality)},onEquipItem:function(t){1==this.type?(cc.zz.SoundManage.onPlayEffect("equip_item_click",!1),cc.zz.fire.fire(n.HERO_EQUIP_ON,this.itemdata)):2==this.type?cc.zz.fire.fire(n.SHOW_SALE_VIEW,this.itemdata):this.seleted.node.active=!this.seleted.node.active},showTips:function(t){var e=this.node.convertToWorldSpace(cc.Vec2.ZERO),i=this.node.getContentSize();e.x=e.x+i.width/2,e.y>=200?e.y=e.y+i.height/2:e.y=300;var a={};a.pos=e,a.data=this.itemdata,cc.zz.fire.fire(n.ITEM_TIP_SHOW,a)},hideTips:function(t){cc.zz.fire.fire(n.ITEM_TIP_HIDE)},setQualityBar:function(t){this.qualityBar.spriteFrame=cc.loader.getRes("common/bag_quality"+t,cc.SpriteFrame)}}),cc._RF.pop()},{EventType:"EventType"}],ItemTipView:[function(t,e,i){"use strict";cc._RF.push(e,"52747A1mItIj568AYEeoJHd","ItemTipView");var n=[0,"intelligence","leadership","speed","defense","strength"],a=[new cc.Color(255,255,255,255),new cc.Color(255,255,255,255),new cc.Color(170,255,73,255),new cc.Color(62,136,228,255),new cc.Color(184,69,209,255),new cc.Color(255,138,24,255)];cc.Class({extends:cc.Component,properties:{itemIcon:{default:null,type:cc.Sprite},itemName:{default:null,type:cc.Label},info:{default:null,type:cc.Label},itemValue:{default:null,type:cc.Label},itemLive:{default:null,type:cc.Label},generation:{default:null,type:cc.Label},itemExp:{default:null,type:cc.ProgressBar},itemTags:{default:[],type:cc.Sprite}},start:function(){},initData:function(t){this.itemIcon.spriteFrame=cc.loader.getRes("ItemIcons/"+t.icon,cc.SpriteFrame),void 0==this.itemIcon.spriteFrame&&cc.loader.loadRes("ItemIcons/"+t.icon,cc.SpriteFrame,function(t,e){this.itemIcon.spriteFrame=t?cc.loader.getRes("common/icon_Qmark",cc.SpriteFrame):e}.bind(this));var e=cc.zz.TableDataManage.Language.getLangueForID(t.name);this.itemName.string=null!=e?e:"Item #"+t.id,this.itemName.node.color=a[t.quality];var i=cc.zz.TableDataManage.Language.getLangueForID(t.description);if(this.info.string=null!=i?i:"",this.itemValue.string=n[t.stat_type]+"+"+t.stat_value,this.itemValue.node.color=a[t.quality],t.level_value<10?this.itemLive.string="Lvl. 0"+t.level_value:this.itemLive.string="Lvl. "+t.level_value,t.level_value>=t.level_max)this.itemExp.progress=1;else{var o=parseInt(t.level_value);this.itemExp.progress=o>0?(parseInt(t.exp)-this.getMaxExp(o-1))/(this.getMaxExp(o)-this.getMaxExp(o-1)):parseInt(t.exp)/this.getMaxExp(parseInt(t.level_value))}this.generation.string="Generation: "+t.generation},getMaxExp:function(t){var e=[2,6,20,48,92,152,228,318,434,580];return t<e.length?e[t]:e[e.length-1]}}),cc._RF.pop()},{}],LanguageData:[function(t,e,i){"use strict";cc._RF.push(e,"61de062n4dJ7ZM9/Xdumozn","LanguageData");var n=t("polyglot.min"),a=null;function o(t){return window.i18n.languages[t]}function c(t){t&&(a?a.replace(t):a=new n({phrases:t,allowMissing:!0}))}window.i18n||(window.i18n={languages:{},curLang:""}),e.exports={init:function(t){if(t!==window.i18n.curLang){var e=o(t)||{};window.i18n.curLang=t,c(e),this.inst=a}},t:function(t,e){if(a)return a.t(t,e)},inst:a,updateSceneRenderers:function(){for(var t=cc.director.getScene().children,e=[],i=0;i<t.length;++i){var n=t[i].getComponentsInChildren("LocalizedLabel");Array.prototype.push.apply(e,n)}for(var a=0;a<e.length;++a){var o=e[a];o.node.active&&o.updateLabel()}for(var c=[],s=0;s<t.length;++s){var r=t[s].getComponentsInChildren("LocalizedSprite");Array.prototype.push.apply(c,r)}for(var l=0;l<c.length;++l){var d=c[l];d.node.active&&d.updateSprite(window.i18n.curLang)}}},cc._RF.pop()},{"polyglot.min":"polyglot.min"}],Language:[function(t,e,i){"use strict";cc._RF.push(e,"c651czDmi5AZb4G1LZuLfw9","Language");t("LanguageData");cc.Class({extends:cc.Component,properties:{},ctor:function(){this.language={}},initData:function(t,e,i,n,a){for(var o in t)if(t.hasOwnProperty(o)){var c=t[o];this.language[o]=c}for(var s in e)if(e.hasOwnProperty(s)){var r=e[s];this.language[s]=r}for(var l in i)if(i.hasOwnProperty(l)){var d=i[l];this.language[l]=d}for(var h in n)if(n.hasOwnProperty(h)){var u=n[h];this.language[h]=u}for(var p in a)if(a.hasOwnProperty(p)){var g=a[p];this.language[p]=g}},getLangueForID:function(t){return this.language.hasOwnProperty(t)?"cn"==cc.zz.LoginData.getLanguage()?this.language[t].cn_text:this.language[t].en_text:t}}),cc._RF.pop()},{LanguageData:"LanguageData"}],LeaderboardView:[function(t,e,i){"use strict";cc._RF.push(e,"a6d86DXPZdHRbWZZ4VxJcJc","LeaderboardView"),cc.Class({extends:cc.Component,properties:{typeObjects:{default:[],type:cc.Sprite},rankInfos:{default:[],type:cc.Node},myRankLabel:{default:null,type:cc.Label},myTotalLabel:{default:null,type:cc.Label},tipsNode:{default:null,type:cc.Node},viewType:{default:0,type:cc.Integer},tipicon:{default:null,type:cc.Sprite},subTitle:{default:null,type:cc.Label},remainingTime:{default:null,type:cc.Label},remainingItemsValue:{default:null,type:cc.Label},burntItemsValue:{default:null,type:cc.Label},droppedItemsValue:{default:null,type:cc.Label}},onLoad:function(){this.tipicon.node.on(cc.Node.EventType.MOUSE_ENTER,this.showTips.bind(this)),this.tipicon.node.on(cc.Node.EventType.MOUSE_LEAVE,this.hideTips.bind(this)),void 0!=this.remainingTime&&(this.initialRemainingTimeString=this.remainingTime.string)},onEnable:function(){this.tipsNode.active=!1},InitLeaderboardData:function(t){this.UpdateTypePic(0,t.siege.active),this.UpdateTypePic(1,t.strongholds.active),this.UpdateTypePic(2,t.bandits.active),this.UpdateTypePic(3,t.trades.active),this.CloseRankInfos(),t.siege.active?(this.UpdateRankInfos(t.siege.ranks),this.UpdateMyRankInfo(t.siege.hero_rank),this.UpdateRemainingTimer(t.siege.schedule)):t.strongholds.active?(this.UpdateRankInfos(t.strongholds.ranks),this.UpdateMyRankInfo(t.strongholds.hero_rank),this.UpdateRemainingTimer(t.strongholds.schedule)):t.bandits.active?(this.UpdateRankInfos(t.bandits.ranks),this.UpdateMyRankInfo(t.bandits.hero_rank),this.UpdateRemainingTimer(t.bandits.schedule)):t.trades.active?(this.UpdateRankInfos(t.trades.ranks),this.UpdateMyRankInfo(t.trades.hero_rank),this.UpdateRemainingTimer(t.trades.schedule)):this.remainingTime.string="Leaderboard"},CountDown:function(){this.timeNum--,this.remainingTime.string=cc.zz.TableDataManage.Language.getLangueForID(this.initialRemainingTimeString)+" "+cc.zz.utils.showTime(this.timeNum),this.timeNum<=0&&(this.unschedule(this.CountDown),this.remainingTime.active=!1)},UpdateRemainingTimer:function(t){this.timeNum=t.end_time-cc.zz.utils.realTime,this.timeNum>0&&(this.remainingTime.node.active=!0,this.remainingTime.string=cc.zz.TableDataManage.Language.getLangueForID(this.initialRemainingTimeString)+" "+cc.zz.utils.showTime(this.timeNum),this.schedule(this.CountDown,1))},InitCofferBoardData:function(t){this.subTitle.node.active=!1;for(var e=1;e<=Object.keys(t.cities).length;++e){this.rankInfos[e-1].active=!0,this.rankInfos[e-1].getComponent("RankInfo").InitCofferInfoData(t.cities[e])}},InitItemBoardData:function(t){if(this.CloseRankInfos(),void 0!=t.items)for(var e=0;e<t.items.length;++e){this.rankInfos[e].active=!0,this.rankInfos[e].getComponent("RankInfo").InitDropInfoData(t.items[e])}void 0!=t.remaining&&(this.remainingItemsValue.string=t.remaining),void 0!=t.burned&&(this.burntItemsValue.string=t.burned),void 0!=t.dropped&&(this.droppedItemsValue.string=t.dropped)},UpdateTypePic:function(t,e){this.typeObjects[t].spriteFrame=e?cc.loader.getRes("common/tipsflag_a",cc.SpriteFrame):cc.loader.getRes("common/tipsflag_c",cc.SpriteFrame)},UpdateRankInfos:function(t){for(var e=0;e<t.length;e++){if(e<this.rankInfos.length)this.rankInfos[e].active=!0,this.rankInfos[e].getComponent("RankInfo").InitRankInfoData(t[e])}},UpdateMyRankInfo:function(t){void 0!=t.rank&&(this.myRankLabel.string=t.rank,this.myTotalLabel.string=t.total)},ClickTips:function(t){1==this.tipsNode.active?this.tipsNode.active=!1:this.tipsNode.active=!0},showTips:function(){this.tipsNode.active=!0},hideTips:function(){this.tipsNode.active=!1},CloseRankInfos:function(){for(var t=0;t<this.rankInfos.length;t++)this.rankInfos[t].active=!1}}),cc._RF.pop()},{}],LinkView:[function(t,e,i){"use strict";cc._RF.push(e,"167164LomdMvJaqfNUE235+","LinkView");t("EventType");cc.Class({extends:cc.Component,properties:{titleLabel:{default:null,type:cc.Label},contentLabel:{default:null,type:cc.Label},iconSprite:{default:null,type:cc.Sprite}},start:function(){},InitData:function(t,e,i){this.titleLabel.string=t,this.contentLabel.string=e,this.iconSprite.spriteFrame=cc.loader.getRes(i,cc.SpriteFrame)}}),cc._RF.pop()},{EventType:"EventType"}],LocalizedImage:[function(t,e,i){"use strict";cc._RF.push(e,"bf67ft3T/tH7oReDdz7gpkq","LocalizedImage"),cc.Class({extends:cc.Component,properties:{tronSprite:{default:null,type:cc.SpriteFrame},neoSprite:{default:null,type:cc.SpriteFrame}},onLoad:function(){var t=this.getComponent(cc.Sprite);t&&(cc.zz.LoginData.isNeoBlockchain()?t.spriteFrame=this.neoSprite:t.spriteFrame=this.tronSprite)}}),cc._RF.pop()},{}],LocalizedLabel:[function(t,e,i){"use strict";cc._RF.push(e,"744dcs4DCdNprNhG0xwq6FK","LocalizedLabel");var n=t("LanguageData");cc.Class({extends:cc.Component,editor:{executeInEditMode:!0,menu:"i18n/LocalizedLabel"},properties:{dataID:{get:function(){return this._dataID},set:function(t){this._dataID!==t&&(this._dataID=t,this.updateLabel())}},_dataID:""},onLoad:function(){n.inst||n.init(),this.fetchRender()},fetchRender:function(){var t=this.getComponent(cc.Label);if(t)return this.label=t,void this.updateLabel()},updateLabel:function(){this.label?void 0!=cc.zz&&(this.label.string=cc.zz.TableDataManage.Language.getLangueForID(this.dataID)):cc.error("Failed to update localized label, label component is invalid!")}}),cc._RF.pop()},{LanguageData:"LanguageData"}],LocalizedSprite:[function(t,e,i){"use strict";cc._RF.push(e,"f34ac2GGiVOBbG6XlfvgYP4","LocalizedSprite");var n=t("SpriteFrameSet");cc.Class({extends:cc.Component,editor:{executeInEditMode:!0,inspector:"packages://i18n/inspector/localized-sprite.js",menu:"i18n/LocalizedSprite"},properties:{spriteFrameSet:{default:[],type:n}},onLoad:function(){this.fetchRender()},fetchRender:function(){var t=this.getComponent(cc.Sprite);if(t)return this.sprite=t,void this.updateSprite(window.i18n.curLang)},getSpriteFrameByLang:function(t){for(var e=0;e<this.spriteFrameSet.length;++e)if(this.spriteFrameSet[e].language===t)return this.spriteFrameSet[e].spriteFrame},updateSprite:function(t){if(this.sprite){var e=this.getSpriteFrameByLang(t);!e&&this.spriteFrameSet[0]&&(e=this.spriteFrameSet[0].spriteFrame),this.sprite.spriteFrame=e}else cc.error("Failed to update localized sprite, sprite component is invalid!")}}),cc._RF.pop()},{SpriteFrameSet:"SpriteFrameSet"}],LoginData:[function(t,e,i){"use strict";cc._RF.push(e,"71b86i5BGlPcL3xGG4iBKD4","LoginData");var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t("EventType"),cc.Class({properties:{},ctor:function(){var t=arguments[0],e=arguments[1],i=arguments[2];this.BlockchainType=t,this.NetworkType=e,this._playerData={},this._heroData={},this.equipData=[],this._bagData=[],this.Wallet="",this.Balance=0,this.uid="",this.heroid=0,this.currency=" TRX",this.city=void 0,this.referalLink="",this.blockchainData=i,this.contract=null,this.language="en"},setLanguage:function(t){this.language=t},getLanguage:function(){return this.language},setBlockchainAndNetwork:function(t,e){this.BlockchainType=t,this.NetworkType=e},getFullNode:function(){return this.getCurrentBlockchainData()[this.getNetType()].fullNode},getCurrentBlockchainData:function(){return this.blockchainData[this.getBlockchainType()]},getCurrentBlockchainScaner:function(){return this.getCurrentBlockchainData().scaner},getTxScanURI:function(t){return this.getCurrentBlockchainScaner()+t},getContractAddress:function(){return this.blockchainData[this.getBlockchainType()][this.getNetType()].contractAddress},getAdminWalletAddress:function(){return this.blockchainData[this.getBlockchainType()][this.getNetType()].gameAdminAddress},getNetAlias:function(){return this.blockchainData[this.getBlockchainType()][this.getNetType()].name},getHeroCreationFee:function(){return this.blockchainData[this.getBlockchainType()].heroCreationFee},getBattleFee:function(t){return this.blockchainData[this.getBlockchainType()].battleFees[t]},getNetType:function(){return this.NetworkType},isNeoBlockchain:function(){return"neo"==this.BlockchainType},isTronBlockchain:function(){return"tron"==this.BlockchainType},getBlockchainType:function(){return this.BlockchainType},getCurrency:function(t){var e=this.blockchainData[this.getBlockchainType()].currency;return"object"==(void 0===t?"undefined":n(t))&&void 0!==t.putSpacePrefix&&t.putSpacePrefix&&(e=" "+e),e},getContract:function(){if(null==this.contract)throw"Connection to a Smartcontract failed!";return this.contract},getMarketFee:function(t){return this.blockchainData[this.getBlockchainType()].marketFees[t]},getTronWattle:function(){return window.tronWeb.defaultAddress},initBlackData:function(t){this.Wallet=t.wallet,this.uid=t.uid,this.sign=t.sign,cc.zz.BlockchainTimer.initTimer(this.getBlockchainType(),this.getNetType(),null)},initO3Wallet:function(t){this.Wallet=t,cc.zz.BlockchainTimer.initTimer(this.getBlockchainType(),this.getNetType(),null)},initTronContract:function(t){var e=this;e.isTronBlockchain()&&tronWeb.contract().at(e.getContractAddress()).then(function(i){e.contract=i,cc.zz.BlockchainTimer.initTimer(e.getBlockchainType(),e.getNetType(),e.contract),t()}).catch(function(t){console.error("Blockchain connection failed! Reason:"),console.error(t),e.contract=void 0})},getWallet:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.isTronBlockchain()?t?tronWeb.defaultAddress.hex:tronWeb.defaultAddress.base58:this.Wallet},setPlayerData:function(t){this._playerData=t},getPlayerData:function(){return this._playerData},setHeroID:function(t){this.heroid=t},getHeroID:function(){return this.heroid},setHeroData:function(t){this._heroData=t},getHeroData:function(){return this._heroData},getHeroEquip:function(){return this.checkEquip(),this.equipData},setReferalLink:function(t){this.referalLink=t},getReferalLink:function(){return this.referalLink},changeEquipData:function(t,e){this._heroData.equipments[e-1]=t,this.equipData=this._heroData.equipments},checkEquip:function(){0==this.equipData.length&&(this.equipData=cc.js.array.copy(this._heroData.equipments))},isCanGoWhere:function(){if(0==this.equipData.length)return!0;for(var t=0;t<this.equipData.length;t++){var e=this.equipData[t];if(-1==this._heroData.equipments.indexOf(e))return!1}return!0},getName:function(){return cc.zz.TableDataManage.Language.getLangueForID(this._heroData.base.first_name)+" "+cc.zz.TableDataManage.Language.getLangueForID(this._heroData.base.last_name)},setBagData:function(t){this._bagData=t,this.ItemDataSort()},getBagData:function(){return this._bagData},addBagItem:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this._bagData.indexOf(t);(e||-1==i)&&(this._bagData.push(t),this.ItemDataSort())},removeBagItem:function(t){var e=this._bagData.indexOf(t);this._bagData.splice(e,1),this.ItemDataSort()},changeItemExp:function(t){for(var e=0;e<this.equipData.length;e++){var i=this.equipData[e];null!=i&&(i.id==t.id&&(this.equipData[e]=t))}},ItemDataSort:function(){for(var t=[],e=[],i=[],n=[],a=[],o=[],c=0;c<this._bagData.length;c++){var s=this._bagData[c];"1"==s.item_type?e.push(s):"2"==s.item_type?i.push(s):"3"==s.item_type?n.push(s):"4"==s.item_type?a.push(s):o.push(s)}t=(t=(t=(t=(t=t.concat(e.sort())).concat(i.sort())).concat(n.sort())).concat(a.sort())).concat(o.sort()),this._bagData=t},setCity:function(t){this.city=t},getCity:function(){return this.city},removeCity:function(){this.city=void 0}});cc._RF.pop()},{EventType:"EventType"}],Login:[function(t,e,i){"use strict";cc._RF.push(e,"54278XTNQJKXJr3ILy8Utnc","Login");var n=t("LanguageData");cc.Class({extends:cc.Component,properties:{},onLoad:function(){cc.zz.net.addHandler(10100,this._onSucEnterGame.bind(this)),this._facebookLogin()},onDestroy:function(){cc.zz.net.removeHandler(10100)},_onSucEnterGame:function(t){cc.zz.loginData.init(t),cc.director.loadScene("Hall")},_facebookLogin:function(){FBInstant.player.getSignedPlayerInfoAsync().then(function(t){var e=t.getSignature(),i=cc.zz.utils.transformLan(FBInstant.getLocale());n.init(i),n.updateSceneRenderers(),cc.zz.net.send(10100,e,"","FACEBOOK",FBInstant.player.getName())})},_wechatLogin:function(){wx.login({success:function(t){n.init("cn"),n.updateSceneRenderers(),cc.zz.net.send(10100,t.code,"","WECHAT")}})}}),cc._RF.pop()},{LanguageData:"LanguageData"}],LoseView:[function(t,e,i){"use strict";cc._RF.push(e,"545adRn9/ZBnoqHHePifz/6","LoseView"),cc.Class({extends:cc.Component,properties:{},start:function(){}}),cc._RF.pop()},{}],Main:[function(t,e,i){"use strict";cc._RF.push(e,"cd163a++EFNYJFa5J2FTreL","Main");var n=t("EventType");cc.Class({extends:cc.Component,properties:{panels:{default:[],type:cc.Node},curPanel:cc.Node,newPanel:cc.Node,oldPanel:{default:null,type:cc.Node},heroName:{default:null,type:cc.Label},loading:{default:null,type:cc.Node},topbtn:{default:[],type:cc.Toggle},cofferBlockCount:{default:null,type:cc.Label},dropBlockCount:{default:null,type:cc.Label},referalLinkLabel:{default:null,type:cc.Label}},onLoad:function(){cc.zz.fire.on(n.ENTER_CITY,this.showCityPanel.bind(this)),cc.zz.fire.on(n.ENTER_FIGHT,this.showFightPanel.bind(this)),cc.zz.fire.on(n.FIGHT_CANCEL,this.showMapPanel.bind(this)),cc.zz.fire.on(n.POP_UP,this.showPopup.bind(this)),this.heroName.string=cc.zz.LoginData.getName()},start:function(){cc.zz.net.addHandler(10004,this.BattleInitialization.bind(this)),cc.zz.net.addHandler(10006,this.BattleEnd.bind(this)),cc.zz.net.addHandler(10008,this.ItemDropped.bind(this),!0),cc.zz.net.addHandler(10007,this.ReceiveCoffeur.bind(this),!0),cc.zz.net.addHandler(6003,this.OnResponseLeaderBoard.bind(this),!0),cc.zz.net.addHandler(cc.zz.net.constants.ARMORY_GET_DATA,this.OnResponseArmoryBoard.bind(this),!0),cc.zz.net.addHandler(6004,this.OnResponseCofferBoard.bind(this),!0),cc.zz.net.addHandler(6005,this.OnResponseItemdropBoard.bind(this),!0),cc.zz.net.addHandler(6008,this.OnResponseCityTargetBoard.bind(this),!0),cc.zz.net.addHandler(4012,this.OnResponseReferLink.bind(this),!0)},ReceiveCoffeur:function(t){if(this.cofferPayedOut(t),void 0!=t.cities)for(var e=1;e<=t.cities.length;e++){var i=t.cities[e];if(i.lord_id==cc.zz.LoginData.getHeroID()&&0==i.is_npc){cc.zz.fire.fire(n.POP_UP,cc.zz.Popup.TYPE.GET_CITY_COFFER.id,{});break}}},BattleInitialization:function(t){},BattleEnd:function(t){if(t.defender_lord_id==cc.zz.LoginData.getHeroID()&&1==t.battle_result)if(2==t.battle_type){var e=cc.zz.Popup.getPopupParams(cc.zz.Popup.TYPE.CITY_CAPTURED.id),i=cc.zz.WordMapData.getCityData(t.defender_id),a=i.name+" "+cc.zz.TableDataManage.Language.getLangueForID(e.normal_paragraph),o="world/map_city";2==i.type?o="world/map_town":3==i.type&&(o="world/map_village"),cc.zz.fire.fire(n.POP_UP,cc.zz.Popup.TYPE.CITY_CAPTURED.id,{id:t.defender_id,icon:o,normal_paragraph:a})}else 1==t.battle_type&&cc.zz.fire.fire(n.POP_UP,cc.zz.Popup.TYPE.STRONGHOLD_CAPTURED.id,{})},ItemDropped:function(t){t.hero_id==cc.zz.LoginData.getHeroID()&&(cc.zz.LoginData.addBagItem(t.base),cc.zz.fire.fire(n.POP_UP,cc.zz.Popup.TYPE.ITEM_DROPPED.id,{icon:"ItemIcons/"+t.base.icon}))},cofferPayedOut:function(t){if(0!=cc.zz.WordMapData.citys.length){Object.keys(cc.zz.WordMapData.citys).length!=Object.keys(t.cities).length&&cc.warn("Coffer Payed, but failed to set new coffer sizes, since cities data is not downloaded to the client!");for(var e=0;e<Object.keys(t.cities).length;e++)cc.zz.WordMapData.citys[e].city_coffer=t.cities[cc.zz.WordMapData.citys[e].id].city_coffer}},ItemBought:function(t){t.base.owner==cc.zz.LoginData.getHeroID()&&cc.zz.LoginData.addBagItem(t.base)},onTopClickBtn:function(t,e){for(var i=0;i<this.panels.length;i++)e==i&&(this.oldPanel=this.panels[e]);this.oldPanel&&(this.newPanel=this.oldPanel),this.showPanel(),1==e?cc.zz.SoundManage.onPlayEffect("market_button_click",!1):2==e?cc.zz.SoundManage.onPlayEffect("map_button_click",!1):0==e&&cc.zz.SoundManage.onPlayEffect("Flag-appear",!1)},setbtninteractable:function(t){for(var e=0;e<this.topbtn.length;e++){this.topbtn[e].interactable=t}},showPanel:function(){this.curPanel!=this.newPanel&&(this.setbtninteractable(!1),this.newPanel.active=!0,this.curPanel.runAction(cc.sequence(cc.moveTo(.3,cc.v2(0,-1100)),cc.callFunc(function(){this.newPanel.setPosition(cc.v2(0,-3100)),this.newPanel.runAction(cc.sequence(cc.moveTo(.3,cc.v2(0,0)),cc.callFunc(function(){this.curPanel.active=!1,this.oldPanel=this.curPanel,this.curPanel=this.newPanel,this.setbtninteractable(!0)}.bind(this))))}.bind(this)))))},showHeroPanel:function(){this.newPanel=cc.find("Canvas/HeroPanel"),this.showPanel()},showCityPanel:function(){this.newPanel=cc.find("Canvas/CityPanel"),this.showPanel()},showFightPanel:function(t,e,i,n){this.newPanel=cc.find("Canvas/FightPanel"),this.newPanel.getComponent("FightPanel").initData(t,e,i,n),this.showPanel()},showMapPanel:function(){this.newPanel=cc.find("Canvas/MapPanel"),this.showPanel()},onClickSetting:function(){this.referalLinkLabel.string="Your referal link is: \n"+cc.zz.LoginData.getWallet(!1)+"-"+cc.zz.LoginData.getHeroID(),cc.zz.SoundManage.onPlayEffect("settings_button",!1),cc.zz.fire.fire(n.SHOW_SETTING_VIEW)},showPopup:function(t,e){this.loading.getComponent("popupView").show(t,e)},OnClickCoffer:function(){cc.zz.net.send(6004,[])},OnClickItemdrop:function(){cc.zz.net.send(6005,[])},OnClickLeaderboard:function(){cc.zz.net.send(6003,[cc.zz.LoginData.getHeroID()])},onClickArmory:function(){cc.zz.net.send(cc.zz.net.constants.ARMORY_GET_DATA,[cc.zz.LoginData.getHeroID()])},onClickRemoveArmoryItem:function(){cc.zz.net.send(cc.zz.net.constants.ARMORY_GET_DATA,[cc.zz.LoginData.getHeroID()])},onClickAddArmoryItem:function(){},OnClickCityTargetsBoard:function(){cc.zz.net.send(6008,[cc.zz.LoginData.getHeroID()])},OnClickReferLink:function(){cc.zz.net.send(4012,[cc.zz.LoginData.getHeroID()])},OnResponseReferLink:function(t){cc.zz.fire.fire(n.SHOW_REFERLINK_VIEW,t)},OnResponseLeaderBoard:function(t){cc.zz.fire.fire(n.SHOW_LEADERBOARD,t)},OnResponseArmoryBoard:function(t){cc.zz.fire.fire(n.SHOW_ARMORY_BOARD,t)},OnResponseCofferBoard:function(t){cc.zz.fire.fire(n.SHOW_COFFERBOARD,t)},OnResponseCityTargetBoard:function(t){void 0!=t.city_targets&&cc.zz.fire.fire(n.SHOW_CITY_TARGET_BOARD,t.city_targets)},OnResponseItemdropBoard:function(t){cc.zz.fire.fire(n.SHOW_ITEMBOARD,t)},update:function(t){void 0!=this.cofferBlockCount&&(this.cofferBlockCount.string=cc.zz.BlockchainTimer.getCofferLeft(cc.zz.LoginData.getBlockchainType())),void 0!=this.dropBlockCount&&(this.dropBlockCount.string=cc.zz.BlockchainTimer.getDropLeft(cc.zz.LoginData.getBlockchainType()))}}),cc._RF.pop()},{EventType:"EventType"}],MapPanel:[function(t,e,i){"use strict";cc._RF.push(e,"fb11a45fFNNB6RGsct6SnYA","MapPanel");var n=t("EventType");cc.Class({extends:cc.Component,properties:{city:{default:null,type:cc.Node},npc:{default:null,type:cc.Node},hold:{default:null,type:cc.Node},target:{default:null,type:cc.Node},citySprite:{default:null,type:cc.Node},cityitem:{default:null,type:cc.Prefab},player:{default:null,type:cc.Node},bandits:{default:null,type:cc.Prefab},strong:{default:null,type:cc.Prefab},cityNodeList:{default:[],type:cc.Node},strongholdNodeList:{default:[],type:cc.Node},banditNodeList:{default:[],type:cc.Node}},onLoad:function(){this.ownStrongHold=!1,cc.zz.fire.on(n.SHOW_CITYPOPUP,this.showCityPopup.bind(this)),cc.zz.fire.on(n.SHOW_NPCPOPUP,this.showNpcPopup.bind(this)),cc.zz.fire.on(n.SHOW_HOLDPOPUP,this.showStrongPopup.bind(this)),cc.zz.net.addHandler(4005,this.getEnemyData.bind(this)),cc.zz.net.addHandler(6001,this.getMapData.bind(this),!0),cc.zz.net.addHandler(4010,this.getHeroTroop.bind(this)),cc.zz.net.addHandler(10006,this.battleEnd.bind(this),!0),cc.zz.net.addHandler(10008,this.strongholdRewarded.bind(this),!0),this._scaleX=1,this._scaleY=1,this.fightType=0,this.isNpc=0,this.initCity(),this.initBandits(),this.initStronghold(),this.setPlayer(),this.target.setScale(this._scaleX,this._scaleY),this.onClickaddSmall(),this.onClickaddSmall()},strongholdRewarded:function(t){t.defender_id;void 0==t.defender_id&&t.stronghold_id,this.strongholdNodeList[t.stronghold_id].updateInfo({is_npc:t.is_npc,current_hero_id:cc.zz.LoginData.getHeroID(),lord_id:t.lord_id,created_time:cc.zz.WordMapData.getCurrentTimestamp(),first_name:t.lord_first_name,last_name:t.lord_last_name});var e=cc.zz.WordMapData.getStrongHoldData(t.stronghold_id);e.created_time=cc.zz.WordMapData.getCurrentTimestamp(),e.lord_id=t.lord_id,e.is_npc=t.is_npc,cc.zz.WordMapData.updateStrongHoldData(e)},battleEnd:function(t){if(3==parseInt(t.battle_type)){if(1==parseInt(t.battle_result)){var e=cc.zz.WordMapData.getBanditsData(parseInt(t.defender_id));e.attacked_time=cc.zz.WordMapData.getCurrentTimestamp(),cc.zz.WordMapData.setBanditsData(e),this.banditNodeList[parseInt(t.defender_id)].hide()}}else if(2==t.battle_type){if(1==t.battle_result){this.cityNodeList[t.defender_id].updateInfo({is_npc:0,current_hero_id:cc.zz.LoginData.getHeroID(),lord_id:t.attacker_id,first_name:t.attacker_first_name,last_name:t.attacker_last_name});var i=cc.zz.WordMapData.getCityData(t.defender_id);i.created_time=cc.zz.WordMapData.getCurrentTimestamp(),i.lord_id=t.attacker_id,i.is_npc=0,cc.zz.WordMapData.setCityData(i)}}else if(1==t.battle_type&&1==t.battle_result){var n=cc.zz.WordMapData.getStrongHoldData(t.defender_id);n.created_time=cc.zz.WordMapData.getCurrentTimestamp(),n.lord_id=t.attacker_id,n.is_npc=0,cc.zz.WordMapData.updateStrongHoldData(n),this.strongholdNodeList[t.defender_id].updateInfo({is_npc:0,current_hero_id:cc.zz.LoginData.getHeroID(),lord_id:t.attacker_id,created_time:cc.zz.WordMapData.getCurrentTimestamp(),first_name:t.attacker_first_name,last_name:t.attacker_last_name})}},enableBandToggler:function(){this.disableBandToggler();var t=this;this.bandToggler=setInterval(function(){t.toggleBandits()},1e3)},disableBandToggler:function(){void 0!=this.bandToggler&&clearInterval(this.bandToggler)},toggleBandits:function(){for(var t=1;t<=30;++t){var e=cc.zz.WordMapData.getBanditsData(t);cc.zz.WordMapData.isOverNow(e.attacked_time,cc.zz.WordMapData.band_disappearance_interval)?void 0!=this.banditNodeList[t]&&this.banditNodeList[t].hide():void 0!=this.banditNodeList[t]&&this.banditNodeList[t].show()}},initCity:function(){this.citydata=cc.zz.TableDataManage.CityData.getCityList();for(var t=1;t<=26;++t){var e=cc.instantiate(this.cityitem),i=e.getComponent("CityNode");this.cityNodeList[t]=i,i.initData(this.citydata[t]),this.citySprite.addChild(e)}},initBandits:function(){this.binditData=cc.zz.TableDataManage.BanditData.getBandList();for(var t=1;t<=30;++t){var e=cc.instantiate(this.bandits),i=e.getComponent("Bandits");this.banditNodeList[t]=i,i.initData(this.binditData[t]),this.citySprite.addChild(e)}},initStronghold:function(){this.strongData=cc.zz.TableDataManage.StrongholdData.getStrongList();for(var t=1;t<=30;++t){var e=cc.instantiate(this.strong),i=e.getComponent("Stronghold");this.strongholdNodeList[t]=i,i.initData(this.strongData[t]),this.citySprite.addChild(e)}},showCityPopup:function(t){this.HideCityPopup(),this.moveData=t,this.pos=t.coordinate.split(","),this.city.setPosition(this.pos[0],this.pos[1])},showNpcPopup:function(t){this.HideCityPopup(),this.moveData=t,this.pos=t.coordinate.split(","),this.npc.setPosition(this.pos[0],this.pos[1])},showStrongPopup:function(t){this.HideCityPopup(),this.moveData=t,this.pos=t.coordinate.split(","),this.hold.setPosition(this.pos[0],this.pos[1])},movetoCity:function(t,e){if(cc.zz.CurrentMoveData=cc.zz.WordMapData.getCityData(this.moveData.id),parseInt(cc.zz.CurrentMoveData.is_npc)<1&&2!=e){var i=new Date(1e3*cc.zz.CurrentMoveData.created_time);if(i.setHours(i.getHours()+parseInt(cc.zz.CurrentMoveData.immune_period)),new Date<=i)return void cc.zz.fire.fire(n.POP_UP,cc.zz.Popup.TYPE.CITY_IS_IMMUNE.id,{})}var a=this.player.getPosition();if(a.x!=this.pos[0]||a.y!=this.pos[1])this.player.runAction(cc.sequence(cc.moveTo(.5,cc.v2(this.pos[0],this.pos[1])),cc.callFunc(function(){if(2==e)cc.zz.fire.fire(n.ENTER_CITY);else{var t=cc.zz.WordMapData.getCityData(this.moveData.id).lord_id,i=cc.zz.WordMapData.getCityData(this.moveData.id).is_npc;t==cc.zz.LoginData.getHeroID()&&0==i?cc.zz.fire.fire(n.POP_UP,cc.zz.Popup.TYPE.CANNOT_ATTACK_CITY.id,{}):(cc.zz.net.send(4005,[t,i]),this.isNpc=i,this.fightType="city",this.fightID=this.moveData.id,cc.zz.LoginData.setCity(cc.zz.WordMapData.getCityData(this.moveData.id)))}}.bind(this)))),this.HideCityPopup();else if(2==e)cc.zz.fire.fire(n.ENTER_CITY);else if(cc.zz.CurrentMoveData.lord_id==cc.zz.LoginData.getHeroID()&&0==parseInt(cc.zz.CurrentMoveData.is_npc))cc.zz.fire.fire(n.POP_UP,cc.zz.Popup.TYPE.CANNOT_ATTACK_CITY.id,{});else{cc.zz.LoginData.setCity(cc.zz.WordMapData.getCityData(this.moveData.id));var o=cc.zz.WordMapData.getCityData(this.moveData.id).lord_id,c=cc.zz.WordMapData.getCityData(this.moveData.id).is_npc;this.isNpc=c,cc.zz.net.send(4005,[o,c]),this.fightType="city",this.fightID=this.moveData.id}},movetoNpc:function(){cc.zz.CurrentMoveData=cc.zz.WordMapData.getBanditsData(this.moveData.id);var t=this.player.getPosition();if(t.x==this.pos[0]&&t.y==this.pos[1]){this.fightType="npc";var e=cc.zz.WordMapData.getBanditsData(this.moveData.id).lord_id;return this.isNpc=1,void cc.zz.net.send(4005,[e,1])}this.player.runAction(cc.sequence(cc.moveTo(.5,cc.v2(this.pos[0],this.pos[1])),cc.callFunc(function(){var t=cc.zz.WordMapData.getBanditsData(this.moveData.id).lord_id;this.isNpc=1,cc.zz.net.send(4005,[t,1]),cc.zz.net.send(4004,[cc.zz.LoginData.getWallet(),cc.zz.LoginData.getHeroID(),2,this.moveData.id]),this.fightType="npc",this.fightID=this.moveData.id}.bind(this)))),this.HideCityPopup()},movetoStrongHold:function(){cc.zz.CurrentMoveData=cc.zz.WordMapData.getStrongHoldData(this.moveData.id);var t=cc.zz.WordMapData.getStrongHoldData(this.moveData.id);if(parseInt(t.is_conquered)>0&&parseInt(t.is_npc)<1){var e=new Date(1e3*t.created_time);if(e.setHours(e.getHours()+24),new Date<=e)return void cc.zz.fire.fire(n.POP_UP,cc.zz.Popup.TYPE.STRONGHOLD_IS_IMMUNE.id,{})}var i=this.player.getPosition();if(i.x==this.pos[0]&&i.y==this.pos[1]){if(1!=this.ownStrongHold){this.fightType="stronghold";var a=cc.zz.WordMapData.getStrongHoldData(this.moveData.id).lord_id,o=cc.zz.WordMapData.getStrongHoldData(this.moveData.id).is_npc;return this.isNpc=o,void cc.zz.net.send(4005,[a,o])}cc.zz.fire.fire(n.POP_UP,cc.zz.Popup.TYPE.CANNOT_ATTACK_STRONGHOLD.id,{})}else this.player.runAction(cc.sequence(cc.moveTo(.5,cc.v2(this.pos[0],this.pos[1])),cc.callFunc(function(){if(1==this.ownStrongHold)cc.zz.fire.fire(n.POP_UP,cc.zz.Popup.TYPE.CANNOT_ATTACK_STRONGHOLD.id,{});else{var t=cc.zz.WordMapData.getStrongHoldData(this.moveData.id).lord_id,e=cc.zz.WordMapData.getStrongHoldData(this.moveData.id).is_npc;this.isNpc=e,cc.zz.net.send(4005,[t,e]),this.fightType="stronghold",this.fightID=this.moveData.id}}.bind(this)))),this.HideCityPopup()},HideCityPopup:function(){this.city.setPosition(-9999,9999),this.npc.setPosition(-9999,9999),this.hold.setPosition(-9999,9999)},getMapData:function(t){cc.zz.WordMapData.initData(t);for(var e=1;e<=cc.zz.WordMapData.getCityDataLength();++e){var i=cc.zz.WordMapData.getCityData(e);this.cityNodeList[e].updateInfo(i)}for(var n=!1,a=1;a<=cc.zz.WordMapData.getStrongHoldDataLength();++a){var o=cc.zz.WordMapData.getStrongHoldData(a);void 0!==cc.zz.LoginData.getHeroID()&&o.lord_id==cc.zz.LoginData.getHeroID()&&(n=!0),this.strongholdNodeList[a].updateInfo(o)}this.ownStrongHold=n;for(var c=1;c<=cc.zz.WordMapData.getBanditsDataLength();++c)this.toggleBandits()},getEnemyData:function(t){cc.zz.fire.fire(n.ENTER_FIGHT,t.hero,this.fightType,this.fightID,this.isNpc)},onClickaddBig:function(){var t=Math.abs(2.8),e=Math.abs(2.8),i=(1-Math.abs(1/t))/5,n=(1-Math.abs(1/e))/5;this._scaleX+=i,this._scaleY+=n,this._scaleX>1&&(this._scaleX=1),this._scaleY>1&&(this._scaleY=1),this.target.setScale(this._scaleX,this._scaleY),this.target.setContentSize(5376*this._scaleX,3024*this._scaleY)},onClickaddSmall:function(){var t=Math.abs(2.8),e=Math.abs(2.8),i=Math.abs(1/t),n=Math.abs(1/e),a=(1-i)/5,o=(1-n)/5;this._scaleX-=a,this._scaleY-=o,this._scaleX<i&&this._scaleY<n?(this._scaleX=i,this._scaleY=n,this.target.setContentSize(1920,1080)):this.target.setContentSize(5376*this._scaleX,3024*this._scaleY),this.target.setScale(this._scaleX,this._scaleY)},attackCity:function(t){cc.zz.fire.fire(n.ENTER_FIGHT)},attackNpc:function(t){cc.zz.fire.fire(n.ENTER_FIGHT)},attackStronghold:function(t){cc.zz.fire.fire(n.ENTER_FIGHT)},setPlayer:function(t){this.player.setPosition(574,-1410)},getHeroTroop:function(t){cc.zz.LoginData.getHeroData().current_troops=t.current_troops},requestHeroTroop:function(){cc.zz.net.send(4010,[cc.zz.LoginData.getHeroID(),0])},showbusiness:function(){cc.zz.SoundManage.onPlayEffect("Traveling_merchant_open_click"),cc.zz.fire.fire(n.SHOW_BUSINESSMAN,1)},onEnable:function(){cc.zz.net.send(6001,[cc.zz.LoginData.getHeroID()]),this.requestHeroTroop(),this.enableBandToggler()},onDisable:function(){this.disableBandToggler()}}),cc._RF.pop()},{EventType:"EventType"}],MarketPanel:[function(t,e,i){"use strict";cc._RF.push(e,"d24eeE8gp1GBK3ITEllXL7s","MarketPanel");var n=[cc.v2(-434.5,154),cc.v2(-153.5,154),cc.v2(127.5,154),cc.v2(408.5,154),cc.v2(-434.5,2),cc.v2(-153.5,2),cc.v2(127.5,2),cc.v2(408.5,2),cc.v2(-434.5,-150),cc.v2(-153.5,-150),cc.v2(127.5,-150),cc.v2(408.5,-150)],a=t("EventType");cc.Class({extends:cc.Component,properties:{menuList:{default:[],type:cc.Node},btnupList:{default:[],type:cc.Button},btndownList:{default:[],type:cc.Button},bags:{default:null,type:cc.PageView},bagitems:{default:null,type:cc.Prefab},sellBtn:{default:null,type:cc.Button},history:{default:null,type:cc.Node},typeFilterLabel:{default:null,type:cc.Node},qualityFilterLabel:{default:null,type:cc.Node},priceFilterLabel:{default:null,type:cc.Node}},deleteItem:function(t){for(var e=0;e<this.sellMap.length;e++)this.sellMap[e].id==t.item_id&&this.sellMap.splice(e,1);for(e=0;e<this.buyMap.length;e++)this.buyMap[e].id==t.item_id&&this.buyMap.splice(e,1);this.type==this.sellType?this.initSellBag(2):this.type==this.buyType&&this.initShopBag(1)},addItem:function(t){var e=cc.zz.LoginData.getHeroData(0);t.base.city_name="",t.base.city_name=cc.zz.TableDataManage.CityData.CityPath[t.city_id].name,t.base.city_id=t.city_id,t.base.price=t.price,t.base.created_time=parseInt((new Date).getTime()/1e3),t.base.duration=t.duration,t.base.owner_first_name=t.owner_first_name,t.base.owner_last_name=t.owner_last_name,e.base.owner==t.base.owner&&this.sellMap.push(t.base),this.buyMap.push(t.base),this.type==this.sellType?this.initSellBag(2):this.type==this.buyType&&this.initShopBag(1)},onLoad:function(){this.hideAllMenu(),this.sellMap=[],this.buyMap=[],this.filtered=[],this.filterQualityType=0,this.filterItemType=0,this.filterIsPriceFromHigh=0,this.totalPage=1,this.type=1,this.itemMap=[],cc.zz.net.addHandler(7002,this.Shelfsuccess.bind(this),!0),cc.zz.net.addHandler(7005,this.getSellList.bind(this),!0),cc.zz.net.addHandler(7003,this.getSellList.bind(this),!0),cc.zz.net.addHandler(7004,this.buySuccess.bind(this),!0),cc.zz.fire.on(a.SHOW_COMMOODITY,this.showCommodity.bind(this)),cc.zz.net.addHandler(10001,this.getSellList.bind(this),!0),cc.zz.net.addHandler(10002,this.getSellList.bind(this),!0),cc.zz.net.addHandler(10003,this.buySuccess.bind(this),!0),cc.zz.net.addHandler(6001,this.getMapData.bind(this),!0)},getMapData:function(t){cc.zz.WordMapData.getCityDataLength()<=0&&cc.zz.WordMapData.initData(t)},toogleEvt:function(t,e){this.sellBtn.node.active=!1,this.history.active=!1,3==e?(this.history.active=!0,this.bags.node.active=!1):2==e?(this.bags.node.active=!0,this.sellBtn.node.active=!0,cc.zz.LoginData.isNetTron()?cc.zz.net.send(7005,[tronWeb.defaultAddress.hex,0]):cc.zz.LoginData.isNetNeo()&&cc.zz.net.send(7005,[cc.zz.LoginData.getWallet(),0])):(this.bags.node.active=!0,this.requestBuyList(0)),this.type=e},initShopBag:function(t){this.itemMap=[];var e=this.filtered.length;if(this.bags.removeAllPages(),e>0){var i=n.length,a=0,o=Math.ceil(e/i);this.totalPage=o;for(var c=1;c<=o;++c){var s=new cc.Node;s.setContentSize(cc.size(1150,450)),this.bags.addPage(s);for(var r=0;r<i;++r,++a){var l=cc.instantiate(this.bagitems);if(l.getComponent("Commodity").initData(this.buyMap[this.filtered[a]],t,r),s.addChild(l,i-r),void 0!=l&&(l.setPosition(n[r]),this.itemMap.push(l)),a>=e-1)break}}}this.page=0},initSellBag:function(t){if(this.itemMap=[],this.bags.removeAllPages(),this.sellMap.length>0){this.bags.removeAllPages();var e=new cc.Node;e.setContentSize(cc.size(1150,450)),this.bags.addPage(e);for(var i=0;i<this.sellMap.length;++i){var a=cc.instantiate(this.bagitems);a.getComponent("Commodity").initData(this.sellMap[i],t,i),e.addChild(a,12-i),a.setPosition(n[i]),this.itemMap.push(a)}}this.page=0},Shelfsuccess:function(){cc.zz.LoginData.isNetTron()?cc.zz.net.send(7005,[tronWeb.defaultAddress.hex,0]):cc.zz.LoginData.isNetNeo()&&cc.zz.net.send(7005,[cc.zz.LoginData.getWallet(),0])},buySuccess:function(){this.requestBuyList(0)},getBuyList:function(t){this.buyMap=t.items,this.fillFiltered(this.buyMap),this.initShopBag(1)},getSellList:function(t){this.sellMap=t.items,this.fillFiltered(this.sellMap),this.initSellBag(2)},comparePriceFromHigh:function(t,e){return t.price>e.price?-1:t.price<e.price?1:0},comparePriceFromLow:function(t,e){return t.price<e.price?-1:t.price>e.price?1:0},getIndexById:function(t,e){for(var i=t.length-1;i>=0;i--)if(t[i].id==e)return i;return 0},fillFiltered:function(t){this.filtered=[];for(var e=0;e<t.length;e++)0!=this.filterItemType&&t[e].item_type!=this.filterItemType||0!=this.filterQualityType&&t[e].quality!=this.filterQualityType||(this.filtered[this.filtered.length]=e);var i=[];for(e=0;e<this.filtered.length;e++)i[i.length]=t[this.filtered[e]];this.filterIsPriceFromHigh?i.sort(this.comparePriceFromHigh):i.sort(this.comparePriceFromLow);var n=[];for(e=0;e<i.length;e++)n[n.length]=this.getIndexById(t,i[e].id);this.filtered=n},showMenu:function(t,e){this.hideAllMenu(),this.menuList[e].active=!0,this.btnupList[e].node.active=!0,this.btndownList[e].node.active=!1},hideMenu:function(t,e){this.menuList[e].active=!1,this.btnupList[e].node.active=!1,this.btndownList[e].node.active=!0},hideAllMenu:function(){for(var t=0;t<3;++t)this.menuList[t].active=!1;for(var e=0;e<3;++e)this.btnupList[e].node.active=!1;for(var i=0;i<3;++i)this.btndownList[i].node.active=!0},PageUp:function(){--this.page,this.page<0&&(this.page=0),this.bags.setCurrentPageIndex(this.page)},pageDown:function(){++this.page,this.page>this.totalPage&&(this.page=this.totalPage),this.bags.setCurrentPageIndex(this.page)},showHeroBag:function(){if(this.cityData=cc.zz.CurrentMoveData,void 0!=this.cityData&&this.cityData.market_cap>0)return 0;cc.zz.fire.fire(a.SHOW_BAG_VIEW,2)},searchforType:function(t,e){this.filtered=[];var i=this.buyMap;1!=this.type&&(i=this.sellMap),this.filterItemType=e,this.fillFiltered(i),this.initShopBag(this.type),this.hideAllMenu()},searchforQuality:function(t,e){this.filtered=[];var i=this.buyMap;1!=this.type&&(i=this.sellMap),this.filterQualityType=e,this.fillFiltered(i),this.initShopBag(this.type),this.hideAllMenu()},initSearchPage:function(t){this.bags.removeAllPages(),this.hideAllMenu()},searchforPrice:function(t,e){var i=this.buyMap;1!=this.type&&(i=this.sellMap),this.filterIsPriceFromHigh=parseInt(e),this.fillFiltered(i),this.initShopBag(this.type),this.hideAllMenu()},onEnable:function(){0==cc.zz.WordMapData.citys.length&&cc.zz.net.send(6001,[cc.zz.LoginData.getHeroID()]),this.requestBuyList(0)},showCommodity:function(t){for(var e=0;e<this.itemMap.length;e++){var i=this.itemMap[e];i.getComponent("Commodity").index!=t&&i.getComponent("Commodity").showShort()}},hideAllItem:function(){this.hideAllMenu();for(var t=0;t<this.itemMap.length;t++){var e=this.itemMap[t];e.getComponent("Commodity").isLong&&e.getComponent("Commodity").showShort()}},requestBuyList:function(t){cc.zz.net.removeHandler(7001),cc.zz.net.addHandler(7001,this.getBuyList.bind(this),!0),cc.zz.net.send(7001,[t])}}),cc._RF.pop()},{EventType:"EventType"}],NeoInteractor:[function(t,e,i){"use strict";cc._RF.push(e,"68afa2/x4lBdaNi9e4smLFC","NeoInteractor");var n=t("EventType");cc.Class({ctor:function(){this.keys={MARKET_PREFIX:[1,0],MANAGABLE_ITEM_PREFIX:[2,0],STRONGHOLD_PREFIX:[3,0],STRONGHOLD_REWARD_PREFIX:[4,0],BATTLE_LOG_PREFIX:[5,0],NEXT_REWARD_ITEM_KEY:[6],CITY_PREFIX:[7,0],HERO_PREFIX:[8,0],LATEST_REWARDED_ITEM_KEY:[9],COFFER_PREFIX:[16,0],COFFER_PAYOUT_KEY:[17],UPDATED_STAT_PREFIX:[18,0],TEST_KEY:[19],VERIFICATIONAL_ITEM_PREFIX:[20,0],DROPPED_INCREMENTOR:[21]},this.notifCodes={ITEM_EXP_UPGRADE:7019},this.GAS=1e8},onLoad:function(){},onDestroy:function(){},dropDataCallback:function(t){if(null!=t){var e;e=this.deserializeRewardData(t),void 0!==this.rewardBlockLeftObj&&(this.rewardBlockLeftObj.neo.lastDropBlock=e.block)}},deserializeRewardData:function(t){var e=Neon.sc.StackItem.deserialize(t);return{block:0==e.value[0].value.length?0:parseInt(Neon.u.reverseHex(e.value[0].value),16),stronghold_id:0==e.value[1].value.length?0:parseInt(Neon.u.reverseHex(e.value[1].value),16),item_id:0==e.value[2].value.length?0:parseInt(Neon.u.reverseHex(e.value[2].value),16),hero_id:0==e.value[3].value.length?0:parseInt(Neon.u.reverseHex(e.value[3].value),16)}},deserializeItem:function(t){var e=Neon.sc.StackItem.deserialize(t);return{stat_type:0==e.value[0].value.length?0:o3dapi.utils.hex2int(e.value[0].value),quality:0==e.value[1].value.length?0:o3dapi.utils.hex2int(e.value[1].value),generation:0==e.value[2].value.length?0:o3dapi.utils.hex2int(e.value[2].value),stat_value:0==e.value[3].value.length?0:o3dapi.utils.hex2int(e.value[3].value),level_value:0==e.value[4].value.length?0:o3dapi.utils.hex2int(e.value[4].value),exp:0==e.value[5].value.length?0:o3dapi.utils.hex2int(e.value[5].value),hero:0==e.value[6].value.length?0:o3dapi.utils.hex2int(e.value[6].value),batch:0==e.value[7].value.length?0:o3dapi.utils.hex2int(e.value[7].value)}},intToAb:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=Neon.u.reverseHex(Neon.u.int2hex(t));return e&&t>127?i+="00":t>127&&2==i.length&&(i+="00"),i},getNotifFor:function(t,e){if(void 0!=e.executions&&void 0!=e.executions[0].notifications&&e.executions[0].notifications.length>0)for(var i=0;i<e.executions[0].notifications.length;i++){if(t==o3dapi.utils.hex2int(e.executions[0].notifications[i].state.value[0].value))return e.executions[0].notifications[i].state.value}return[]},putHero:function(t,e){if(cc.zz.LoginData.isNeoBlockchain()){cc.zz.fire.fire(n.POP_UP,cc.zz.Popup.TYPE.LOADING_WALLET_CONFIRMATION.id,{});var i=cc.zz.LoginData.getWallet(),a=parseInt(cc.zz.LoginData.getHeroID()),o=parseInt(e.id),c="";c=void 0==e.addr?i:e.addr;var s=[parseInt(t.base.stat_defense),parseInt(t.base.stat_leadership),parseInt(t.base.stat_intelligence),parseInt(t.base.stat_speed),parseInt(t.base.stat_strength)],r=[parseInt(t.equipments[0].id),parseInt(t.equipments[1].id),parseInt(t.equipments[2].id),parseInt(t.equipments[3].id),parseInt(t.equipments[4].id)];t.refer=e;t.fee=cc.zz.LoginData.getHeroCreationFee();t.fee;var l=[{asset:"GAS",address:cc.zz.LoginData.getAdminWalletAddress(),value:t.fee+""}],d={address:cc.zz.LoginData.getWallet(),network:cc.zz.LoginData.getNetAlias(),overrideIntents:!0,intentOutputs:l,data:t,method:"putHero",methodAlias:"Hero Creation",contractAddress:cc.zz.LoginData.getContractAddress(),invokeArgs:[{type:"Address",value:i},{type:"Integer",value:parseInt(a)},{type:"Integer",value:parseInt(o)},{type:"Address",value:c},{type:"Array",value:[this.intToAb(s[0]),this.intToAb(s[1]),this.intToAb(s[2]),this.intToAb(s[3]),this.intToAb(s[4])]},{type:"ByteArray",value:this.intToAb(r[0])},{type:"ByteArray",value:this.intToAb(r[1])},{type:"ByteArray",value:this.intToAb(r[2])},{type:"ByteArray",value:this.intToAb(r[3])},{type:"ByteArray",value:this.intToAb(r[4])},{type:"ByteArray",value:t.signature}]};this.invoke(d,function(e,i,a){cc.zz.fire.fire(n.POP_UP,cc.zz.Popup.TYPE.SUCCESS_TX_CONFIRMED.id,{link:e});var o=cc.zz.LoginData.getReferalLink(),c={id:"",addr:""};o&&(o=o.split("-"),c.addr=o[0],c.id=o[1]);i.base,t.signature,i.base.stat_leadership,i.equipments;c=i.refer,cc.director.preloadScene("MainScene",function(t,e){cc.zz.fire.un(n.POP_UP)}.bind(this),function(){cc.director.loadScene("MainScene"),cc.zz.LoginData.setHeroData(i)}.bind(this))},function(t,e,i){void 0!=i.id&&cc.zz.fire.fire(n.POP_UP,i.id,i.params)})}},addMarketItem:function(t){if(cc.zz.LoginData.isNeoBlockchain()){cc.zz.fire.fire(n.POP_UP,cc.zz.Popup.TYPE.LOADING_WALLET_CONFIRMATION.id,{});cc.zz.LoginData.removeBagItem(t);var e={address:cc.zz.LoginData.getWallet(),network:cc.zz.LoginData.getNetAlias(),overrideIntents:!0,intentOutputs:[{asset:"GAS",address:cc.zz.LoginData.getAdminWalletAddress(),value:t.fee+""}],data:t,method:"marketAddItem",methodAlias:"Add market item",contractAddress:cc.zz.LoginData.getContractAddress(),invokeArgs:[{type:"ByteArray",value:this.intToAb(parseInt(t.id))},{type:"Integer",value:parseFloat(t.price)*this.GAS},{type:"ByteArray",value:this.intToAb(3600*parseInt(t.time),!0)},{type:"Integer",value:parseInt(t.city_id)},{type:"ByteArray",value:this.intToAb(parseFloat(t.fee)/2*this.GAS,!0)}]};this.invoke(e,function(t,e,i){cc.zz.fire.fire(n.POP_UP,cc.zz.Popup.TYPE.SUCCESS_TX_CONFIRMED.id,{link:t}),cc.zz.WordMapData.citys[e.city_id-1].city_coffer+=e.fee/2},function(e,i,a){void 0!=a.id&&cc.zz.fire.fire(n.POP_UP,a.id,a.params),cc.zz.LoginData.addBagItem(t)})}},buyMarketItem:function(t){if(cc.zz.LoginData.isNeoBlockchain()){cc.zz.fire.fire(n.POP_UP,cc.zz.Popup.TYPE.LOADING_WALLET_CONFIRMATION.id,{});var e=cc.zz.LoginData.getHeroID();t.fee=t.price,t.fee=parseFloat(t.fee).toFixed(5);var i=t.fee/100;i=parseFloat(i).toFixed(5);var a=0,o=0,c=0,s=cc.zz.WordMapData.getCityData(t.city_id);0==s.is_npc&&s.lord_id==e?(a=t.fee,o=0,c=5*i,c=parseFloat(c.toFixed(5))):0==s.is_npc&&s.lord_address==t.seller_address?(a=0,o=parseFloat(t.fee)+10*i,o=parseFloat(o.toFixed(5)),o=parseFloat(parseFloat(o).toFixed(5)),c=5*i,c=parseFloat(c.toFixed(5))):1==s.is_npc?(o=0,c=5*i+10*i,c=parseFloat(c.toFixed(5)),a=t.fee):(o=10*i,o=parseFloat(o.toFixed(5)),c=5*i,c=parseFloat(c.toFixed(5)),a=t.fee);var r=[];c>0&&r.push({asset:"GAS",address:cc.zz.LoginData.getAdminWalletAddress(),value:parseFloat(c)+""}),o>0&&r.push({asset:"GAS",address:s.lord_address,value:parseFloat(o)+""}),a>0&&r.push({asset:"GAS",address:t.seller_address,value:parseFloat(a)+""}),t.fee=a>0?parseFloat(t.fee)+parseFloat(c)+parseFloat(o):parseFloat(c)+parseFloat(o),t.fee=parseFloat(t.fee),t.fee=t.fee.toFixed(6),t.fee=parseFloat(t.fee);var l={address:cc.zz.LoginData.getWallet(),network:cc.zz.LoginData.getNetAlias(),overrideIntents:!0,intentOutputs:r,data:t,method:"marketBuyItem",methodAlias:"Buy market item",contractAddress:cc.zz.LoginData.getContractAddress(),invokeArgs:[{type:"ByteArray",value:this.intToAb(parseInt(e))},{type:"ByteArray",value:this.intToAb(parseInt(t.id))},{type:"ByteArray",value:this.intToAb(10,!0)},{type:"ByteArray",value:this.intToAb(5,!0)}]};this.invoke(l,function(t,e,i){cc.zz.LoginData.addBagItem(e),cc.zz.fire.fire(n.POP_UP,cc.zz.Popup.TYPE.SUCCESS_TX_CONFIRMED.id,{link:t})},function(t,e,i){void 0!=i.id&&cc.zz.fire.fire(n.POP_UP,i.id,i.params)})}},deleteMarketItem:function(t){if(cc.zz.LoginData.isNeoBlockchain()){cc.zz.fire.fire(n.POP_UP,cc.zz.Popup.TYPE.LOADING_WALLET_CONFIRMATION.id,{});var e=this,i={address:cc.zz.LoginData.getWallet(),network:cc.zz.LoginData.getNetAlias(),overrideIntents:!1,intentOutputs:[],data:t,method:"marketDeleteItem",methodAlias:"Delete Market Item",contractAddress:cc.zz.LoginData.getContractAddress(),invokeArgs:[{type:"ByteArray",value:this.intToAb(parseInt(t.id))}]};this.invoke(i,function(t,i,a){e.shelf=i,cc.zz.fire.fire(n.POP_UP,cc.zz.Popup.TYPE.SUCCESS_TX_CONFIRMED.id,{link:t}),cc.zz.LoginData.addBagItem(e.shelf)},function(t,e,i){void 0!=i.id&&cc.zz.fire.fire(n.POP_UP,i.id,i.params)})}},addBattleLog:function(t){if(cc.zz.LoginData.isNeoBlockchain()){cc.zz.SoundManage.onPlayEffect("start_battle_click");var e={address:cc.zz.LoginData.getWallet(),network:cc.zz.LoginData.getNetAlias(),overrideIntents:!0,intentOutputs:[{asset:"GAS",address:cc.zz.LoginData.getAdminWalletAddress(),value:t.fee+""}],data:t,method:"logBattle",methodAlias:"Battle",contractAddress:cc.zz.LoginData.getContractAddress(),invokeArgs:[{type:"Integer",value:t.battle_id},{type:"Integer",value:t.battle_result},{type:"Integer",value:t.battle_type-1},{type:"ByteArray",value:this.intToAb(t.heroID)},{type:"Integer",value:t.attacker_troops},{type:"Integer",value:t.attacker_remained},{type:"ByteArray",value:this.intToAb(t.fightID)},{type:"Integer",value:t.defender_troops},{type:"Integer",value:t.defender_remained},{type:"ByteArray",value:this.intToAb(t.aequip_1)},{type:"ByteArray",value:this.intToAb(t.aequip_2)},{type:"ByteArray",value:this.intToAb(t.aequip_3)},{type:"ByteArray",value:this.intToAb(t.aequip_4)},{type:"ByteArray",value:this.intToAb(t.aequip_5)},{type:"ByteArray",value:t.signature.trim()},{type:"ByteArray",value:this.intToAb(this.GAS*(t.fee/2))}]};3==t.battle_type&&(1==t.battle_result?e.invokeArgs[e.invokeArgs.length-1]={type:"ByteArray",value:"02"}:e.invokeArgs[e.invokeArgs.length-1]={type:"ByteArray",value:"01"});var i=this;cc.zz.fire.fire(n.POP_UP,cc.zz.Popup.TYPE.LOADING_WALLET_CONFIRMATION.id,{}),t.fightPanel.pageresultWin.getComponent("ResultView").updatePanel(t.battle_type,t.battle_result,t.attacker_troops,t.attacker_remained,t.defender_troops,t.defender_remained,t.attackData,t.defendData),this.invoke(e,function(t,e,a){3==e.battle_type?(e.battle_id=parseInt(e.battle_id),i.getExpUpdatedItem(t,e,a)):(e.fightPanel.fight.getComponent("FightView").setResult(e.battle_result),e.fightPanel.fight.getComponent("FightView").initData(e.fightPanel.defendData),e.fightPanel.fight.active=!0,cc.zz.fire.fire(n.POP_UP,cc.zz.Popup.TYPE.SUCCESS_TX_CONFIRMED.id,{link:t}))},function(t,e,i){e.fightPanel.pageresult.active=!1,e.fightPanel.lose.active=!1,e.fightPanel.win.active=!1,e.fightPanel.Match.active=!0,e.fightPanel.cancel.node.active=!1,void 0!=i.id&&cc.zz.fire.fire(n.POP_UP,i.id,i.params)})}},getExpUpdatedItem:function(t,e,i){if(cc.zz.LoginData.isNeoBlockchain()){var a=0,o=this,c=this.getNotifFor(this.notifCodes.ITEM_EXP_UPGRADE,i);if(c.length>0){a=o3dapi.utils.hex2int(c[1].value),c[3].value;var s=Neon.u.ab2hexstring(this.keys.MANAGABLE_ITEM_PREFIX)+this.intToAb(a);o3dapi.NEO.getStorage({scriptHash:cc.zz.LoginData.getContractAddress(),key:s,network:cc.zz.LoginData.getNetAlias()}).then(function(i){if(void 0!=i.result){for(var c=o.deserializeItem(i.result),s=null,r=cc.zz.LoginData.getHeroEquip(),l=0;l<r.length;l++)if(null!=r[l]&&r[l].id==a){s=r[l];break}if(null!=s){s.stat_value_increase=parseInt(c.stat_value)-s.stat_value,s.stat_value=parseInt(c.stat_value),s.level_value_increase=parseInt(c.level_value)-s.level_value,s.level_value=parseInt(c.level_value),s.exp_increase=parseInt(c.exp)-s.exp,s.exp=parseInt(c.exp),cc.zz.LoginData.changeItemExp(s),e.fightPanel.pageresultWin.getComponent("ResultView").updateExpItem(s);cc.zz.LoginData.getHeroID()}}e.fightPanel.fight.getComponent("FightView").setResult(e.battle_result),e.fightPanel.fight.getComponent("FightView").initData(e.fightPanel.defendData),e.fightPanel.fight.active=!0,cc.zz.fire.fire(n.POP_UP,cc.zz.Popup.TYPE.SUCCESS_TX_CONFIRMED.id,{link:t})})}else e.fightPanel.fight.getComponent("FightView").setResult(e.battle_result),e.fightPanel.fight.getComponent("FightView").initData(e.fightPanel.defendData),e.fightPanel.fight.active=!0,cc.zz.fire.fire(n.POP_UP,cc.zz.Popup.TYPE.SUCCESS_TX_CONFIRMED.id,{link:t})}},getCofferSize:function(){var t=this;o3dapi.NEO.getStorage({scriptHash:cc.zz.LoginData.getContractAddress(),key:"42",network:cc.zz.LoginData.getNetAlias()}).then(function(e){if(void 0!=e.result&&e.result.length>0){for(var i=t.deserializeCoffers(e.result),n=0,a=0,o=0;o<i.length;o++){var c=parseFloat(i[o]/1e8).toFixed(5),s=(.3*(c=parseFloat(c))).toFixed(5);(s=parseFloat(s))>.1&&(a+=s),n+=c}console.log("Total coffer size: "+n+" GAS, payout amount: "+a+" GAS")}else console.warn("Coffer size wasn't fectched from Blockchain and Medet doesn't know why. Try later")})},deserializeCoffers:function(t){try{var e=Neon.sc.StackItem.deserialize(t)}catch(t){return console.log("Failed to serialize Coffers List"),console.log(t),{}}if(0==e.value.length)return[];for(var i=[],n=0;n<e.value.length;n++)0==e.value[n].type||0==e.value[n].value?i.push(0):i.push(parseInt(Neon.u.reverseHex(e.value[n].value),16));return i},byValueAscending:function(t,e){var i=parseFloat(t.value),n=parseFloat(e.value),a=0;return i<n?a=1:i>n&&(a=-1),a},waitTxConfirmation:function(t,e,i,n,a){var o=this;setTimeout(function(){o3dapi.NEO.getApplicationLog({txid:t,network:i}).then(function(i){if(i.executions[0].vmstate.search("FAULT")>-1){if(i.executions[0].notifications.length){var o=o3dapi.utils.hex2int(i.executions[0].notifications[0].state.value[0].value);cc.log(o)}else cc.log("There is no notifications"),cc.log(i.executions[0]);a(t,e,{id:cc.zz.Popup.TYPE.FAIL_UNEXPTECTED_BLOCKCHAIN_ISSUE.id,params:{link:t}})}else n(t,e,i)}).catch(function(c){void 0!=c.type&&"RPC_ERROR"==c.type?(cc.log("Tx is not confirmed yet..."),o.waitTxConfirmation(t,e,i,n,a)):(cc.error(c),a(t,e,{id:cc.zz.Popup.TYPE.FAIL_UNEXPTECTED_BLOCKCHAIN_ISSUE.id,params:{link:t}}))}.bind(this))}.bind(),3e3)},invoke:function(t,e,i){var a=this,o={scriptHash:t.contractAddress,operation:t.method,args:t.invokeArgs,broadcastOverride:!1,network:t.network},c=this;if(t.overrideIntents){var s={params:{address:t.address,assets:["GAS"],fetchUTXO:!0},network:t.network};o3dapi.NEO.getBalance(s).then(function(s){var r=s[t.address][0].unspent;void 0==r?(cc.log("Seems like first this wallet address is playing first time, huh?"),r=[]):(cc.log(t.address+" balance object:"),cc.log(s[t.address][0]));var l=parseFloat(s[t.address][0].amount)-t.data.fee-1e-5;if(l<0)cc.error("Insufficient balance for "+t.methodAlias+" invoke. Atleast "+(parseFloat(t.data.fee)+1e-5)+" GAS required"),i("",t.data,{id:cc.zz.Popup.TYPE.FAIL_WALLET_HAS_NO_MONEY.id,params:{}});else{r.forEach(function(t,e){r[e].index=t.n,r[e].txid.startsWith("0x")&&(r[e].txid=r[e].txid.substring(2))}.bind(a),!0),r.sort(a.byValueAscending);var d=parseFloat(1e-5)+parseFloat(t.data.fee);d=d.toFixed(5),d=parseFloat(d),console.log(d);for(var h=[],u=0,p=0;p<r.length&&(u+=parseFloat(r[p].value),h.push(r[p]),!(u>=d));p++);if(t.overrideIntents){if(h.length>10){l-=95*h.length*1e-5}var g=u-d;console.log(g),t.intentOutputs.push({asset:"GAS",address:cc.zz.LoginData.getWallet(),value:parseFloat(g.toFixed(5))+""}),o.assetIntentOverrides={inputs:h,outputs:t.intentOutputs}}o3dapi.NEO.invoke(o).then(function(a){cc.zz.fire.fire(n.POP_UP,cc.zz.Popup.TYPE.LOADING_TX_PENDING.id,{link:a.txid}),c.waitTxConfirmation(a.txid,t.data,t.network,e,i)}).catch(function(e){"CANCELED"==e?i("",t.data,{id:cc.zz.Popup.TYPE.FAIL_WALLET_REJECTED.id,params:{}}):(cc.error(e),"string"==typeof e.description&&e.description.indexOf("TypeError: Cannot read property 'forEac")>-1?i("",t.data,{id:cc.zz.Popup.TYPE.NODE_NOT_SYNCED_YET.id,params:{}}):e.description.message.indexOf("transaction validation failed.")>-1?i("",t.data,{id:cc.zz.Popup.TYPE.NODE_NOT_SYNCED_YET.id,params:{}}):i("",t.data,{id:cc.zz.Popup.TYPE.FAIL_UNEXPTECTED_BLOCKCHAIN_ISSUE.id,params:{}}))})}}).catch(function(e){"CANCELED"==e?i("",t.data,{id:cc.zz.Popup.TYPE.FAIL_WALLET_REJECTED.id,params:{}}):(cc.error(e),i("",t.data,{id:cc.zz.Popup.TYPE.FAIL_UNEXPTECTED_BLOCKCHAIN_ISSUE.id,params:{}}))})}else o.fee="0.00001",o3dapi.NEO.invoke(o).then(function(n){c.waitTxConfirmation(n.txid,t.data,t.network,e,i)}).catch(function(e){console.error(e),i("",t.data,{id:cc.zz.Popup.TYPE.FAIL_UNEXPTECTED_BLOCKCHAIN_ISSUE.id,params:{link:""}})})}});cc._RF.pop()},{EventType:"EventType"}],Net:[function(t,e,i){"use strict";cc._RF.push(e,"302cfnx9KxP9JL5MMAvtAT+","Net"),cc.Class({extends:cc.Component,ctor:function(){this.ip="",this.socket=null,this.heartTime=10,this.connectTimes=0,this.maxConnectTimes=10,this.handlers={},this.constants={HERO_SET_TROOPS_PROPORTIONS:4015,ARMORY_ADD_ITEMS:12001,ARMORY_REMOVE_ITEMS:12002,ARMORY_GET_DATA:12003,ARMORY_SET_MILITARY_ADVANCEMENT:12005}},addHandler:function(t,e,i){t=t.toString(),!this.handlers[t]||i?(this.handlers[t]=e,this.socket&&cc.zz.fire.on(t,e)):cc.error("evt: ["+t+"] handler has been registered already.")},removeHandler:function(t){t=t.toString(),cc.zz.fire.un(t),this.handlers[t]=null},removeAllHandler:function(){for(var t in this.handlers)cc.zz.fire.un(t);this.handlers={}},addHandlers:function(t){for(var e in t)this.addHandler(e,t[e])},removeHandlers:function(t){for(var e in t)cc.zz.fire.un(e),this.handlers[e]=null},connect:function(t,e){this.ip=t,this.fnConnect=e,this.socket&&1===this.socket.readyState||(this.socket=new WebSocket(this.ip),this.socket.onopen=this._onopen.bind(this),this.socket.onclose=this._onclose.bind(this),this.socket.onmessage=this._onmessage.bind(this))},_onopen:function(){this.connectTimes=0,this.sendHeart(),this.fnConnect&&this.fnConnect()},_onclose:function(t){this.connectTimes<this.maxConnectTimes?(this.scheduleOnce(function(){this.socket=new WebSocket(this.ip),this.socket.onopen=this._onopen.bind(this),this.socket.onclose=this._onclose.bind(this),this.socket.onmessage=this._onmessage.bind(this),this.connectTimes++},3),cc.error("Server connection has been disconnected: "+this.connectTimes)):cc.error("Server attempted to reconnect to server, but failed: "+this.connectTimes)},_onmessage:function(t){var e=JSON.parse(t.data);if(null!=e&&void 0!=e){var i=parseInt(e[0]),n=e[1],a=e[2];cc.zz.utils.realTime=n,9001===i?cc.log("Error: ",e):8003===i||cc.zz.fire.fire(i.toString(),a),this.resetCheckHeart()}},send:function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];cc.log(e),this.socket.send(JSON.stringify(e))},startCheckHeart:function(){this.scheduleOnce(this.sendHeart,this.heartTime)},resetCheckHeart:function(){this.unschedule(this.sendHeart),this.startCheckHeart()},sendHeart:function(){this.socket.send(JSON.stringify([8003,[]]))}}),cc._RF.pop()},{}],NewSlider:[function(t,e,i){"use strict";cc._RF.push(e,"79cd38ALqpNAb4g0obtDc80","NewSlider"),cc.Class({extends:cc.Component,properties:{sliderBar:{default:null,type:cc.Node},sliderHalde:{default:null,type:cc.Button},curNum:{default:null,type:cc.Label},maxNum:{default:null,type:cc.Label},Valid:!1,cur:0,max:0},onLoad:function(){this.setPorgress(this.Valid)},setData:function(t,e){this.cur=t,this.max=e,this.curNum.string=t,this.maxNum.string=e,this.node.getComponent(cc.Slider).progress=Math.floor(this.cur/this.max*100)/100;var i=this.sliderHalde.node.getPosition(),n=this.node.getContentSize();this.sliderBar.setContentSize(cc.size(n.width/2+i.x,19))},setPorgress:function(t){this.node.getComponent(cc.Slider).enabled=t},sliderEvent:function(t){this.cur=Math.floor(t.progress*this.max),this.setData(this.cur,this.max)},debugFun:function(){}}),cc._RF.pop()},{}],NpcData:[function(t,e,i){"use strict";cc._RF.push(e,"046bdfUA7ZHraEZdL1t4sb7","NpcData"),cc.Class({extends:cc.Component,properties:{},ctor:function(){this.npcData={}},initData:function(t){this.npcData=t},getNpcList:function(){return this.npcData},getNpcForID:function(t){if(this.npcData[t])return this.npcData[t]},getNpcEquipData:function(t){var e=[{},{},{},{},{}];if(this.npcData.hasOwnProperty(t)){var i=this.npcData[t];e[0].id=0,e[1].id=0,e[2].id=0,e[3].id=0,e[4].id=0,e[0].appereance=cc.zz.TableDataManage.ItemData.getHeloEquipForID(i.head),e[1].appereance=cc.zz.TableDataManage.ItemData.getHeloEquipForID(i.body),e[2].appereance=cc.zz.TableDataManage.ItemData.getHeloEquipForID(i.arm),e[3].appereance=cc.zz.TableDataManage.ItemData.getHeloEquipForID(i.shield),e[4].appereance=cc.zz.TableDataManage.ItemData.getHeloEquipForID(i.weapon),e[0].icon=cc.zz.TableDataManage.ItemData.getItemIconForID(i.head),e[1].icon=cc.zz.TableDataManage.ItemData.getItemIconForID(i.body),e[2].icon=cc.zz.TableDataManage.ItemData.getItemIconForID(i.arm),e[3].icon=cc.zz.TableDataManage.ItemData.getItemIconForID(i.shield),e[4].icon=cc.zz.TableDataManage.ItemData.getItemIconForID(i.weapon)}return e}}),cc._RF.pop()},{}],PopupIconcentricView:[function(t,e,i){"use strict";cc._RF.push(e,"742295rI5JC8pHOZveUyqg5","PopupIconcentricView");t("EventType");cc.Class({extends:cc.Component,properties:{titleLabel:{default:null,type:cc.Label},iconSprite:{default:null,type:cc.Sprite},paragraphLabel:{default:null,type:cc.Label},goButton:{default:null,type:cc.Button}},start:function(){},InitData:function(t,e){void 0!=t.title&&t.title.length>0?(this.titleLabel.string=cc.zz.TableDataManage.Language.getLangueForID(t.title),this.titleLabel.node.active=!0):this.titleLabel.node.active=!1,t.normal_paragraph.length>0?(void 0!=e.normal_paragraph?this.paragraphLabel.string=e.normal_paragraph:this.paragraphLabel.string=cc.zz.TableDataManage.Language.getLangueForID(t.normal_paragraph),this.paragraphLabel.node.active=!0):this.paragraphLabel.node.active=!1,t.icon.length>0?(void 0!=e.icon?this.iconSprite.spriteFrame=cc.loader.getRes(e.icon,cc.SpriteFrame):this.iconSprite.spriteFrame=cc.loader.getRes(t.icon,cc.SpriteFrame),this.iconSprite.node.active=!0,void 0!=t.action?"rotate"==t.action&&this.iconSprite.node.runAction(cc.repeatForever(cc.rotateBy(2,360))):this.iconSprite.node.setRotation(0)):this.iconSprite.node.active=!1,t.button_enabled?this.goButton.node.active=!0:this.goButton.node.active=!1,void 0!=t.sound&&cc.zz.SoundManage.onPlayEffect(t.sound)},stopAllActions:function(){this.iconSprite.node.stopAllActions()}}),cc._RF.pop()},{EventType:"EventType"}],PopupSimpleView:[function(t,e,i){"use strict";cc._RF.push(e,"033baXIKDlH+YZniVSTwps4","PopupSimpleView");t("EventType");cc.Class({extends:cc.Component,properties:{iconSprite:{default:null,type:cc.Sprite},titleLabel:{default:null,type:cc.Label},normalParagraphLabel:{default:null,type:cc.Label},smallParagraphLabel:{default:null,type:cc.Label},linkLabel:{default:null,type:cc.Label},goButton:{default:null,type:cc.Button}},start:function(){},InitData:function(t,e){t.has_custom_data||(t.title.length>0?(this.titleLabel.string=t.title,this.titleLabel.node.active=!0):this.titleLabel.node.active=!1,t.normal_paragraph.length>0?(this.normalParagraphLabel.string=cc.zz.TableDataManage.Language.getLangueForID(t.normal_paragraph),this.normalParagraphLabel.node.active=!0):this.normalParagraphLabel.node.active=!1,t.small_paragraph.length>0?(this.smallParagraphLabel.string=cc.zz.TableDataManage.Language.getLangueForID(t.small_paragraph),this.smallParagraphLabel.node.active=!0):void 0!=e.link&&e.link.length>0&&t.button_enabled?(this.smallParagraphLabel.string="\n",this.smallParagraphLabel.node.active=!0):(this.smallParagraphLabel.string="\n\n",this.smallParagraphLabel.node.active=!0),t.icon.length>0?(this.iconSprite.spriteFrame=cc.loader.getRes(t.icon,cc.SpriteFrame),this.iconSprite.node.active=!0,void 0!=t.action?"rotate"==t.action&&this.iconSprite.node.runAction(cc.repeatForever(cc.rotateBy(2,360))):this.iconSprite.node.setRotation(0)):this.iconSprite.node.active=!1,void 0!=e.link&&e.link.length>0?(this.linkLabel.string="txid: "+e.link,this.linkLabel.node.active=!0):t.small_paragraph.length>0?(this.linkLabel.string="\n\n",this.linkLabel.node.active=!0):this.linkLabel.node.active=!1,t.button_enabled?this.goButton.node.active=!0:this.goButton.node.active=!1,void 0!=t.sound&&cc.zz.SoundManage.onPlayEffect(t.sound))},stopAllActions:function(){this.iconSprite.node.stopAllActions()}}),cc._RF.pop()},{EventType:"EventType"}],Popup:[function(t,e,i){"use strict";cc._RF.push(e,"242c2DNIjNHP7/xn/eHUZh1","Popup");var n={SIMPLE:1,ICONCENTRIC:2,OUT_OF_ITEMS:3};cc.Class({ctor:function(){this.TYPE={LOADING_WALLET_CONFIRMATION:{id:"LOADING_WALLET_CONFIRMATION",view_type:n.SIMPLE,icon:"common/loading_01",action:"rotate",title:"",normal_paragraph:"label.210",small_paragraph:"label.211",link:void 0,has_custom_data:!1,button_enabled:!1},FAIL_WALLET_REJECTED:{id:"FAIL_WALLET_REJECTED",view_type:n.SIMPLE,icon:"common/icon_002",title:"",normal_paragraph:"label.212",small_paragraph:"label.213",link:void 0,has_custom_data:!1,button_enabled:!0},LOADING_TX_PENDING:{id:"LOADING_TX_PENDING",view_type:n.SIMPLE,icon:"common/loading_01",action:"rotate",title:"",normal_paragraph:"label.214",small_paragraph:"",link:"tx: ",has_custom_data:!1,button_enabled:!1},FAIL_WALLET_HAS_NO_MONEY:{id:"FAIL_WALLET_HAS_NO_MONEY",view_type:n.SIMPLE,icon:"common/icon_002",title:"",normal_paragraph:"label.215",small_paragraph:"",link:void 0,has_custom_data:!1,button_enabled:!0},SUCCESS_TX_CONFIRMED:{id:"SUCCESS_TX_CONFIRMED",view_type:n.SIMPLE,title:"",icon:"common/icon_001",sound:"Blockchain_Transaction_Success",normal_paragraph:"label.217",small_paragraph:"",link:"tx: ",has_custom_data:!1,button_enabled:!0},FAIL_OLD_TX_NOT_CONFIRMED:{id:"FAIL_TX_NOT_CONFIRMED",view_type:n.SIMPLE,icon:"common/icon_002",labels:["label.218"]},ITEM_DROPPED:{id:"ITEM_DROPPED",view_type:n.ICONCENTRIC,icon:"undefined",title:"label.219",normal_paragraph:"label.220",has_custom_data:!0,button_enabled:!0},STRONGHOLD_CAPTURED:{id:"STRONGHOLD_CAPTURED",view_type:n.ICONCENTRIC,icon:"world/icon_stronghold",sound:"Stronghold_Lost",normal_paragraph:"label.221",has_custom_data:!1,button_enabled:!0},GET_CITY_COFFER:{id:"GET_CITY_COFFER",view_type:n.ICONCENTRIC,icon:"common/icon_money",sound:"Coffer_payout",title:"label.219",normal_paragraph:"label.222",has_custom_data:!1,button_enabled:!0},CITY_CAPTURED:{id:"CITY_CAPTURED",view_type:n.ICONCENTRIC,icon:"world/map_city",sound:"Stronghold_Lost",normal_paragraph:"label.223",has_custom_data:!0,button_enabled:!0},OUT_OF_ITEMS:{id:"OUT_OF_ITEMS",view_type:n.OUT_OF_ITEMS,labels:["label.224","label.225"]},FAIL_SERVER_DISCONNECTED:{id:"FAIL_SERVER_DISCONNECTED",view_type:n.SIMPLE,title:"",icon:"common/icon_002",normal_paragraph:"label.226",small_paragraph:"",link:"txid: ",has_custom_data:!1,button_enabled:!0},CANNOT_ATTACK_STRONGHOLD:{id:"CANNOT_ATTACK_STRONGHOLD",view_type:n.SIMPLE,title:"",icon:"world/icon_stronghold",normal_paragraph:"label.227",small_paragraph:"",link:void 0,has_custom_data:!1,button_enabled:!0},CITY_MARKET_FULL:{id:"CITY_MARKET_FULL",view_type:n.SIMPLE,icon:"world/map_city",title:"",normal_paragraph:"label.228",small_paragraph:"",link:void 0,has_custom_data:!1,button_enabled:!0},STRONGHOLD_IS_IMMUNE:{id:"STRONGHOLD_IS_IMMUNE",view_type:n.SIMPLE,title:"",icon:"world/icon_stronghold",normal_paragraph:"label.208",small_paragraph:"",link:void 0,has_custom_data:!1,button_enabled:!0},FAIL_UNEXPTECTED_BLOCKCHAIN_ISSUE:{id:"FAIL_UNEXPTECTED_BLOCKCHAIN_ISSUE",view_type:n.SIMPLE,icon:"common/icon_002",title:"",normal_paragraph:"label.230",small_paragraph:"",link:"txid: ",has_custom_data:!1,button_enabled:!0},CANNOT_ATTACK_CITY:{id:"CANNOT_ATTACK_CITY",view_type:n.ICONCENTRIC,title:"",icon:"world/map_city",normal_paragraph:"label.231",small_paragraph:"",link:void 0,has_custom_data:!1,button_enabled:!0},CITY_IS_IMMUNE:{id:"CITY_IS_IMMUNE",view_type:n.ICONCENTRIC,title:"",icon:"world/map_city",normal_paragraph:"label.237",small_paragraph:"",link:void 0,has_custom_data:!1,button_enabled:!0},NODE_NOT_SYNCED_YET:{id:"NODE_NOT_SYNCED_YET",view_type:n.SIMPLE,icon:"common/icon_002",title:"",normal_paragraph:"label.238",small_paragraph:"label.239",link:void 0,has_custom_data:!1,button_enabled:!0}},this.VIEW_TYPE=n},isValidPopupType:function(t){return void 0!=this.TYPE[t]},getPopupParams:function(t){return this.TYPE[t]}});cc._RF.pop()},{}],RankInfo:[function(t,e,i){"use strict";cc._RF.push(e,"f72c1QAsG1CioGR4dKDSEkn","RankInfo"),cc.Class({extends:cc.Component,properties:{prizLogo:{default:null,type:cc.Node},prizeValue:{default:null,type:cc.Label},rankValue:{default:null,type:cc.Label},nameValue:{default:null,type:cc.Label},totalValue:{default:null,type:cc.Label},itemPic:{default:null,type:cc.Sprite}},InitRankInfoData:function(t){this.prizeValue.string=t.price,this.rankValue.string=t.rank,this.nameValue.string=cc.zz.TableDataManage.Language.getLangueForID(t.first_name)+" "+cc.zz.TableDataManage.Language.getLangueForID(t.last_name),this.totalValue.string=t.total},InitCofferInfoData:function(t){this.nameValue.string=cc.zz.TableDataManage.Language.getLangueForID(t.first_name)+" "+cc.zz.TableDataManage.Language.getLangueForID(t.last_name),this.prizeValue.string=t.payed_coffer,this.totalValue.string=cc.zz.TableDataManage.CityData.getPathID(t.city_id).name},InitDropInfoData:function(t){this.itemPic.spriteFrame=cc.loader.getRes("ItemIcons/"+cc.zz.TableDataManage.ItemData.getItemIconForID(t.item_id),cc.SpriteFrame),void 0==t.first_name?(this.nameValue.string=cc.zz.TableDataManage.Language.getLangueForID("label.235"),this.nameValue.node.color=new cc.Color(255,0,0),this.itemPic.node.color=new cc.Color(104,92,92)):(this.nameValue.string=cc.zz.TableDataManage.Language.getLangueForID(t.first_name)+" "+cc.zz.TableDataManage.Language.getLangueForID(t.last_name),this.nameValue.node.color=new cc.Color(255,255,255),this.itemPic.node.color=new cc.Color(255,255,255)),this.prizeValue.node.active=!1,this.totalValue.string=cc.zz.utils.showTime(cc.zz.utils.realTime-t.created_time)}}),cc._RF.pop()},{}],ReferlinkView:[function(t,e,i){"use strict";cc._RF.push(e,"8da3a+KBmNDap5K+v3Imfsp","ReferlinkView"),cc.Class({extends:cc.Component,properties:{linkLabel:{default:null,type:cc.Label},earnLabel:{default:null,type:cc.Label},referCountLabel:{default:null,type:cc.Label}},onLoad:function(){},initReferlinkViewData:function(t){this.linkLabel.string=this.getLinkText(),null!=t.earnings?this.earnLabel.string=t.earnings:this.earnLabel.string="0",this.referCountLabel.string=t.invited},getLinkText:function(){return window.document.location.href+"?referalLink="+cc.zz.LoginData.getWallet(!1)+"-"+cc.zz.LoginData.getHeroID()},copyClipboard:function(){navigator.permissions.query({name:"clipboard-write"}).then(function(t){"granted"!=t.state&&"prompt"!=t.state||!navigator.clipboard?cc.error("Copy to clipboard is not allowed by your navigator"):navigator.clipboard.writeText(window.document.location.href+"?referalLink="+cc.zz.LoginData.getWallet(!1)+"-"+cc.zz.LoginData.getHeroID())})}}),cc._RF.pop()},{}],ResultView:[function(t,e,i){"use strict";cc._RF.push(e,"92f81ea+TxG74zkBvWe2pdh","ResultView");t("EventType");cc.Class({extends:cc.Component,properties:{card_attacker:{default:null,type:cc.Node},card_defender:{default:null,type:cc.Node},attackerTroops1Before:{default:null,type:cc.Label},attackerTroopsTotalAfter:{default:null,type:cc.Label},defenderTroops1Before:{default:null,type:cc.Label},defenderTroopsTotalAfter:{default:null,type:cc.Label},expItemNode:{default:null,type:cc.Node},expItem:{default:null,type:cc.Sprite},expLabel:{default:null,type:cc.Label}},start:function(){},updatePanel:function(t,e,i,n,a,o,c,s){this.expItemNode.active=3==t,this.expLabel.string=1==e?"EXP + 2":"EXP + 1",this.attackerTroops1Before.string=i-n,this.attackerTroopsTotalAfter.string=n,this.defenderTroops1Before.string=a-o,this.defenderTroopsTotalAfter.string=o,this.card_attacker.getComponent("herocard").initHeroCard(c),this.card_defender.getComponent("herocard").initHeroCard(s)},updateExpItem:function(t){this.ItemData=t,this.expItem.spriteFrame=cc.loader.getRes("ItemIcons/"+t.icon,cc.SpriteFrame)}}),cc._RF.pop()},{EventType:"EventType"}],ScriptableLabel:[function(t,e,i){"use strict";cc._RF.push(e,"f1149hj5+1FIJ1x5mMLflve","ScriptableLabel"),cc.Class({extends:cc.Component,properties:{},start:function(){var t=this.getComponent(cc.Label);t&&(cc.zz.LoginData.isNeoBlockchain()?t.string="BUY GAS\n HERE":t.string="BUY TRX\n HERE")}}),cc._RF.pop()},{}],SellBag:[function(t,e,i){"use strict";cc._RF.push(e,"30184NtQGdHhYfmpA3CyPIG","SellBag"),cc.Class({extends:cc.Component,properties:{sellBag:{default:null,type:cc.Node},sellitem:{default:null,type:cc.Prefab},itemsPerPage:32,itemSize:78,bagSpacing:4,scrollToPrevButton:{default:null,type:cc.Node},scrollToNextButton:{default:null,type:cc.Node},sellPage:{default:null,type:cc.PageView},cancel:{default:null,type:cc.Node},confirm:{default:null,type:cc.Node}},start:function(){this.selectedItems=[]},showHeroBag:function(t,e){void 0!=e&&(this.afterSelection=e),this.sellPage.removeAllPages(),this.items=[],t||(t=cc.zz.LoginData.getBagData());var i=t.length;if(i>0){for(var n=Math.ceil(i/this.itemsPerPage),a=0;a<n;++a){var o=new cc.Node;o.setContentSize(cc.size(660,340)),o.name="page_"+n;var c=o.addComponent(cc.Layout);c.type=cc.Layout.Type.GRID,c.spacingX=this.bagSpacing,c.spacingY=this.bagSpacing,this.sellPage.addPage(o);var s=this.itemsPerPage;a==n-1?s=i:a<n-1&&(s=this.itemsPerPage*(a+1));for(var r=this.itemsPerPage*a;r<s;++r){var l=cc.instantiate(this.sellitem);l.setContentSize(cc.size(this.itemSize,this.itemSize)),l.getComponentInChildren(cc.Button).node.on(cc.Node.EventType.MOUSE_UP,this.selectedItem,this),l.getComponent("ItemScripts").initData(t[r],this.type),o.addChild(l),this.items.push(l)}}this.sellPage.scrollToPage(0,.3),this.toggleScrollButtons()}},selectedItem:function(t){var e=t.currentTarget.parent.getComponent("ItemScripts");t.stopPropagation();var i=parseInt(e.itemdata.id),n=this.selectedItems.indexOf(i);n>-1?this.selectedItems.splice(n,1):this.selectedItems.push(i),console.log(this.selectedItems)},onConfirm:function(){this.selectedItems&&this.selectedItems.length&&this.afterSelection?(console.log("Confirmed, so return"),this.afterSelection(this.selectedItems)):console.log("Missed some vars to close the bag")},settype:function(t){this.type=t,this.showHeroBag(),2==t?(this.cancel.active=!1,this.confirm.active=!1):(this.cancel.active=!0,this.confirm.active=!0)},scrollToPrevPage:function(){var t=this.sellPage.getCurrentPageIndex(),e=t;t>0&&(e=t-1),this.sellPage.scrollToPage(e,.3)},scrollToNextPage:function(){var t=this.sellPage.getPages().length-1,e=this.sellPage.getCurrentPageIndex(),i=e;e<t&&(i=e+1),this.sellPage.scrollToPage(i,.3)},toggleScrollButtons:function(){this.sellPage.getPages().length>1?(this.scrollToNextButton.active=!0,this.scrollToPrevButton.active=!0):(this.scrollToNextButton.active=!1,this.scrollToPrevButton.active=!1)},onEnable:function(){},onDisable:function(){if(this.items&&this.items.length)for(var t=0;t<this.items.length;t++){this.items[t].getComponentInChildren(cc.Button).node.off(cc.Node.EventType.MOUSE_UP,this.selectedItem,this)}this.selectedItems=[],this.sellPage.removeAllPages()}}),cc._RF.pop()},{}],SellView:[function(t,e,i){"use strict";cc._RF.push(e,"d5bc58EFV9G16KrXxro9k8m","SellView");var n=t("EventType"),a=[0,"intelligence","leadership","speed","defense","strength"],o=[8,12,24];cc.Class({extends:cc.Component,properties:{Chosetime:{default:null,type:cc.Node},quality:{default:null,type:cc.Sprite},itemName:{default:null,type:cc.Label},itemIcon:{default:null,type:cc.Sprite},itemValue:{default:null,type:cc.Label},textinput:{default:null,type:cc.EditBox},itemdesc:{default:null,type:cc.Label},itemlv:{default:null,type:cc.Label},total:{default:null,type:cc.Label},cityName:{default:null,type:cc.Label},timeBox:{default:null,type:cc.Node},timelabel:{default:null,type:cc.Label},currencyLabel:{default:null,type:cc.Label}},onLoad:function(){this.time=2,this.price=0,this.total.string=0},initData:function(t){this.data=t,this.itemIcon.spriteFrame=cc.loader.getRes("ItemIcons/"+t.icon,cc.SpriteFrame),void 0==this.itemIcon.spriteFrame&&cc.loader.loadRes("ItemIcons/"+t.icon,cc.SpriteFrame,function(t,e){this.itemIcon.spriteFrame=t?cc.loader.getRes("common/icon_Qmark",cc.SpriteFrame):e}.bind(this)),this.itemName.string=cc.zz.TableDataManage.Language.getLangueForID(t.name),this.itemdesc.string=cc.zz.TableDataManage.Language.getLangueForID(t.description),this.itemValue.string=a[t.stat_type]+"+"+t.stat_value,this.itemlv.string="Lvl "+t.level_value;var e=cc.zz.LoginData.getCity();void 0!=e?(this.cityName.string=e.name,this.cityName.node.color=new cc.Color(31,9,9),this.data.city_id=e.id):this.data.city_id=0},showshlef:function(){this.data.time=o[this.time],this.data.price=parseFloat(this.price),this.data.fee=cc.zz.LoginData.getMarketFee(this.time),this.data.total=this.data.fee,this.currencyLabel.string=cc.zz.LoginData.getCurrency(),cc.zz.fire.fire(n.SHOW_SHELF_VIEW,this.data)},showtimeBox:function(){this.timeBox.active=!0},chosetimeBox:function(t,e){this.time=e,this.total.string=cc.zz.LoginData.getMarketFee(this.time),this.timelabel.string=o[this.time]+"h",this.timeBox.active=!1},showPirce:function(t){this.price=t,this.total.string=cc.zz.LoginData.getMarketFee(this.time)},onEnable:function(){this.time=2,this.total.string=0,this.timelabel.string=o[this.time]+"h",this.timeBox.active=!1,this.textinput.string=0}}),cc._RF.pop()},{EventType:"EventType"}],SettingView:[function(t,e,i){"use strict";cc._RF.push(e,"c1f2enQglZGc7al7PJpTAhR","SettingView");var n=t("LanguageData");cc.Class({extends:cc.Component,properties:{music:{default:null,type:cc.Toggle},sfx:{default:null,type:cc.Toggle},Chinese:{default:null,type:cc.Toggle},English:{default:null,type:cc.Toggle}},start:function(){cc.zz.SoundManage.music?this.music.check():this.music.uncheck(),cc.zz.SoundManage.sfx?this.sfx.check():this.sfx.uncheck();var t=cc.sys.localStorage.getItem("lang");null==t||"en"==t?(this.English.check(),this.Chinese.uncheck()):(this.English.uncheck(),this.Chinese.check())},musicfuc:function(t){cc.zz.SoundManage.stopAllMusics(t.isChecked)},sfxfuc:function(t){cc.zz.SoundManage.stopAllEffects(t.isChecked)},Chinesefuc:function(t){if(t.isChecked){cc.sys.localStorage.setItem("lang","cn");n.init("cn"),cc.zz.LoginData.setLanguage("cn"),n.updateSceneRenderers()}},Englishfuc:function(t){if(t.isChecked){cc.sys.localStorage.setItem("lang","en");n.init("en"),cc.zz.LoginData.setLanguage("en"),n.updateSceneRenderers()}},goLink:function(){cc.sys.openURL("https://www.blocklords.io/support")},copyClipboard:function(){navigator.permissions.query({name:"clipboard-write"}).then(function(t){"granted"!=t.state&&"prompt"!=t.state||!navigator.clipboard?cc.error("Copy to clipboard is not allowed by your navigator"):navigator.clipboard.writeText(window.document.location.href+"/?referalLink="+cc.zz.LoginData.getWallet(!1)+"-"+cc.zz.LoginData.getHeroID())})}}),cc._RF.pop()},{LanguageData:"LanguageData"}],ShelfView:[function(t,e,i){"use strict";cc._RF.push(e,"d9d68MdeWZD3KTX2scZA0gI","ShelfView");t("EventType");cc.Class({extends:cc.Component,properties:{sell:{default:null,type:cc.Label},fee:{default:null,type:cc.Label},total:{default:null,type:cc.Label}},start:function(){},initData:function(t){this.data=t,this.sell.string=t.price+cc.zz.LoginData.getCurrency({putSpacePrefix:!0}),this.fee.string=t.fee+cc.zz.LoginData.getCurrency({putSpacePrefix:!0}),this.total.string=t.total+cc.zz.LoginData.getCurrency({putSpacePrefix:!0})},GoodsonShelves:function(){cc.zz.BlockchainInteractor.addMarketItem(this.data)}}),cc._RF.pop()},{EventType:"EventType"}],ShowWindow:[function(t,e,i){"use strict";cc._RF.push(e,"2cf4biegKFKw7QP/MT/sMOQ","ShowWindow"),cc.Class({extends:cc.Component,properties:{speed:.3,type:{default:0,type:cc.Integer},bg:{default:null,type:cc.Sprite}},onLoad:function(){},start:function(){},show:function(t){this.bg&&(this.bg.node.active=!0),this.node.active=!0,this.node.scale=0,this.node.setPosition(cc.v2(0,0)),this.node.runAction(cc.sequence(cc.scaleTo(this.speed,1.2),cc.scaleTo(.05,1).easing(cc.easeBounceIn()))),this.isplay&&cc.zz.SoundManage.onPlayEffect("ui_slide_in(open)",!1)},hide:function(){this.node.runAction(cc.sequence(cc.scaleTo(this.speed,1e-5),cc.callFunc(function(){this.node.active=!1}.bind(this)))),this.bg&&(this.bg.node.active=!1),this.isplay&&cc.zz.SoundManage.onPlayEffect("ui_slide_out(close)",!1)},showDirectly:function(){this.bg&&(this.bg.node.active=!0),this.node.active=!0,this.node.scale=1,this.node.setPosition(cc.v2(0,0)),this.isplay&&cc.zz.SoundManage.onPlayEffect("ui_slide_in(open)",!1)},closeDirectly:function(){this.node.active=!1,this.bg&&(this.bg.node.active=!1),this.isplay&&cc.zz.SoundManage.onPlayEffect("ui_slide_out(close)",!1)}}),cc._RF.pop()},{}],SoundManage:[function(t,e,i){"use strict";cc._RF.push(e,"114ba1ShlRFE4c/1YPmBLdf","SoundManage"),cc.Class({extends:cc.Component,properties:{music:!0,sfx:!0},start:function(){},ctor:function(){var t=cc.sys.localStorage.getItem("music"),e=cc.sys.localStorage.getItem("sfx");this.music=null==t||"true"==t,this.sfx=null==e||"true"==e,console.log("Showing the music:"),console.log(t)},settingInfo:function(t,e){this.music=t,this.sfx=e},onPlayEffect:function(t){this.sfx&&(this.soundeffect=cc.loader.getRes("soundeffect/"+t,cc.AudioClip),cc.audioEngine.playEffect(this.soundeffect,!1))},onPlaySound:function(t,e,i){this.sfx&&(this.sound=cc.loader.getRes("soundeffect/"+t,cc.AudioClip),cc.audioEngine.play(this.sound,e,i))},basicclickSound:function(){this.sfx&&(this.BtnEffect=cc.loader.getRes("soundeffect/basic_button_click",cc.AudioClip),cc.audioEngine.playEffect(this.BtnEffect,!1))},onPlayWorldBgSound:function(){this.music&&(cc.audioEngine.stopMusic(),this.bgsound=cc.loader.getRes("soundeffect/BL-BG-Piece-2-Master_1",cc.AudioClip),cc.audioEngine.playMusic(this.bgsound,!0,.5))},onPlayFightBgSound:function(){this.music&&(cc.audioEngine.stopMusic(),this.bgsound=cc.loader.getRes("soundeffect/BL-Battle_Loop_Final",cc.AudioClip),cc.audioEngine.playMusic(this.bgsound,!0,.5))},onPlayFightSound:function(){this.sfx&&(cc.audioEngine.stopMusic(),this.bgsound=cc.loader.getRes("soundeffect/BL-BG-Piece-6-Master_1",cc.AudioClip),cc.audioEngine.playMusic(this.bgsound,!0,.5))},onPlayMarketBgSound:function(){this.music&&(cc.audioEngine.stopMusic(),this.bgsound=cc.loader.getRes("soundeffect/BL-BG-Piece-4-Master_1",cc.AudioClip),cc.audioEngine.playMusic(this.bgsound,!0,.5))},onPlayHeroBgSound:function(){this.music&&(cc.audioEngine.stopMusic(),this.bgsound=cc.loader.getRes("soundeffect/BL-BG-Piece-5-Master_1",cc.AudioClip),cc.audioEngine.playMusic(this.bgsound,!0,.5))},onPlayMainBgSound:function(){this.music&&(cc.audioEngine.stopMusic(),this.bgsound=cc.loader.getRes("soundeffect/BL-BG-Piece-8-Master_1",cc.AudioClip),cc.audioEngine.playMusic(this.bgsound,!0,.5))},onPlayCityBgSound:function(){this.music&&(cc.audioEngine.stopMusic(),this.bgsound=cc.loader.getRes("soundeffect/market_ambience_loop",cc.AudioClip),cc.audioEngine.playEffect(this.bgsound,!0,.5))},onPlayBgSound:function(){if(!cc.audioEngine.isMusicPlaying()&&this.music){var t=Math.ceil(7*Math.random())+1;this.bgsound=cc.loader.getRes("soundeffect/BL-BG-Piece-"+t+"-Master_1",cc.AudioClip),cc.audioEngine.playMusic(this.bgsound,!1,.5)}},stopAllEffects:function(t){this.sfx=t,cc.sys.localStorage.setItem("sfx",t)},stopAllMusics:function(t){this.music=t,cc.sys.localStorage.setItem("music",t),this.music?this.onPlayMainBgSound():cc.audioEngine.stopMusic()}}),cc._RF.pop()},{}],SpriteFrameSet:[function(t,e,i){"use strict";cc._RF.push(e,"97019Q80jpE2Yfz4zbuCZBq","SpriteFrameSet");var n=cc.Class({name:"SpriteFrameSet",properties:{language:"",spriteFrame:cc.SpriteFrame}});e.exports=n,cc._RF.pop()},{}],StrongholdData:[function(t,e,i){"use strict";cc._RF.push(e,"04468wlBAdKC70fAiXzzxsX","StrongholdData"),cc.Class({extends:cc.Component,properties:{},ctor:function(){this.stronghold={}},initData:function(t){this.stronghold=t},getStrongList:function(){return this.stronghold},getPathID:function(t){if(this.stronghold[t])return this.stronghold[t]}}),cc._RF.pop()},{}],Stronghold:[function(t,e,i){"use strict";cc._RF.push(e,"88812JE3hpEUZEExQfx6l8l","Stronghold");var n=t("EventType");cc.Class({extends:cc.Component,properties:{owner:{default:null,type:cc.Label},redFlag:{default:null,type:cc.Sprite},blackFlag:{default:null,type:cc.Sprite},blueFlag:{default:null,type:cc.Sprite},timeLabel:{default:null,type:cc.Label},timerIcon:{default:null,type:cc.Sprite},immuneIcon:{default:null,type:cc.Sprite},redTimerBack:{default:null,type:cc.Sprite},blueTimerBack:{default:null,type:cc.Sprite}},initData:function(t){this.data=t;var e=t.coordinate.split(",");this.node.setPosition(e[0],e[1])},start:function(){},onClickBand:function(){cc.zz.fire.fire(n.SHOW_HOLDPOPUP,this.data)},occupation:function(t){parseInt(t.is_npc)>0?this.showFlag("black"):t.lord_id==t.current_hero_id?this.showFlag("blue"):this.showFlag("red"),this.showTimer(t.occupation_time),this.schedule(this.CountDown,1)},updateInfo:function(t){if(parseInt(t.is_npc)>0?this.showFlag("black"):void 0!==cc.zz.LoginData.getHeroID()&&t.lord_id==cc.zz.LoginData.getHeroID()?this.showFlag("blue"):this.showFlag("red"),this.owner.node.active=!0,this.owner.string=cc.zz.TableDataManage.Language.getLangueForID(t.first_name)+" "+cc.zz.TableDataManage.Language.getLangueForID(t.last_name),void 0!=t.is_conquered&&parseInt(t.is_conquered)>0&&parseInt(t.is_npc)<1){var e=new Date(1e3*t.created_time);e.setHours(e.getHours()+24),(new Date).getTime()<=e?(console.log("Stronghold with id stronghold "+t.id+" lord: "+t.lord_id),this.showTimer(t.created_time),this.schedule(this.CountDown,1),this.timerIcon.node.active=!1,this.immuneIcon.node.active=!0,this.redTimerBack.node.active=!1,this.blueTimerBack.node.active=!0):(this.showTimer(t.created_time),this.schedule(this.CountDown,1),this.timerIcon.node.active=!0,this.immuneIcon.node.active=!1,this.redTimerBack.node.active=!0,this.blueTimerBack.node.active=!1)}else this.showTimer(t.created_time),this.schedule(this.CountDown,1),this.timerIcon.node.active=!0,this.immuneIcon.node.active=!1,this.redTimerBack.node.active=!0,this.blueTimerBack.node.active=!1},showTimer:function(t){this.timeNum=cc.zz.utils.realTime-t,this.timeLabel.node.active=!0,this.timeLabel.string=cc.zz.utils.showTime(this.timeNum)},CountUp:function(){this.timeNum--,this.timeLabel.string=cc.zz.utils.showTime(this.timeNum),this.timeNum<1&&(this.showTimer(this.data.created_time),this.unschedule(this.CountUp),this.schedule(this.CountDown,1),this.timerIcon.node.active=!0,this.immuneIcon.node.active=!1)},CountDown:function(){this.timeNum++,this.timeLabel.string=cc.zz.utils.showTime(this.timeNum),this.timeNum>86400&&1==this.immuneIcon.node.active&&(this.timerIcon.node.active=!0,this.immuneIcon.node.active=!1,this.redTimerBack.node.active=!0,this.blueTimerBack.node.active=!1)},showFlag:function(t){this.redFlag.node.active="red"==t,this.blackFlag.node.active="black"==t,this.blueFlag.node.active="blue"==t}}),cc._RF.pop()},{EventType:"EventType"}],TableDataManage:[function(t,e,i){"use strict";cc._RF.push(e,"7f891FRJe5AXLU23pW1Irdj","TableDataManage"),cc.Class({ctor:function(){this.jsonArr={};var e=t("HeroData");this.HeroData=new e;var i=t("ItemData");this.ItemData=new i;var n=t("CityData");this.CityData=new n;var a=t("BanditData");this.BanditData=new a;var o=t("Language");this.Language=new o;var c=t("StrongholdData");this.StrongholdData=new c;var s=t("NpcData");this.NpcData=new s},initTableList:function(t){for(var e in t)this.jsonArr[t[e].name]=t[e].json;this.HeroData.initData(this.jsonArr.hero_stats),this.ItemData.initData(this.jsonArr.item_equipments),this.CityData.initData(this.jsonArr.city_city),this.BanditData.initData(this.jsonArr.bandit_bandit),this.StrongholdData.initData(this.jsonArr.stronghold_stronghold),cc.zz.LoginData.isNeoBlockchain()?this.Language.initData(this.jsonArr.language_first_name,this.jsonArr.language_last_name,this.jsonArr.language_item_name,this.jsonArr.language_item_des,this.jsonArr.language_neo_ui):this.Language.initData(this.jsonArr.language_first_name,this.jsonArr.language_last_name,this.jsonArr.language_item_name,this.jsonArr.language_item_des,this.jsonArr.language_tron_ui),this.NpcData.initData(this.jsonArr.npc_npc)}}),cc._RF.pop()},{BanditData:"BanditData",CityData:"CityData",HeroData:"HeroData",ItemData:"ItemData",Language:"Language",NpcData:"NpcData",StrongholdData:"StrongholdData"}],TipManage:[function(t,e,i){"use strict";cc._RF.push(e,"e50ba+spulDH7uIFtrz7Wuh","TipManage");var n=t("EventType");cc.Class({extends:cc.Component,properties:{tipWindow:{default:null,type:cc.Node},troopsTipWindow:{default:null,type:cc.Node},explanationTipWindow:{default:null,type:cc.Node}},onLoad:function(){cc.zz.fire.on(n.ITEM_TIP_SHOW,this.ItemTipshow.bind(this)),cc.zz.fire.on(n.ITEM_TIP_HIDE,this.ItemTiphide.bind(this)),cc.zz.fire.on(n.TROOPS_TIP_SHOW,this.TroopsTipshow.bind(this)),cc.zz.fire.on(n.TROOPS_TIP_HIDE,this.TroopsTiphide.bind(this)),cc.zz.fire.on(n.EXPLANATION_TIP_SHOW,this.ExplanationTipshow.bind(this)),cc.zz.fire.on(n.EXPLANATION_TIP_HIDE,this.ExplanationTiphide.bind(this))},ItemTipshow:function(t){var e=this.node.convertToNodeSpaceAR(t.pos);e.y=Math.max(-250,e.y),this.tipWindow.active=!0,this.tipWindow.getComponent("ItemTipView").initData(t.data),this.tipWindow.setPosition(e.x,e.y)},ItemTiphide:function(){this.tipWindow.active=!1},TroopsTipshow:function(t){var e=this.node.convertToNodeSpaceAR(t.pos);e.y=Math.max(-250,e.y),this.troopsTipWindow.active=!0,this.troopsTipWindow.getComponent("TroopsTipView").initData(t.data),this.troopsTipWindow.setPosition(e.x,e.y)},TroopsTiphide:function(){this.troopsTipWindow.active=!1,this.troopsTipWindow.getComponent("TroopsTipView").clearTip()},ExplanationTipshow:function(t){var e=this.node.convertToNodeSpaceAR(t.pos);e.y=Math.max(-250,e.y),this.explanationTipWindow.getComponent("ExplanationTipView").initData(t.data),this.explanationTipWindow.parent=this.node.parent,this.explanationTipWindow.setPosition(e.x,e.y),this.explanationTipWindow.active=!0},ExplanationTiphide:function(){this.explanationTipWindow.active=!1}}),cc._RF.pop()},{EventType:"EventType"}],TopMenu:[function(t,e,i){"use strict";cc._RF.push(e,"7cca8ZumZRB1ah3ELA2eLF0","TopMenu");t("EventType");cc.Class({extends:cc.Component,properties:{leaderboardTimer:{default:null,type:cc.Label},cityTargetingTimer:{default:null,type:cc.Label}},countDownLeaderboardTime:function(){this.leaderboardTimeNum--,this.leaderboardTimer.string=cc.zz.utils.showTime(this.leaderboardTimeNum),this.leaderboardTimeNum<=0&&(this.unschedule(this.countDownLeaderboardTime),this.leaderboardTimer.active=!1)},countDownCityTargetingTime:function(){this.cityTargetingTimeNum--,this.cityTargetingTimer.string=cc.zz.utils.showTime(this.cityTargetingTimeNum),this.cityTargetingTimeNum<=0&&(this.unschedule(this.countDownCityTargetingTime),this.cityTargetingTimer.active=!1,cc.zz.net.send(6007,[]))},onLoad:function(){this.leaderboardTimer.node.active=!1,this.cityTargetingTimer.node.active=!1,cc.zz.net.addHandler(6007,this.onTimerRecieve.bind(this))},onEnable:function(){cc.zz.net.send(6007,[])},onDisable:function(){this.unschedule(this.countDownLeaderboardTime,1),this.unschedule(this.countDownCityTargetingTime,1)},onTimerRecieve:function(t){this.onLeaderboardTimer(t),this.onCityTargetingTimer(t)},onLeaderboardTimer:function(t){void 0!=t.leaderboard_time?(this.leaderboardTimeNum=t.leaderboard_time.end_time-cc.zz.utils.realTime,this.leaderboardTimeNum>0&&(this.leaderboardTimer.node.active=!0,this.leaderboardTimer.string=cc.zz.utils.showTime(this.leaderboardTimeNum),this.schedule(this.countDownLeaderboardTime,1))):this.leaderboardTimer.node.active=!1},onCityTargetingTimer:function(t){void 0!=t.city_targeting_time?(this.cityTargetingTimeNum=t.city_targeting_time.end_time-cc.zz.utils.realTime,this.cityTargetingTimeNum>0&&(this.cityTargetingTimer.node.active=!0,this.cityTargetingTimer.string=cc.zz.utils.showTime(this.cityTargetingTimeNum),this.schedule(this.countDownCityTargetingTime,1))):this.cityTargetingTimer.node.active=!1}}),cc._RF.pop()},{EventType:"EventType"}],TronInteractor:[function(t,e,i){"use strict";cc._RF.push(e,"3ff8bSEPABP3arYzXMXsWqj","TronInteractor");var n=t("EventType");cc.Class({properties:{},onDestroy:function(){void 0!=this.currentBlockTimer&&clearInterval(this.currentBlockTimer)},isValidWalletAddress:function(t){return t==tronWeb.defaultAddress.hex},isValidWalletNetwork:function(t){return cc.zz.LoginData.blockchainData[cc.zz.LoginData.getBlockchainType()][t].fullNode==tronWeb.fullNode.host},addMarketItem:function(t){if(cc.zz.LoginData.isTronBlockchain()){cc.zz.fire.fire(n.POP_UP,cc.zz.Popup.TYPE.LOADING_WALLET_CONFIRMATION.id,{});var e=this,i=function(t,e,i,a){void 0!==a&&(console.error("Tx confirm error:"),console.error(a)),cc.zz.LoginData.addBagItem(e),void 0!=i.id&&cc.zz.fire.fire(n.POP_UP,i.id,i.params)},a=function(t,i,a){e.shelf=i,cc.zz.fire.fire(n.POP_UP,cc.zz.Popup.TYPE.SUCCESS_TX_CONFIRMED.id,{link:t}),cc.zz.WordMapData.citys[e.shelf.city_id-1].city_coffer+=e.shelf.fee/2};cc.zz.LoginData.getContract().addMarketItem(parseInt(t.id),parseFloat(tronWeb.toSun(t.price)),3600*parseInt(t.time),t.city_id).send({callValue:tronWeb.toSun(t.fee)}).then(function(n){cc.zz.LoginData.removeBagItem(t),e.waitConfirmation(n,t,a,i)}).catch(function(e){i(0,t,{id:cc.zz.Popup.TYPE.FAIL_UNEXPTECTED_BLOCKCHAIN_ISSUE.id,params:{}},e)})}},buyMarketItem:function(t){if(cc.zz.LoginData.isTronBlockchain()){cc.zz.fire.fire(n.POP_UP,cc.zz.Popup.TYPE.LOADING_WALLET_CONFIRMATION.id,{});var e=this,i=function(t,e,i,a){void 0!==a&&(console.error("Tx confirm error:"),console.error(a)),void 0!=i.id&&cc.zz.fire.fire(n.POP_UP,i.id,i.params)},a=function(t,i,a){e.shelf=i,cc.zz.fire.fire(n.POP_UP,cc.zz.Popup.TYPE.SUCCESS_TX_CONFIRMED.id,{link:t}),cc.zz.LoginData.addBagItem(i)};cc.zz.LoginData.getContract().buyMarketItem(t.id).send({callValue:tronWeb.toSun(cc.zz.utils.ReservedDecimal(1.15*t.price,4))}).then(function(n){e.waitConfirmation(n,t,a,i)}).catch(function(t){i(0,0,{id:cc.zz.Popup.TYPE.FAIL_UNEXPTECTED_BLOCKCHAIN_ISSUE.id,params:{}},t)})}},deleteMarketItem:function(t){if(cc.zz.LoginData.isTronBlockchain()){cc.zz.fire.fire(n.POP_UP,cc.zz.Popup.TYPE.LOADING_WALLET_CONFIRMATION.id,{});var e=this,i=function(t,e,i,a){void 0!==a&&(console.error("Tx confirm error:"),console.error(a)),void 0!=i.id&&cc.zz.fire.fire(n.POP_UP,i.id,i.params)},a=function(t,i,a){e.shelf=i,cc.zz.fire.fire(n.POP_UP,cc.zz.Popup.TYPE.SUCCESS_TX_CONFIRMED.id,{link:t}),cc.zz.LoginData.addBagItem(e.shelf)};cc.zz.LoginData.getContract().deleteMarketItem(t.id).send({callValue:tronWeb.toSun(cc.zz.utils.ReservedDecimal(1.15*t.price,2))}).then(function(n){e.waitConfirmation(n,t,a,i)}).catch(function(t){i(0,0,{id:cc.zz.Popup.TYPE.FAIL_UNEXPTECTED_BLOCKCHAIN_ISSUE.id,params:{}},t)})}},addBattleLog:function(t){if(cc.zz.LoginData.isTronBlockchain()){var e=this,i=function(e,i,a,o){void 0!==o&&(console.error("Tx confirm error:"),console.error(o)),void 0!=a.id&&cc.zz.fire.fire(n.POP_UP,a.id,a.params),i.fightPanel.pageresult.active=!1,i.fightPanel.lose.active=!1,i.fightPanel.win.active=!1,t.fightPanel.Match.active=!0,i.fightPanel.cancel.node.active=!1},a=function(t,i,a){3==i.battle_type?(i.battle_id=parseInt(i.battle_id),e.getExpUpdatedItem(t,i,a)):(cc.zz.SoundManage.onPlayEffect("start_battle_click"),i.fightPanel.fight.getComponent("FightView").setResult(i.battle_result),i.fightPanel.fight.getComponent("FightView").initData(i.fightPanel.defendData),i.fightPanel.fight.active=!0,cc.zz.fire.fire(n.POP_UP,cc.zz.Popup.TYPE.SUCCESS_TX_CONFIRMED.id,{link:t}))};cc.zz.fire.fire(n.POP_UP,cc.zz.Popup.TYPE.LOADING_WALLET_CONFIRMATION.id,{}),t.fightPanel.pageresultWin.getComponent("ResultView").updatePanel(t.battle_type,t.battle_result,t.attacker_troops,t.attacker_remained,t.defender_troops,t.defender_remained,t.attackData,t.defendData),cc.zz.LoginData.getContract().addBattleLog(t.battle_id,[t.battle_result,t.battle_type],t.heroID,[t.attacker_troops,t.attacker_remained],[t.aequip_1,t.aequip_2,t.aequip_3,t.aequip_4,t.aequip_5],t.fightID,t.dheroID,[t.defender_troops,t.defender_remained],[t.dequip_1,t.dequip_2,t.dequip_3,t.dequip_4,t.dequip_5],t.signature.v,[t.signature.r,t.signature.s]).send({callValue:tronWeb.toSun(t.fee)}).then(function(n){t.fightPanel.Match.active=!1,e.waitConfirmation(n,t,a,i)}).catch(function(e){i(0,t,{id:cc.zz.Popup.TYPE.FAIL_UNEXPTECTED_BLOCKCHAIN_ISSUE.id,params:{}},e)})}},getExpUpdatedItem:function(t,e,i){if(cc.zz.LoginData.isTronBlockchain()){var a=this;this.txid=t,this.data=e,this.txData=i,setTimeout(function(){cc.zz.LoginData.getContract().getUpdatedItem(e.battle_id).call().then(function(i){0==(i=parseInt(i))?(cc.zz.SoundManage.onPlayEffect("start_battle_click"),e.fightPanel.fight.getComponent("FightView").setResult(e.fightPanel.fightData.battle_result),e.fightPanel.fight.getComponent("FightView").initData(e.fightPanel.defendData),e.fightPanel.fight.active=!0,cc.zz.fire.fire(n.POP_UP,cc.zz.Popup.TYPE.SUCCESS_TX_CONFIRMED.id,{link:t})):(cc.zz.net.addHandler(5001,a.onGetItemFromServer.bind(a)),cc.zz.net.send(5001,[i]))})},2e3)}},onGetItemFromServer:function(t){var e=this.data.fightPanel;e.pageresultWin.getComponent("ResultView").updateExpItem(t.base),cc.zz.net.removeHandler(5001),cc.zz.LoginData.getContract().getItem(parseInt(t.base.id)).call().then(function(i){t.base.stat_value_increase=parseInt(i[3])-t.base.stat_value,t.base.stat_value=parseInt(i[3]),t.base.level_value_increase=parseInt(i[4])-t.base.level_value,t.base.level_value=parseInt(i[4]),t.base.exp_increase=parseInt(i[5])-t.base.exp,t.base.exp=parseInt(i[5]),cc.zz.LoginData.changeItemExp(t.base);cc.zz.LoginData.getHeroID();cc.zz.SoundManage.onPlayEffect("start_battle_click"),e.fight.getComponent("FightView").setResult(e.fightData.battle_result),e.fight.getComponent("FightView").initData(e.defendData),e.fight.active=!0,cc.zz.fire.fire(n.POP_UP,cc.zz.Popup.TYPE.SUCCESS_TX_CONFIRMED.id,{link:this.txid})}.bind(this)).catch(function(t){console.error(t),cc.zz.fire.fire(n.POP_UP,cc.zz.Popup.TYPE.FAIL_UNEXPTECTED_BLOCKCHAIN_ISSUE.id,{})})},putHero:function(t,e){if(cc.zz.LoginData.isTronBlockchain()){cc.zz.fire.fire(n.POP_UP,cc.zz.Popup.TYPE.LOADING_WALLET_CONFIRMATION.id,{});var i=t.base,a=t.signature,o=(i.stat_leadership,t.equipments),c=tronWeb.toSun(cc.zz.LoginData.getCurrentBlockchainData().heroCreationFee),s=function(t,e,i,a){if(void 0!==a){if(void 0!==i.result&&"FAILED"==i.result){if(i.contractResult.length>0)var o=tronWeb.utils.bytes.hextoString(i.contractResult[0]);console.error("tx fail reason::"+o)}else console.error(a);clearInterval(l.interval)}cc.zz.fire.fire(n.POP_UP,cc.zz.Popup.TYPE.FAIL_UNEXPTECTED_BLOCKCHAIN_ISSUE.id,{link:t})},r=function(t,e,i){e.base.stat_leadership,e.equipments;var a=cc.zz.LoginData.getReferalLink(),o={id:"",addr:""};a&&(a=a.split("-"),o.addr=a[0],o.id=a[1]),cc.zz.fire.fire(n.POP_UP,cc.zz.Popup.TYPE.SUCCESS_TX_CONFIRMED.id,{link:t}),cc.director.preloadScene("MainScene",function(t,e){cc.zz.fire.un(n.POP_UP)}.bind(this),function(){cc.director.loadScene("MainScene"),cc.zz.LoginData.setHeroData(e)}.bind(this))},l=this;cc.zz.LoginData.getContract().putHero(cc.zz.LoginData.getHeroID(),e.id,e.addr,[i.stat_leadership,i.stat_intelligence,i.stat_strength,i.stat_speed,i.stat_defense],[parseInt(o[0]?o[0].id:0),parseInt(o[1]?o[1].id:0),parseInt(o[2]?o[2].id:0),parseInt(o[3]?o[3].id:0),parseInt(o[4]?o[4].id:0)],a.v,[a.r,a.s]).send({callValue:c}).then(function(e){l.waitConfirmation(e,t,r,s)}).catch(function(t){s(null,0,{id:cc.zz.Popup.TYPE.FAIL_UNEXPTECTED_BLOCKCHAIN_ISSUE.id,params:{}},t)})}},waitConfirmation:function(t,e,i,a){void 0!==this.interval&&null!=this.interval&&clearInterval(this.interval),cc.zz.fire.fire(n.POP_UP,cc.zz.Popup.TYPE.LOADING_TX_PENDING.id,{link:t});var o=0,c=this;c.interval=setInterval(function(){o++>120?(clearInterval(c.interval),a(t,e,{id:cc.zz.Popup.TYPE.FAIL_UNEXPTECTED_BLOCKCHAIN_ISSUE.id,params:{}},{msg:"Reached to time limit, while waited for TX confirmation"})):tronWeb.fullNode.request("wallet/gettransactioninfobyid",{value:t},"post").then(function(n){void 0===n.id?cc.log("Waiting for Blockchain confirmation of: "+n.__payload__.value):(clearInterval(c.interval),void 0!==n.result&&"FAILED"==n.result?(n.contractResult.length>0?cc.error("Error!",tronWeb.utils.bytes.hextoString(n.contractResult[0])):cc.error("Error!",n),a(t,e,{id:cc.zz.Popup.TYPE.FAIL_UNEXPTECTED_BLOCKCHAIN_ISSUE.id,params:{link:t}},"Tx was failed"),clearInterval(c.interval)):i(t,e,n))})},3e3)}});cc._RF.pop()},{EventType:"EventType"}],TroopItem:[function(t,e,i){"use strict";cc._RF.push(e,"267934cfOhG4pqZUZywnKId","TroopItem");t("EventType");cc.Class({extends:cc.Component,properties:{icon:{default:null,type:cc.Sprite},slider:cc.Slider,sliderNode:cc.Node,increaseButton:cc.Button,decreaseButton:cc.Button,progressLabel:cc.Label,troopId:0},onLoad:function(){this.sliderNode.on(cc.Node.EventType.MOUSE_UP,function(t){this.submit()},this)},onSliderUpdate:function(t){this.progress=Math.round(100*t.progress),this.progressLabel.string=this.progress+"%",this.node.emit("update",this)},onDecrease:function(){this.progress=Math.max(this.progress-1,0),this.progressLabel.string=this.progress+"%",this.node.emit("update",this),this.submit()},onIncrease:function(){this.progress=Math.min(this.progress+1,100),this.progressLabel.string=this.progress+"%",this.node.emit("update",this),this.submit()},submit:function(){this.node.emit("submit",{progress:this.progress})},getProgress:function(){return this.progress},setProgress:function(t){this.progress=Math.round(t),this.slider.progress=this.progress/100,this.progressLabel.string=this.progress+"%"},initData:function(t){this.progress=t.progress,this.setProgress(this.progress)}}),cc._RF.pop()},{EventType:"EventType"}],TroopProgressBar:[function(t,e,i){"use strict";cc._RF.push(e,"d49df1Eg39F9rSJcil4KHpM","TroopProgressBar");var n=t("EventType");cc.Class({extends:cc.Component,properties:{progressLabel:cc.Label,mask:cc.Node},onLoad:function(){this.node.on(cc.Node.EventType.MOUSE_ENTER,this.showTips.bind(this)),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this.hideTips.bind(this)),this.orginalWidth=this.mask.width},setData:function(t){this.mask.width=t.currentTroops/t.totalTroops*this.orginalWidth,this.progressLabel.string=t.currentTroops+" / "+t.totalTroops},showTips:function(){var t=this.node.convertToWorldSpace(cc.Vec2.ZERO),e=this.node.getContentSize();t.x=t.x+e.width;var i={pos:t};void 0!=this.data?i.data=this.data:void 0!=cc.zz.LoginData.getHeroData()?i.data=cc.zz.LoginData.getHeroData().troops_tip:i.data={recovery_speed:0,recovery_left:0},cc.zz.fire.fire(n.TROOPS_TIP_SHOW,i)},hideTips:function(){cc.zz.fire.fire(n.TROOPS_TIP_HIDE)}}),cc._RF.pop()},{EventType:"EventType"}],TroopsPanel:[function(t,e,i){"use strict";cc._RF.push(e,"b094aoA6GhMZ53mEcKOYX/G","TroopsPanel");var n=t("TroopItem"),a=t("TroopProgressBar");cc.Class({extends:cc.Component,properties:{troopsProgress:a,troopItems:[n]},start:function(){var t=this,e=[60,30,10];this.troopItems.forEach(function(i){i.initData({progress:e.shift()}),i.node.on("submit",function(){t.submitData()}),i.node.on("update",function(e){t.updateData(e)})})},updateData:function(t){var e=100,i=0;this.troopItems.forEach(function(n){e-=n.getProgress(),t!==n&&(i+=n.getProgress())});var n=t.getProgress();this.troopItems.forEach(function(a){if(t!==a)if(0===i)a.setProgress(Math.round(e/2));else{var o=Math.round(a.getProgress()+e*a.getProgress()/i);(n+=o)>100&&(o-=n-100),a.setProgress(o)}})},submitData:function(){var t=this.troopItems.map(function(t){return t.getProgress()});this.node.emit("submit",{data:t});var e=cc.zz.LoginData.getHeroData();e.base.infantry_proportion=t[0],e.base.cavalry_proportion=t[1],e.base.archer_proportion=t[2];var i=[cc.zz.LoginData.getHeroID()].concat(t);cc.zz.net.send(cc.zz.net.constants.HERO_SET_TROOPS_PROPORTIONS,i)},setData:function(t,e,i){this.troopsProgress.setData({currentTroops:t,totalTroops:e}),this.troopItems.forEach(function(t,e){var n=i[e];t.setProgress(n)})}}),cc._RF.pop()},{TroopItem:"TroopItem",TroopProgressBar:"TroopProgressBar"}],TroopsTimer:[function(t,e,i){"use strict";cc._RF.push(e,"7748fV320tBZ7jKpRDsZ1b9","TroopsTimer");var n=t("EventType");cc.Class({extends:cc.Component,onLoad:function(){this.node.on(cc.Node.EventType.MOUSE_ENTER,this.showTips.bind(this)),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this.hideTips.bind(this)),cc.zz.net.addHandler(4010,this.onHeroTroopsRetrieve.bind(this),!0)},showTips:function(t){var e={recovery_speed:0,recovery_left:0},i=this.node.convertToWorldSpace(cc.Vec2.ZERO),a=this.node.getContentSize();i.x=i.x+a.width/2,i.y=i.y-a.width/2;var o={};o.pos=i,void 0!=this.data?o.data=this.data:void 0!=cc.zz.LoginData.getHeroData()?o.data=cc.zz.LoginData.getHeroData().troops_tip:o.data=e,cc.zz.fire.fire(n.TROOPS_TIP_SHOW,o)},hideTips:function(t){cc.zz.fire.fire(n.TROOPS_TIP_HIDE)},onHeroTroopsRetrieve:function(t){cc.zz.LoginData._heroData.current_troops=t.current_troops,cc.zz.LoginData._heroData.troops_tip=t.troops_tip,void 0!=t.troops_tip&&void 0!=t.troops_tip.recovery_speed&&(this.data=t.troops_tip)}}),cc._RF.pop()},{EventType:"EventType"}],TroopsTipView:[function(t,e,i){"use strict";cc._RF.push(e,"02ce6g/11NDJ5IjMr8c0K5S","TroopsTipView"),cc.Class({extends:cc.Component,properties:{recoverySpeed:{default:null,type:cc.Label},leftTime:{default:null,type:cc.Label}},start:function(){},CountDown:function(){this.timeNum--,this.leftTime.string="Remaining time: "+cc.zz.utils.showTime(this.timeNum),this.timeNum<=0&&(this.unschedule(this.CountDown),this.leftTime.active=!1)},initData:function(t){var e=parseInt(t.recovery_speed+"")+" / min";this.recoverySpeed.string=e,this.timeNum=t.recovery_left,this.timeNum>0?(this.leftTime.string="Remaining time: "+cc.zz.utils.showTime(this.timeNum),this.schedule(this.CountDown,1)):this.leftTime.string="Remaining time: 0"},clearTip:function(){this.unschedule(this.CountDown)}}),cc._RF.pop()},{}],Troops:[function(t,e,i){"use strict";cc._RF.push(e,"17b3fkDwRZN2oCt5pouQCMS","Troops"),cc.Class({extends:cc.Component,properties:{},start:function(){},setData:function(){},moveTo:function(){},ReleaseSkills:function(){},attack:function(){},death:function(){}}),cc._RF.pop()},{}],Utils:[function(t,e,i){"use strict";cc._RF.push(e,"4610aq6yxtDxKJ3IFAsGHQz","Utils"),cc.Class({extends:cc.Component,properties:{realTime:{set:function(t){this._svrTime=parseFloat(t);var e=Math.floor((new Date).valueOf()/1e3);this._deltaTime=e-this._svrTime},get:function(){return Math.floor((new Date).valueOf()/1e3)-this._deltaTime}}},ctor:function(){this._svrTime=0,this._deltaTime=0},showTime:function(t){var e=Math.floor(t/3600),i=Math.floor(t%3600/60),n=Math.floor(t%60),a="";return e>0&&(a=a+e+"h"),i>0&&(a=a+i+"m"),a=a+n+"s"},ReservedDecimal:function(t,e){return parseInt(t*Math.pow(10,e)+.5,10)/Math.pow(10,e)},transformLan:function(t){return"zh_CN"===t?"cn":"en"},addClickEvent:function(t,e,i,n){var a=new cc.Component.EventHandler;a.target=e,a.component=i,a.handler=n,t.getComponent(cc.Button).clickEvents.push(a)}}),cc._RF.pop()},{}],ViewPanel:[function(t,e,i){"use strict";cc._RF.push(e,"7cad45BLBZPTpNTx32rEifs","ViewPanel");var n=t("EventType");cc.Class({extends:cc.Component,properties:{buyview:{default:null,type:cc.Node},Congratulations:{default:null,type:cc.Node},onRemoveView:{default:null,type:cc.Node},sellView:{default:null,type:cc.Node},ShelfView:{default:null,type:cc.Node},bagView:{default:null,type:cc.Node},businessMan:{default:null,type:cc.Node},businessView:{default:null,type:cc.Node},settingView:{default:null,type:cc.Node},leaderboardView:{default:null,type:cc.Node},cofferLeaderView:{default:null,type:cc.Node},cityTargetsView:{default:null,type:cc.Node},itemdropLeaderView:{default:null,type:cc.Node},referlinkView:{default:null,type:cc.Node},armoryBoard:{default:null,type:cc.Node}},onLoad:function(){cc.zz.fire.on(n.SHOW_BUY_VIEW,this.showbuyView.bind(this)),cc.zz.fire.on(n.SHOW_PURCHASE_VIEW,this.showPurchaseView.bind(this)),cc.zz.fire.on(n.SHOW_REMOVE_COM,this.showRemoveView.bind(this)),cc.zz.fire.on(n.SHOW_BAG_VIEW,this.showBagView.bind(this)),cc.zz.fire.on(n.SHOW_BUSINESSMAN,this.shwoBuiness.bind(this)),cc.zz.fire.on(n.SHOW_SALE_VIEW,this.showSellView.bind(this)),cc.zz.fire.on(n.SHOW_SHELF_VIEW,this.showShelfView.bind(this)),cc.zz.fire.on(n.SHOW_SETTING_VIEW,this.showSettingView.bind(this)),cc.zz.fire.on(n.SHOW_LEADERBOARD,this.showPageLeaderBoard.bind(this)),cc.zz.fire.on(n.SHOW_ITEMBOARD,this.showPageItemBoard.bind(this)),cc.zz.fire.on(n.SHOW_COFFERBOARD,this.showPageCofferBoard.bind(this)),cc.zz.fire.on(n.SHOW_CITY_TARGET_BOARD,this.showCityTargetsBoard.bind(this)),cc.zz.fire.on(n.SHOW_ARMORY_BOARD,this.showArmoryBoard.bind(this)),cc.zz.fire.on(n.SHOW_REFERLINK_VIEW,this.showReferlinkView.bind(this))},showReferlinkView:function(t){this.referlinkView.active=!0,this.referlinkView.getComponent("ReferlinkView").initReferlinkViewData(t),this.referlinkView.getComponent("ShowWindow").show(.1)},showbuyView:function(t){this.buyview.active=!0,this.buyview.getComponent("BuyView").initData(t),this.buyview.getComponent("ShowWindow").show(.1)},showPurchaseView:function(t){this.Congratulations.active=!0,this.Congratulations.getComponent("ShowWindow").show(.1)},showSellView:function(t){this.sellView.active=!0,this.sellView.getComponent("SellView").initData(t),this.sellView.getComponent("ShowWindow").show(.1)},showShelfView:function(t){this.ShelfView.active=!0,this.ShelfView.getComponent("ShelfView").initData(t),this.ShelfView.getComponent("ShowWindow").show(.1)},showRemoveView:function(t){this.onRemoveView.active=!0,this.onRemoveView.getComponent("ItemRemoveView").initData(t),this.onRemoveView.getComponent("ShowWindow").show(.1)},showBagView:function(t){this.bagView.active=!0,this.bagView.getComponent("SellBag").settype(t),this.bagView.getComponent("ShowWindow").show(.1)},shwoBuiness:function(t){2==t?(this.businessView.active=!0,this.businessView.getComponent("ShowWindow").show(.1)):(this.businessMan.active=!0,this.businessMan.getComponent("ShowWindow").show(.1))},showSettingView:function(){this.settingView.active=!0,this.settingView.getComponent("ShowWindow").show(.1)},showPageLeaderBoard:function(t){this.leaderboardView.active=!0,this.leaderboardView.getComponent("LeaderboardView").InitLeaderboardData(t),this.leaderboardView.getComponent("ShowWindow").show(.1)},showPageItemBoard:function(t){this.itemdropLeaderView.active=!0,this.itemdropLeaderView.getComponent("LeaderboardView").InitItemBoardData(t),this.itemdropLeaderView.getComponent("ShowWindow").show(.1)},showPageCofferBoard:function(t){this.cofferLeaderView.active=!0,this.cofferLeaderView.getComponent("LeaderboardView").InitCofferBoardData(t),this.cofferLeaderView.getComponent("ShowWindow").showDirectly()},showCityTargetsBoard:function(t){t.active&&(this.cityTargetsView.active=!0,this.cityTargetsView.getComponent("CityTargetsView").init(t),this.cityTargetsView.getComponent("ShowWindow").showDirectly())},showArmoryBoard:function(t){cc.log(t),this.armoryBoard.active=!0,this.armoryBoard.getComponent("ArmoryBoard").init(t),this.armoryBoard.getComponent("ShowWindow").showDirectly()},closePageCofferBoard:function(){this.cofferLeaderView.active=!1}}),cc._RF.pop()},{EventType:"EventType"}],WinView:[function(t,e,i){"use strict";cc._RF.push(e,"36b0d8cUoVL0pVHh8JSldIJ","WinView"),cc.Class({extends:cc.Component,properties:{},start:function(){}}),cc._RF.pop()},{}],WordMapData:[function(t,e,i){"use strict";cc._RF.push(e,"9de0ccI8/ROo5oCPOfcIMnI","WordMapData");cc.Class({properties:{},ctor:function(){this.citys=[],this.bandits=[],this.strongholds=[],this.band_disappearance_interval=1200},initData:function(t){this.citys=t.cities,this.bandits=t.bandit_camps,this.strongholds=t.strongholds},getCityData:function(t){for(var e=0;e<this.citys.length;e++){var i=this.citys[e];if(i.id==t)return i}},getBanditsData:function(t){for(var e=0;e<this.bandits.length;e++){var i=this.bandits[e];if(i.id==t)return i}},setBanditsData:function(t){for(var e=0;e<this.bandits.length;e++){this.bandits[e].id==t.id&&(this.bandits[e]=t)}},getStrongHoldData:function(t){for(var e=0;e<this.strongholds.length;e++){var i=this.strongholds[e];if(i.id==t)return i}},updateStrongHoldData:function(t){for(var e=0;e<this.strongholds.length;e++){this.strongholds[e].id==t.id&&(this.strongholds[e]=t)}},setCityData:function(t){for(var e=0;e<this.citys.length;e++){this.citys[e].id==t.id&&(this.strongholds[e]=t)}},getCurrentTimestamp:function(t,e){return Math.round((new Date).getTime()/1e3)},isOverNow:function(t,e){return t+e>this.getCurrentTimestamp()},getCityDataLength:function(){return this.citys.length},getBanditsDataLength:function(){return this.bandits.length},getStrongHoldDataLength:function(){return this.strongholds.length}});cc._RF.pop()},{}],app:[function(t,e,i){"use strict";cc._RF.push(e,"bb5f1brNyFMHbh8niYt0vYk","app");var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a="tron",o="mainnet",c="en",s=t("LanguageData"),r=t("EventType");function l(){var t,e,i={};if(null==window.location)return i;for(var n=window.location.href,a=n.indexOf("?"),o=(n=n.substr(a+1)).split("&"),c=0;c<o.length;++c)(a=o[c].indexOf("="))>0&&(t=o[c].substring(0,a),e=o[c].substr(a+1),i[t]=e);return i}String.prototype.format=function(t){var e=this;if(arguments.length>0)if(1==arguments.length&&"object"==(void 0===t?"undefined":n(t))){for(var i in t)if(void 0!=t[i]){var a=new RegExp("({"+i+"})","g");e=e.replace(a,t[i])}}else for(var o=0;o<arguments.length;o++)if(void 0!=arguments[o]){a=new RegExp("({)"+o+"(})","g");e=e.replace(a,arguments[o])}return e},cc.Class({extends:cc.Component,properties:{Blocker:{default:null,type:cc.Node},LocationButton:{default:null,type:cc.Button},progressBar:{default:null,type:cc.ProgressBar},loadingProgress:{default:null,type:cc.Label},bgSound:{default:null,type:cc.AudioClip},SocialButtonRoot:{default:null,type:cc.Node},TrxButtonRoot:{default:null,type:cc.Node},NeoGasButtonRoot:{default:null,type:cc.Node},adPanel:{default:null,type:cc.Node},adCancelLayout:{default:null,type:cc.Node},feeButton:{default:null,type:cc.Node}},init:function(e){cc.zz={},cc.zz.http=t("Http"),cc.zz.fire=t("onfire"),cc.zz.LoginData=e;var i=t("TableDataManage");cc.zz.TableDataManage=new i;var n=t("WordMapData");cc.zz.WordMapData=new n;var a=t("Utils");cc.zz.utils=new a;var o=t("SoundManage");cc.zz.SoundManage=new o;var c=t("Net");cc.zz.net=new c;var s=t("CorrectWalletUsage");cc.zz.CorrectWalletUsage=new s;var r=t("BlockchainTimer");cc.zz.BlockchainTimer=new r;var l={};l.tron=t("TronInteractor"),l.neo=t("NeoInteractor"),cc.zz.BlockchainInteractor=new(l[cc.zz.LoginData.getBlockchainType()]);var d=t("Popup");cc.zz.Popup=new d,cc.zz.militaryAdvancements=this.getMilitaryAdvancements()},hideAd:function(){this.adPanel.active=!1,this.adCancelLayout.active=!1,this.feeButton.active=!0},showAd:function(){this.adPanel.active=!0,this.adCancelLayout.active=!0,this.feeButton.active=!1},onLoad:function(){this.init(this.getLoginData(a,o));var t=cc.sys.localStorage.getItem("lang");null==t&&(t=c),s.init(t),cc.zz.LoginData.setLanguage(t),cc.zz.SoundManage.onPlayMainBgSound(),this.LocationButton.node.active=!1,this.progressBar.node.active=!0,this.LoadComon(),cc.zz.fire.on(r.BLOCK_NUMBER_INCREASED,this.onBlockNumberIncrease.bind(this));var e=l();e.hasOwnProperty("referalLink")&&cc.log("Referal link is:",e.referalLink),this.hideAd(),cc.zz.LoginData.isNeoBlockchain()&&o3dapi.initPlugins([o3dapiNeo])},onBlockNumberIncrease:function(t){},getPlayerData:function(t){t.hasOwnProperty("heroes")&&(t.heroes.length>0?(cc.zz.LoginData.setHeroID(t.heroes[0]),cc.zz.net.addHandler(4005,this.getHeroData.bind(this)),cc.zz.net.send(4005,[cc.zz.LoginData.getHeroID(),0])):(1==l().hasOwnProperty("referalLink")&&cc.zz.LoginData.setReferalLink(l().referalLink),this.enterHero()))},getHeroData:function(t){cc.zz.net.removeHandler(4005),cc.zz.LoginData.setHeroData(t.hero),cc.zz.LoginData.setBagData(t.unequipments),this.enterMain()},initServer:function(){var t=this;this.Blocker.active=!0;var e=this;if(cc.zz.SoundManage.onPlayEffect("Battle_Start_Button"),cc.zz.LoginData.isNeoBlockchain())o3dapi.NEO.getAccount().then(function(e){cc.zz.LoginData.initO3Wallet(e.address),cc.zz.net.addHandler(8001,t.getPlayerData.bind(t)),cc.zz.net.send(8001,[e.address])}).catch(function(t){console.error(t),alert("Please open the o3"),document.location.reload()});else if(cc.zz.LoginData.isTronBlockchain())if(void 0==window.chrome)alert("Blocklords only runs on Chrome or Chrome-compatible browsers.");else if(void 0==window.tronWeb)alert("No TronWeb found. You need to install TronLink extension.\n refresh the page.");else if(0==tronWeb.defaultAddress.hex)alert("No wallet address found.\n Please Login your TronLink wallet.");else if(cc.zz.BlockchainInteractor.isValidWalletNetwork(cc.zz.LoginData.getNetType())){cc.zz.LoginData.initTronContract(function(){cc.zz.net.addHandler(8001,e.getPlayerData.bind(e)),cc.zz.net.send(8001,[tronWeb.defaultAddress.hex])}),cc.zz.CorrectWalletUsage.on(cc.zz.LoginData.getBlockchainType(),cc.zz.LoginData.getNetType(),tronWeb.defaultAddress.hex)}else alert("This version is on "+cc.zz.LoginData.getNetType()+"! Please change your wallet node.")},LoadJson:function(){cc.loader.loadResDir("table",function(t,e){this.loadingProgress.string="Loading configuration tables: "+t+"/"+e,this.progressBar.progress=t/e}.bind(this),function(t,e){t||(cc.zz.TableDataManage.initTableList(e),cc.zz.net.connect(this.getIpAddress(),function(){this.LocationButton.node.active=!0,this.progressBar.node.active=!1}.bind(this)))}.bind(this))},LoadHeroElement:function(){cc.loader.loadResDir("heroElements",cc.SpriteFrame,function(t,e){this.loadingProgress.string="Loading hero sprites: "+t+"/"+e,this.progressBar.progress=t/e}.bind(this),function(t,e){this.LoadItem()}.bind(this))},LoadSound:function(){cc.loader.loadResDir("soundeffect",cc.AudioClip,function(t,e){this.loadingProgress.string="Loading audio: "+t+"/"+e,this.progressBar.progress=t/e}.bind(this),function(t,e){this.LoadJson()}.bind(this))},LoadItem:function(){cc.loader.loadResDir("ItemIcons",cc.SpriteFrame,function(t,e){this.loadingProgress.string="Loading item sprites: "+t+"/"+e,this.progressBar.progress=t/e}.bind(this),function(t,e){this.LoadSound()}.bind(this))},LoadComon:function(){cc.loader.loadResDir("common",function(t,e){this.loadingProgress.string="Loading common sprites: "+t+"/"+e,this.progressBar.progress=t/e}.bind(this),function(t,e){t||this.LoadHeroElement()}.bind(this))},enterHero:function(){cc.director.preloadScene("HeroScene",function(t,e){this.loadingProgress.string="Loading scenes: "+t+"/"+e}.bind(this),function(){this.loadingProgress.string="Entering Hero Scene",cc.director.loadScene("HeroScene")}.bind(this))},enterMain:function(){cc.director.preloadScene("MainScene",function(t,e){this.loadingProgress.string="Loading scenes: "+t+"/"+e}.bind(this),function(){this.loadingProgress.string="Entering Main Scene",cc.director.loadScene("MainScene")}.bind(this))},update:function(){cc.zz.SoundManage.onPlayBgSound()},openTwitter:function(){cc.sys.openURL("https://twitter.com/blocklords")},openFacebook:function(){cc.sys.openURL("https://www.facebook.com/blocklordsgame")},openDiscord:function(){cc.sys.openURL("https://discordapp.com/invite/K64J3Vw")},openTelegram:function(){cc.sys.openURL("https://t.me/joinchat/HGG3Zg-6yvZthjnYGSPCEA")},buttonGameInfo:function(){cc.sys.openURL("https://medium.com/@info_14956")},buttonYoutube:function(){cc.sys.openURL("https://www.youtube.com/channel/UCpfBqIQsy8Wo4EzCFAr8EHQ")},buttonBuyCryptoCurrency:function(){"tron"==cc.zz.LoginData.getBlockchainType()?1==this.TrxButtonRoot.active?this.TrxButtonRoot.active=!1:this.TrxButtonRoot.active=!0:"neo"==cc.zz.LoginData.getBlockchainType()&&(1==this.NeoGasButtonRoot.active?this.NeoGasButtonRoot.active=!1:this.NeoGasButtonRoot.active=!0)},buttonSocailAccount:function(){1==this.SocialButtonRoot.active?this.SocialButtonRoot.active=!1:this.SocialButtonRoot.active=!0},buttonTrxHuobi:function(){cc.sys.openURL("https://www.huobi.co/en-us/topic/invited/?invite_code=z3sb4")},buttonTrxBinance:function(){cc.sys.openURL("https://www.binance.com/?ref=35653499")},buttonTrxKucoin:function(){cc.sys.openURL("https://www.kucoin.com/ucenter/signup?rcode=btuPc8")},buttonTrxOkex:function(){cc.sys.openURL("https://www.okex.com/")},buttonNeoGasO3Exchange:function(){cc.sys.openURL("https://buy.o3.network/?ref=AGtuH5ybJb7VbLg6949HT3nR4TGHeA6JiW")},openWeixin:function(){},getIpAddress:function(){return cc.zz.LoginData.isNeoBlockchain()?"mainnet"==cc.zz.LoginData.getNetType()?"wss://neo.blocklords.io:443/backend/":"testnet"==cc.zz.LoginData.getNetType()?"ws://153.92.5.151:8085/":"ws://localhost:8000/":cc.zz.LoginData.isTronBlockchain()?"privatenet"==cc.zz.LoginData.getNetType()?"ws://127.0.0.1:8000/":"testnet"==cc.zz.LoginData.getNetType()?"ws://153.92.5.151:8083/":"wss://tron.blocklords.io:443/backend/":void 0},httpGet:function(t){var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},getSettingsString:function(){return this.httpGet("https://dzeluenomnnl5.cloudfront.net/client_settings.js")},getSettings:function(){return{blockchain_to_url:{"play.blocklords.io":{blockchain:"tron",network:"testnet"},"trontest.blocklords.io":{blockchain:"tron",network:"testnet"},"tron.blocklords.io":{blockchain:"tron",network:"mainnet"},"neo.blocklords.io":{blockchain:"neo",network:"mainnet"},"neotest.blocklords.io":{blockchain:"neo",network:"testnet"},"fattytiger.cn":{blockchain:"tron",network:"testnet"}},blockchain_settings:{tron:{currency:" TRX",marketFees:[10,15,20],battleFees:{PVC:50,PVP:30,PVE:10},heroCreationFee:100,testnet:{cofferBlockDistance:15e4,dropBlockDistance:200,contractAddress:"TG6tkf68NbGM8gWCgjtm3S7fkircD1w6b7",fullNode:"https://api.shasta.trongrid.io",name:"testnet",scaner:"https://shasta.tronscan.org/#/transaction/"},mainnet:{cofferBlockDistance:15e4,dropBlockDistance:200,contractAddress:"TN7GsEoXWy82kSAWAmeR7BWXf4UoqcXxoD",fullNode:"https://api.trongrid.io",name:"mainnet",scaner:"https://tronscan.org/#/transaction/"},privatenet:{cofferBlockDistance:15e4,dropBlockDistance:200,contractAddress:"TG6tkf68NbGM8gWCgjtm3S7fkircD1w6b7",fullNode:"https://api.shasta.trongrid.io",name:"privatenet",scaner:"https://shasta.tronscan.org/#/transaction/"}},neo:{currency:" GAS",marketFees:[.1,.2,.3],battleFees:{PVC:1,PVP:.75,PVE:.5},heroCreationFee:3,testnet:{cofferBlockDistance:15e3,dropBlockDistance:80,contractAddress:"4c5dc6bcd991a6171ec50787a9128e22b15be0b1",name:"TestNet",gameAdminAddress:"ARxEMtapvYPp6ACc5P86WHSZPeVzgoB18r",fullNode:"https://test2.cityofzion.io:443",scaner:"https://neoscan-testnet.io/transaction/"},mainnet:{cofferBlockDistance:15e3,dropBlockDistance:80,contractAddress:"d8516c5a4b8edd8ca21475f63757e6518ca819e2",name:"MainNet",gameAdminAddress:"AdmpNwz8pmNdLHMuncLdZ2NT3gxGbS1h5c",fullNode:"https://seed2.cityofzion.io:443",websocketEndpoint:"",scaner:"https://neoscan.io/transaction/"},privatenet:{cofferBlockDistance:15e3,dropBlockDistance:80,contractAddress:"09052305580d7fdbe4315e451196cd5fa70a77fa",gameAdminAddress:"AK2nJJpJr6o664CWJKi1QRXjqeic2zRp8y",name:"TestNet",fullNode:"http://localhost:30336",scaner:"http://localhost:4000/transaction/"}}}}},getLoginData:function(e,i){console.log(e,i);var n=this.getSettings();if(null!=n){if(void 0!=n.blockchain_to_url){if(void 0!=n.blockchain_to_url[this.getHost()]){var a=n.blockchain_to_url[this.getHost()];if(void 0!=n.blockchain_settings)return new(t("LoginData"))(a.blockchain,a.network,n.blockchain_settings);throw"Blockchain Settings on remote url is not defined!"}if("localhost"==this.getHost()){if(void 0!=n.blockchain_settings)return new(t("LoginData"))(e,i,n.blockchain_settings);throw"Blockchain Settings on remote url is not defined!"}throw"Remote data has no blockchain settings for host "+this.getHost()}throw"Remote data has no `blockchain_to_url` section"}throw"Failed to get remote client settings"},getHost:function(){return document.location.hostname},getMilitaryAdvancements:function(){return[null,{1:{affect:"gain",type:"troop_hp",value:8,unit:"points",description:"label.281"},2:{affect:"gain",type:"troop_hp",value:8,unit:"points",description:"label.282"},3:{affect:"gain",type:"troop_hp",value:7,unit:"points",description:"label.283"}},{1:{affect:"gain",type:"troop_str",value:2,unit:"points",description:"label.284"},2:{affect:"gain",type:"troop_str",value:3,unit:"points",description:"label.285"},3:{affect:"gain",type:"troop_str",value:3,unit:"points",description:"label.286"}},{1:{affect:"gain",type:"troop_hp",value:8,unit:"points",description:"label.287"},2:{affect:"gain",type:"troop_hp",value:8,unit:"points",description:"label.288"},3:{affect:"gain",type:"troop_hp",value:7,unit:"points",description:"label.289"}},{1:{affect:"gain",type:"troop_def",value:3,unit:"points",description:"label.290"},2:{affect:"gain",type:"troop_def",value:2,unit:"points",description:"label.291"},3:{affect:"gain",type:"troop_def",value:2,unit:"points",description:"label.292"}},{1:{affect:"gain",type:"damage",value:10,unit:"percents",description:"label.293"},2:{affect:"gain",type:"damage",value:10,unit:"percents",description:"label.294"},3:{affect:"gain",type:"damage",value:10,unit:"percents",description:"label.295"}},{1:{affect:"gain",type:"troop_def",value:3,unit:"points",description:"label.296"},2:{affect:"gain",type:"troop_def",value:2,unit:"points",description:"label.297"},3:{affect:"gain",type:"troop_def",value:2,unit:"points",description:"label.298"}},{1:{affect:"gain",type:"troop_speed",value:.25,unit:"points",description:"label.299"},2:{affect:"gain",type:"troop_speed",value:.3,unit:"points",description:"label.300"},3:{affect:"gain",type:"troop_speed",value:.2,unit:"points",description:"label.301"}},{1:{affect:"gain",type:"damage",value:10,unit:"percents",description:"label.302"},2:{affect:"gain",type:"damage",value:10,unit:"percents",description:"label.303"},3:{affect:"gain",type:"damage",value:10,unit:"percents",description:"label.304"}},{1:{affect:"gain",type:"troop_str",value:2,unit:"points",description:"label.305"},2:{affect:"gain",type:"troop_str",value:3,unit:"points",description:"label.306"},3:{affect:"gain",type:"troop_str",value:3,unit:"points",description:"label.307"}},{1:{affect:"lose",type:"troop_speed",value:.3,unit:"points",description:"label.308"},2:{affect:"lose",type:"troop_speed",value:.4,unit:"percents",description:"label.309"},3:{affect:"lose",type:"troop_speed",value:.25,unit:"percents",description:"label.310"}}]}}),cc._RF.pop()},{BlockchainTimer:"BlockchainTimer",CorrectWalletUsage:"CorrectWalletUsage",EventType:"EventType",Http:"Http",LanguageData:"LanguageData",LoginData:"LoginData",NeoInteractor:"NeoInteractor",Net:"Net",Popup:"Popup",SoundManage:"SoundManage",TableDataManage:"TableDataManage",TronInteractor:"TronInteractor",Utils:"Utils",WordMapData:"WordMapData",onfire:"onfire"}],clipboard:[function(t,e,i){"use strict";cc._RF.push(e,"94df5wDwUdFjJjdPGGPSg/O","clipboard");var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t,a){"object"==(void 0===i?"undefined":n(i))&&"object"==(void 0===e?"undefined":n(e))?e.exports=a():"function"==typeof define&&define.amd?define([],a):"object"==(void 0===i?"undefined":n(i))?i.ClipboardJS=a():t.ClipboardJS=a()}(void 0,function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==(void 0===t?"undefined":n(t))&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(a,o,function(e){return t[e]}.bind(null,o));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){var a="function"==typeof Symbol&&"symbol"==n(Symbol.iterator)?function(t){return void 0===t?"undefined":n(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":n(t)},o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),c=l(i(1)),s=l(i(3)),r=l(i(4));function l(t){return t&&t.__esModule?t:{default:t}}var d=function(t){function e(t,i){!function(t,i){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=(void 0===e?"undefined":n(e))&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return a.resolveOptions(i),a.listenClick(t),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":n(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default),o(e,[{key:"resolveOptions",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof t.action?t.action:this.defaultAction,this.target="function"==typeof t.target?t.target:this.defaultTarget,this.text="function"==typeof t.text?t.text:this.defaultText,this.container="object"===a(t.container)?t.container:document.body}},{key:"listenClick",value:function(t){var e=this;this.listener=(0,r.default)(t,"click",function(t){return e.onClick(t)})}},{key:"onClick",value:function(t){var e=t.delegateTarget||t.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new c.default({action:this.action(e),target:this.target(e),text:this.text(e),container:this.container,trigger:e,emitter:this})}},{key:"defaultAction",value:function(t){return h("action",t)}},{key:"defaultTarget",value:function(t){var e=h("target",t);if(e)return document.querySelector(e)}},{key:"defaultText",value:function(t){return h("text",t)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:["copy","cut"],e="string"==typeof t?[t]:t,i=!!document.queryCommandSupported;return e.forEach(function(t){i=i&&!!document.queryCommandSupported(t)}),i}}]),e}();function h(t,e){var i="data-clipboard-"+t;if(e.hasAttribute(i))return e.getAttribute(i)}t.exports=d},function(t,e,i){var a,o="function"==typeof Symbol&&"symbol"==n(Symbol.iterator)?function(t){return void 0===t?"undefined":n(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":n(t)},c=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=(a=i(2))&&a.__esModule?a:{default:a},r=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.resolveOptions(e),this.initSelection()}return c(t,[{key:"resolveOptions",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.action=t.action,this.container=t.container,this.emitter=t.emitter,this.target=t.target,this.text=t.text,this.trigger=t.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var t=this,e="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return t.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[e?"right":"left"]="-9999px";var i=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=i+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=(0,s.default)(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,s.default)(this.target),this.copyText()}},{key:"copyText",value:function(){var t=void 0;try{t=document.execCommand(this.action)}catch(e){t=!1}this.handleResult(t)}},{key:"handleResult",value:function(t){this.emitter.emit(t?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=t,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(t){if(void 0!==t){if(!t||"object"!==(void 0===t?"undefined":o(t))||1!==t.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&t.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(t.hasAttribute("readonly")||t.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=t}},get:function(){return this._target}}]),t}();t.exports=r},function(t,e){t.exports=function(t){var e;if("SELECT"===t.nodeName)t.focus(),e=t.value;else if("INPUT"===t.nodeName||"TEXTAREA"===t.nodeName){var i=t.hasAttribute("readonly");i||t.setAttribute("readonly",""),t.select(),t.setSelectionRange(0,t.value.length),i||t.removeAttribute("readonly"),e=t.value}else{t.hasAttribute("contenteditable")&&t.focus();var n=window.getSelection(),a=document.createRange();a.selectNodeContents(t),n.removeAllRanges(),n.addRange(a),e=n.toString()}return e}},function(t,e){function i(){}i.prototype={on:function(t,e,i){var n=this.e||(this.e={});return(n[t]||(n[t]=[])).push({fn:e,ctx:i}),this},once:function(t,e,i){var n=this;function a(){n.off(t,a),e.apply(i,arguments)}return a._=e,this.on(t,a,i)},emit:function(t){for(var e=[].slice.call(arguments,1),i=((this.e||(this.e={}))[t]||[]).slice(),n=0,a=i.length;n<a;n++)i[n].fn.apply(i[n].ctx,e);return this},off:function(t,e){var i=this.e||(this.e={}),n=i[t],a=[];if(n&&e)for(var o=0,c=n.length;o<c;o++)n[o].fn!==e&&n[o].fn._!==e&&a.push(n[o]);return a.length?i[t]=a:delete i[t],this}},t.exports=i},function(t,e,i){var n=i(5),a=i(6);t.exports=function(t,e,i){if(!t&&!e&&!i)throw new Error("Missing required arguments");if(!n.string(e))throw new TypeError("Second argument must be a String");if(!n.fn(i))throw new TypeError("Third argument must be a Function");if(n.node(t))return u=e,p=i,(h=t).addEventListener(u,p),{destroy:function(){h.removeEventListener(u,p)}};if(n.nodeList(t))return r=t,l=e,d=i,Array.prototype.forEach.call(r,function(t){t.addEventListener(l,d)}),{destroy:function(){Array.prototype.forEach.call(r,function(t){t.removeEventListener(l,d)})}};if(n.string(t))return o=t,c=e,s=i,a(document.body,o,c,s);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList");var o,c,s,r,l,d,h,u,p}},function(t,e){e.node=function(t){return void 0!==t&&t instanceof HTMLElement&&1===t.nodeType},e.nodeList=function(t){var i=Object.prototype.toString.call(t);return void 0!==t&&("[object NodeList]"===i||"[object HTMLCollection]"===i)&&"length"in t&&(0===t.length||e.node(t[0]))},e.string=function(t){return"string"==typeof t||t instanceof String},e.fn=function(t){return"[object Function]"===Object.prototype.toString.call(t)}},function(t,e,i){var n=i(7);function a(t,e,i,a,o){var c=function(t,e,i,a){return function(i){i.delegateTarget=n(i.target,e),i.delegateTarget&&a.call(t,i)}}.apply(this,arguments);return t.addEventListener(i,c,o),{destroy:function(){t.removeEventListener(i,c,o)}}}t.exports=function(t,e,i,n,o){return"function"==typeof t.addEventListener?a.apply(null,arguments):"function"==typeof i?a.bind(null,document).apply(null,arguments):("string"==typeof t&&(t=document.querySelectorAll(t)),Array.prototype.map.call(t,function(t){return a(t,e,i,n,o)}))}},function(t,e){if("undefined"!=typeof Element&&!Element.prototype.matches){var i=Element.prototype;i.matches=i.matchesSelector||i.mozMatchesSelector||i.msMatchesSelector||i.oMatchesSelector||i.webkitMatchesSelector}t.exports=function(t,e){for(;t&&9!==t.nodeType;){if("function"==typeof t.matches&&t.matches(e))return t;t=t.parentNode}}}])}),cc._RF.pop()},{}],cn:[function(t,e,i){"use strict";cc._RF.push(e,"ea8acdRVExIlpgDt1BoG3Mw","cn"),window.i18n||(window.i18n={}),window.i18n.languages||(window.i18n.languages={}),window.i18n.languages.cn={label:{1:"\u60a8\u597d\uff0c\u6b22\u8fce\u6765\u5230BLOCKLORDS\u7684TRON\u5c01\u6d4b\u3002\u6b64\u7248\u672c\u5728TRON\u6d4b\u8bd5\u7f51\u4e0a\u8fdb\u884c\u5e76\u9080\u8bf7\u60a8\u8fdb\u884c\u8bd5\u73a9\u3002\u8fdb\u5165\u6e38\u620f\u4e4b\u524d\uff0c\u60a8\u5c06\u9700\u8981\u5b89\u88c5Tronlink\u94b1\u5305\u5e76\u83b7\u53d6\u4e00\u5b9a\u7684\u6d4b\u8bd5\u7f51TRX\u3002\u5982\u679c\u60a8\u6709\u4efb\u4f55\u7591\u95ee\u5efa\u8bae\u6216\u8005BUG\u53d1\u73b0\uff0c\u8bf7\u53d1\u9001\u7535\u5b50\u90ae\u4ef6\u81f3\uff1ainfo@blocklords.io \u6211\u4eec\u4f1a\u5c3d\u5feb\u56de\u590d\u60a8\uff01",2:"\u5f00\u59cb\u6e38\u620f",3:"\u9009\u62e9\u4f60\u7684\u82f1\u96c4",4:"\u667a\u529b:",5:"\u7edf\u5fa1:",6:"\u901f\u5ea6:",7:"\u9632\u5fa1:",8:"\u529b\u91cf:",9:"\u5175\u529b:",10:"\u88c5\u5907",11:"\u7a7a",12:"\u6ca1\u6709\u88c5\u5907",13:"\u4ed3\u5e93",14:"\u4e16\u754c\u5e02\u573a",15:"\u8d2d\u4e70",16:"\u552e\u5356",17:"\u8bb0\u5f55",18:"\u7c7b\u578b",19:"\u6240\u6709",20:"\u5934\u76d4",21:"\u62a4\u7532",22:"\u62a4\u81c2",23:"\u76fe\u724c",24:"\u6b66\u5668",25:"\u54c1\u8d28",26:"\u6240\u6709",27:"\u666e\u901a",28:"\u4f18\u79c0",29:"\u7cbe\u826f",30:"\u53f2\u8bd7",31:"\u4f20\u8bf4",32:"\u4ef7\u683c",33:"\u4ece\u4f4e\u5230\u9ad8",34:"\u4ece\u9ad8\u5230\u4f4e",35:"\u552e\u5356\u4e2d",36:"\u8d2d\u4e70",37:"\u4f60\u7684\u94b1\u5305",38:"\u5356\u5bb6\u94b1\u5305",39:"\u4ef7\u683c",40:"\u7a0e\u8d39",41:"\u603b\u4ef7",42:"\u53d6\u6d88",43:"\u786e\u8ba4",44:"\u606d\u559c\u4f60",45:"\u4f60\u521a\u521a\u5728\u5e02\u573a\u4e0a\u8d2d\u4e70$item_equpments_name\uff0c\u8fd9\u4e2a\u7269\u54c1\u968f\u540e\u4f1a\u7ed1\u5b9a\u5728\u4f60\u7684\u8d26\u6237\u548c\u94b1\u5305\u4e2d\u3002",46:"\u6d4f\u89c8\u7ec6\u8282",47:"\u4f60\u4e0d\u5728\u4e00\u4e2a\u57ce\u5e02\u4e2d",48:"\u552e\u5356",49:"\u4f60\u8d2d\u4e70\u4e86 $item_equipments_name \uff0c\u82b1\u8d39\u4e86 $price",50:"\u5956\u6c60\uff1a",51:"\u9886\u4e3b\uff1a",52:"\u57ce\u5e02\u9632\u5fa1\u5175\u529b",53:"\u57ce\u5e02\u5e02\u573a",54:"\u57ce\u5e02\u5efa\u7b51",55:"\u5e02\u96c6",56:"\u4eba\u4eec\u9762\u5bf9\u9762\u4ea4\u6613\u8d27\u54c1\u7684\u573a\u6240",57:"\u9886\u4e3b\u5927\u4eba\u4f60\u597d, \u6b22\u8fce\u6765\u5230\u6211\u7684\u5c0f\u5e97\u3002\u6211\u4e00\u76f4\u5728\u5468\u6e38\u4e16\u754c, \u5bfb\u627e\u6700\u7a00\u6709\u7684\u8d27\u7269\u3002\u4f60\u6301\u6709\u6211\u76ee\u524d\u60f3\u8981\u7684\u7269\u54c1\u5417\uff1f\u5982\u679c\u4f60\u6709, \u6211\u53ef\u4ee5\u63d0\u4f9b\u4e0d\u9519\u7684\u4ef7\u683c\u6765\u8d2d\u4e70\u5b83\u3002",58:"\u8fdb\u5165",59:"\u65c5\u884c\u5546\u4eba",60:"\u4eca\u65e5\u56de\u6536\u8981\u6c42",61:"\u56de\u6536\u4ef7\u683c\uff1a",62:"\u56de\u6536\u6570\u91cf\uff1a",63:"\u552e\u5356",64:"\u53d6\u6d88",65:"\u5175\u529b\uff1a",66:"\u6218\u573a",67:"\u56de\u5230\u5730\u56fe",68:"\u4f60\u80dc\u5229\u4e86",69:"\u80dc\u5229",70:"\u4f60\u8f93\u4e86",71:"\u5931\u8d25",72:"\u653b\u51fb",73:"\u8bbf\u95ee",74:"1. \u8fd93\u4e2a\u82f1\u96c4\u662f\u6211\u4eec\u4e3a\u60a8\u968f\u673a\u751f\u6210\u7684\u3002\u60f3\u8981\u7ee7\u7eed\u6e38\u620f\uff0c\u60a8\u5fc5\u987b\u9009\u62e9\u5176\u4e2d\u4e00\u4e2a\u82f1\u96c4\u8fdb\u884c\u626e\u6f14\u3002\u8fd9\u4e09\u4e2a\u9009\u9879\u662f\u65e0\u6cd5\u5237\u65b0\u91cd\u7f6e\u7684\u3002",75:"2. \u60a8\u9009\u62e9\u7684\u82f1\u96c4\u5c06\u4e0e\u4ed6\u6240\u7a7f\u6234\u7684\u6240\u6709\u88c5\u5907\u9053\u5177\u4e00\u8d77\u5b58\u50a8\u5728\u533a\u5757\u94fe\u4e0a\u3002\u5b83\u4eec\u5c06\u4f5c\u4e3a\u72ec\u7279\u7684\u6570\u5b57\u8d44\u4ea7\u5b58\u50a8\u5728\u60a8\u7684\u94b1\u5305\u4e4b\u4e2d\u3002",76:"3. \u521b\u5efa\u82f1\u96c4\u5c06\u82b1\u8d39500TRX\u3002\u4e00\u65e6\u4f60\u521b\u5efa\u5b83, \u4f60\u5c06\u65e0\u6cd5\u91cd\u65b0\u9009\u62e9\u53e6\u5916\u4e24\u4e2a\u9009\u9879, \u6240\u4ee5\u4e00\u5b9a\u8981\u9009\u62e9\u4f60\u6700\u559c\u6b22\u7684\u82f1\u96c4\u3002",77:"4. \u5982\u679c\u60a8\u60f3\u5728\u505a\u51fa\u9009\u62e9\u4e4b\u524d\u4e86\u89e3\u66f4\u591a\u5173\u4e8e\u82f1\u96c4\u3001\u5c5e\u6027\u548c\u9053\u5177\u7684\u76f8\u5173\u4fe1\u606f, \u8bf7\u70b9\u51fb\u6b64\u5904\u9605\u8bfb\u66f4\u591a\u5173\u4e8e\u6211\u4eec\u7684\u6e38\u620f\u7cfb\u7edf\u8bbe\u8ba1\u7684\u6587\u7ae0\u3002",78:"1. \u8fd9\u91cc\u662f\u60a8\u7684\u5e93\u5b58, \u60a8\u6240\u62e5\u6709\u7684\u672a\u88c5\u5907\u7269\u54c1\u90fd\u5b58\u653e\u5728\u8fd9\u91cc\u3002",79:"2. \u4f60\u7684\u82f1\u96c4\u76ee\u524d\u88c5\u5907\u4e0a\u4e86\u60a8\u6240\u62e5\u6709\u7684\u6240\u6709\u88c5\u5907\u9053\u5177\u3002\u70b9\u51fb\u5176\u4e2d\u4e00\u4ef6\u88c5\u5907\u5c31\u4f1a\u5378\u4e0b\u5b83, \u5e76\u653e\u5165\u60a8\u7684\u5e93\u5b58\u4e2d\u3002",80:"3. \u5982\u679c\u4f60\u60f3\u8d2d\u4e70\u66f4\u591a\u7684\u88c5\u5907\u9053\u5177, \u4f60\u53ef\u4ee5\u8bbf\u95ee\u57ce\u5e02\u5e02\u573a, \u5e76\u8d2d\u4e70\u76ee\u524d\u6b63\u5728\u51fa\u552e\u7684\u7269\u54c1\u3002",81:"4. \u5982\u679c\u60a8\u4e0d\u60f3\u8d2d\u4e70\u5e02\u573a\u4e0a\u7684\u88c5\u5907, \u60a8\u53ef\u4ee5\u5c1d\u8bd5\u5360\u9886\u636e\u70b9\u5e76\u7b49\u5f85\u88c5\u5907\u9053\u5177\u7684\u6389\u843d\u3002",82:"1. \u653b\u51fb\u571f\u532a\u5c06\u589e\u52a0\u60a8\u88c5\u5907\u9053\u5177\u7684exp\u3002",83:"2. \u4e00\u65e6\u4e00\u4e2a\u88c5\u5907\u83b7\u5f97\u4e86\u8db3\u591f\u7684exp, \u5b83\u5c06\u4e0a\u5347\u4e00\u96c6\u5e76\u83b7\u5f97\u4e00\u4e2a\u989d\u5916\u7684\u5c5e\u6027\u70b9\u3002",84:"3. \u9053\u5177\u7684\u6700\u5927\u7b49\u7ea7\u53d6\u51b3\u4e8e\u9053\u5177\u7684\u54c1\u8d28\u3002",85:"4. \u53d1\u52a8\u571f\u532a\u7a81\u88ad\u6218\u7684\u8d39\u7528\u4e3a50TRX\u3002",86:"1. \u5360\u9886\u636e\u70b9\u53ef\u4ee5\u4f7f\u60a8\u7684\u58eb\u5175\u56de\u590d\u901f\u5ea6\u63d0\u5347\uff0c\u5e76\u4e14\u53ef\u80fd\u83b7\u5f97\u9053\u5177\u6389\u843d\u3002\u76ee\u524d\uff0c\u533a\u5757\u94fe\u6bcf\u4ea7\u751f800\u4e2a\u533a\u5757\u540e\u4f1a\u89e6\u53d1\u4e00\u4e2a\u9053\u5177\u6389\u843d\u3002",87:"2. \u60a8\u5360\u9886\u636e\u70b9\u7684\u65f6\u95f4\u8d8a\u957f\uff0c\u83b7\u5f97\u9053\u5177\u6389\u843d\u7684\u51e0\u7387\u5c31\u4f1a\u8d8a\u5927\u3002",88:"3. \u5982\u679c\u73a9\u5bb6\u83b7\u5f97\u4e00\u4ef6\u9053\u5177\u6389\u843d\uff0c\u5219\u4f1a\u81ea\u52a8\u9000\u51fa\u636e\u70b9\u5e76\u79fb\u52a8\u81f3\u6700\u8fd1\u7684\u57ce\u5e02\u4e2d\u3002",89:"4. \u53d1\u52a8\u636e\u70b9\u4e89\u593a\u6218\u7684\u8d39\u7528\u4e3a100TRX\u3002",90:"1. \u5f81\u670d\u4e00\u4e2a\u57ce\u5e02\u4f1a\u8ba9\u60a8\u6210\u4e3a\u9886\u4e3b\u3002\u4f5c\u4e3a\u4e00\u4e2a\u57ce\u5e02\u7684\u9886\u4e3b\uff0c\u60a8\u5c06\u53ef\u4ee5\u4ece\u8be5\u57ce\u5e02\u7684\u5e02\u573a\u4ea4\u6613\u4e2d\u83b7\u5f97\u7a0e\u6536\u3002\u6bcf\u5468\u8fd8\u6709\u673a\u4f1a\u4ece\u57ce\u5e02\u91d1\u5e93\u4e2d\u6536\u53d6\u4e00\u7b14\u6536\u5165\u3002",91:"2. \u76ee\u524d\u57ce\u5e02\u67093\u79cd\u89c4\u6a21\uff1a\u6751\u5e84\uff0c\u57ce\u9547\u548c\u57ce\u5e02\u3002\u57ce\u5e02\u7684\u89c4\u6a21\u8d8a\u5927\uff0c\u5728\u9632\u5fa1\u6218\u4e2d\u5c31\u66f4\u5177\u6709\u57ce\u9632\u4f18\u52bf\u3002",92:"3. \u53d1\u52a8\u57ce\u5e02\u5f81\u670d\u6218\u7684\u8d39\u7528\u4e3a200TRX\u300250%\u7684\u8d39\u7528\u4f1a\u81ea\u52a8\u5b58\u5165\u5230\u88ab\u653b\u51fb\u57ce\u5e02\u7684\u91d1\u5e93\u4e2d\uff0c\u7b49\u5f85\u7740\u6bcf\u5468\u88ab\u9886\u4e3b\u73a9\u5bb6\u6240\u9886\u53d6\u3002",93:"4. \u5f53\u60a8\u6210\u4e3a\u9886\u4e3b\u540e\uff0c\u5c31\u53ef\u4ee5\u5728\u57ce\u5e02\u6d3e\u9a7b\u9632\u5b88\u58eb\u5175\u4ee5\u9632\u5fa1\u5176\u4ed6\u73a9\u5bb6\u6765\u72af\u3002\u8bbf\u95ee\u57ce\u5e02\uff0c\u60a8\u53ef\u4ee5\u4e86\u89e3\u66f4\u591a\u8be6\u60c5\u3002",94:"1. \u5982\u679c\u60a8\u60f3\u51fa\u552e\u9053\u5177\uff0c\u9009\u62e9\u51fa\u552e\u9875\u7b7e\u5e76\u70b9\u51fb\u51fa\u552e\u6309\u94ae\uff0c\u5728\u5f39\u51fa\u80cc\u5305\u4e2d\u9009\u62e9\u60a8\u60f3\u51fa\u552e\u7684\u9053\u5177\u5e76\u8bbe\u5b9a\u552e\u4ef7\u3002",95:"2. \u6210\u529f\u4e0a\u67b6\u524d\u9700\u8981\u652f\u4ed8\u4e00\u7b14\u5546\u54c1\u5c55\u793a\u8d39\uff1a\u5c55\u793a8\u5c0f\u65f6\u8d39\u7528\u4e3a50TRX\uff0c\u5c55\u793a12\u5c0f\u65f6\u8d39\u7528\u4e3a70TRX\uff0c\u5c55\u793a24\u5c0f\u65f6\u8d39\u7528\u4e3a88TRX\u3002",96:"3. 50%\u7684\u5546\u54c1\u5c55\u793a\u8d39\u7528\u4f1a\u88ab\u4fdd\u5b58\u5230\u57ce\u5e02\u91d1\u5e93\u4e2d\u3002",97:"4. \u5f53\u552e\u5356\u9053\u5177\u903e\u671f\u540e\uff0c\u51fa\u552e\u7684\u73a9\u5bb6\u5fc5\u987b\u70b9\u51fb\u4e0b\u67b6\uff0c\u624d\u80fd\u5c06\u9053\u5177\u56de\u6536\u81f3\u81ea\u5df1\u7684\u5e93\u5b58\u4e2d\u3002",99:"5. \u6bcf150\u4e2a\u533a\u5757\u751f\u6210\u540e\uff0c30%\u7684\u57ce\u5e02\u91d1\u5e93\u5956\u91d1\u5c06\u4f1a\u53d1\u653e\u7ed9\u5f53\u524d\u7684\u57ce\u5e02\u9886\u4e3b\u3002",100:"1. \u8d2d\u4e70\u6807\u7b7e\u4e0b\u5c55\u793a\u4e86\u76ee\u524dBLOCKLORDS\u5168\u4e16\u754c\u6b63\u5728\u552e\u5356\u7684\u7269\u54c1\u3002",101:"2. \u5982\u679c\u60a8\u6709\u610f\u8d2d\u4e70\u5176\u4e2d\u7684\u4e00\u4ef6\u9053\u5177\uff0c\u4f60\u53ef\u4ee5\u70b9\u9009\u5b83\uff0c\u5e76\u4e14\u53bb\u5230\u8be5\u7269\u54c1\u6240\u5728\u7684\u57ce\u5e02\u5e02\u573a\u8fdb\u884c\u8d2d\u4e70\u3002",102:"3. \u5728\u8d2d\u4e70\u65f6\uff0c\u60a8\u9700\u8981\u989d\u5916\u652f\u4ed8\u5546\u54c1\u552e\u4ef7\u768410%\u4f5c\u4e3a\u9886\u4e3b\u7a0e\u6536\uff0c5%\u4f5c\u4e3a\u5f00\u53d1\u8005\u7a0e\u6536\u3002\u8fd9\u4e9b\u7a0e\u6536\u4ef7\u683c\u4f1a\u81ea\u52a8\u5c55\u793a\u51fa\u6765\u3002",103:"4. \u60a8\u53ef\u4ee5\u6309\u7167\u88c5\u5907\u90e8\u4f4d\u3001\u54c1\u8d28\u548c\u4ef7\u683c\u7b49\u4e0d\u540c\u6761\u4ef6\u6765\u7b5b\u9009\u51fa\u60a8\u60f3\u8981\u7684\u7ed3\u679c\u3002",104:"5. \u5f53\u552e\u5356\u9053\u5177\u903e\u671f\u540e\uff0c\u51fa\u552e\u7684\u73a9\u5bb6\u5fc5\u987b\u70b9\u51fb\u4e0b\u67b6\uff0c\u624d\u80fd\u5c06\u9053\u5177\u56de\u6536\u81f3\u81ea\u5df1\u7684\u5e93\u5b58\u4e2d\u3002",105:"\u57ce\u5e02\u5b88\u519b"}},cc._RF.pop()},{}],en:[function(t,e,i){"use strict";cc._RF.push(e,"6e7f9upPdhHZomx+GTreYUM","en"),window.i18n||(window.i18n={}),window.i18n.languages||(window.i18n.languages={}),window.i18n.languages.en={label:{1:"Greetings, and welcome the Closed Beta version of BLOCKLORDS. This version runs on the TRON testnet and will only be available for a limited time. In order to play, you will need to have a tronlink wallet installed with testnet TRX in it. If you have any questions or bugs to report, please email us at info@blocklords.io and we will get back to you as soon as possible!",2:"PLAY",3:"SELECT YOUR HERO",4:"INTELLIGENCE:",5:"LEADERSHIP:",6:"SPEED:",7:"DEFENSE:",8:"STRENGTH:",9:"TROOPS",10:"EQUIPMENT",11:"EMPTY",12:"Not equipped",13:"INVENTORY",14:"WORLD MARKET",15:"BUY",16:"SELL",17:"HISTORY",18:"Type",19:"All",20:"Helmet",21:"Armor",22:"Arms",23:"Shield",24:"Weapon",25:"Quality",26:"All",27:"Common",28:"Special",29:"Rare",30:"Epic",31:"Legendary",32:"Price",33:"From low to high",34:"From high to low",35:"FOR SALE",36:"BUY",37:"Your Wallet",38:"Seller's Wallet",39:"Price",40:"Fee",41:"TOTAL",42:"CANCEL",43:"CONFIRM",44:"CONGRATULATIONS",45:"You just bought $item_equipments_name from the market. The item is now in your wallet, can go check it, good luck with it!",46:"VIEW DETAILS",47:"You are not in a city",48:"SELL",49:"you spend $price to buy $item_equipments_name",50:"Coffers:",51:"Lord:",52:"CITY DEFENSE",53:"CITY MARKET",54:"CITY BUILDING",55:"Marketplace",56:"The market is where the people meet to trade goods",57:"Greetings Lord, and welcome to my store. I have long traveled the world seeking out the rarest goods. Do you hold the items I currently desire? I will pay a fine price if you do.",58:"ENTER",59:"TRAVELING MERCHANT",60:"Requirements today:",61:"Recycle Price:",62:"Recycle Quantity:",63:"SELL",64:"CANCEL",65:"TROOPS",66:"BATTLEGROUND",67:"RETURN TO MAP",68:"YOU WON THE BATTLE",69:"VICTORY",70:"YOU LOST THE BATTLE",71:"LOSE",72:"ATTACK",73:"VISIT",74:"1. These 3 heroes have been randomized for you only. If you wish to play BLOCKLORDS, you must select one of these heroes. They cannot be refreshed.",75:"2. The hero you select will be created on the blockchain, along with all the items he is wearing. They will be stored on the blockchain as unique assets directly owned by your wallet address.",76:"3. Creating a hero will cost 500 TRX. Once you create it, you will not be able to select another one, so be sure to pick the hero you like the best.",77:"4. If you want to learn more about heroes, stats, and items before making your choice, clickhereto read more about our game design systems.",78:"1. This is your inventory, where your suprlus items are stored.",79:"2. Your hero is currently wearing all his items in the equipment screen. Clicking on a worn item will unequip it and place it into the inventory.",80:"3. If you want to buy more items, you can visit thecity marketsand buy items currently on sale.",81:"4. If you don't want to buy items, you can try capturing strongholds and wait for anitem drop.",82:"1. Attacking bandit leaders will increase the EXP of your items.",83:"2. Once an item has enough EXP, it will increase in level and gain one additional stat point.",84:"3. Item max levels depend on your item'squality.",85:"4. Initiating a Bandit Raid costs 50 TRX.",86:"1. Capturing a stronghold will increase your troop recovery rate and give you a chance to receive an item drop every 800 blocks.",87:"2. The longer you control a stronghold, the higher your chance of receiving an item drop.",88:"3. Player will be moved to the nearest city once an item drop is received.",89:"4. Launching a stronghold attack costs 100 TRX.",90:"1. Conquering a city will make you its Lord. City Lords can collect taxes on all city sales and a weekly claim of the city coffers.",91:"2. There are 3 types of cities: Villages, Towns, and Cities. The larger the city, the higher the defenders advantage.",92:"3. Laying siege costs 200 TRX. 50% of the attack fee will go to the city coffers that can later be claimed by Lords.",93:"4. Once you become Lord, you will be able to leave troops there as defenders in case you are attacked. Visit a city to learn more.",94:"1. To sell an item, select the SELL tab and click the SELL button, select item and price you'd like to receive.",95:"2. A display fee must be paid by seller to confirm the transaction: 50TRX for 8hrs, 70TRX for 12hrs, and 88TRX for 24hrs.",96:"3. 50% of the listing fee will be sent to the city coffer.",97:"4. When item listing time expires, seller MUST click on REMOVE in the sell tab to clear the item from the market slot and acccess the item again.",99:"5. Each 150K blocks, 30% of city coffer will be sent to the city lord.",100:"1. The BUY tab displays all items currently up for ale on the BLOCKLORDS map.",101:"2. If you want to buy an item, you can buy it directly by clicking on the BUY button and confirming the transaction.",102:"3. A 10% lord tax and 5% dev fee will be automatically added to the listing price.",103:"4. You can filter items by type, quality and price in the upper right section of the screen.",104:"5. Once the market time expires, market sellers must REMOVE the item from the market of the city where it is listed.",105:"CITY DEFENDERS"}},cc._RF.pop()},{}],heroEquip:[function(t,e,i){"use strict";cc._RF.push(e,"56cfdNvtUVB+5wyiQ1cNUbr","heroEquip");var n=t("EventType");cc.Class({extends:cc.Component,properties:{head:{default:null,type:cc.Sprite},rightArm:{default:null,type:cc.Sprite},body:{default:null,type:cc.Sprite},weapon:{default:null,type:cc.Sprite},leftArm:{default:null,type:cc.Sprite},shield:{default:null,type:cc.Sprite}},onLoad:function(){cc.zz.fire.on(n.HERO_EQUIP_ON,this.HeroEquipped.bind(this)),cc.zz.fire.on(n.HERO_EQUIP_OFF,this.HeroUnequipped.bind(this))},HeroEquipped:function(t){1==t.item_type?this.head.spriteFrame=cc.loader.getRes("heroElements/"+t.appereance,cc.SpriteFrame):2==t.item_type?this.body.spriteFrame=cc.loader.getRes("heroElements/"+t.appereance,cc.SpriteFrame):3==t.item_type?(this.rightArm.spriteFrame=cc.loader.getRes("heroElements/"+t.appereance+"_right",cc.SpriteFrame),this.leftArm.spriteFrame=cc.loader.getRes("heroElements/"+t.appereance+"_left",cc.SpriteFrame)):4==t.item_type?this.shield.spriteFrame=cc.loader.getRes("heroElements/"+t.appereance,cc.SpriteFrame):5==t.item_type&&(this.weapon.spriteFrame=cc.loader.getRes("heroElements/"+t.appereance,cc.SpriteFrame))},HeroUnequipped:function(t){0==t?this.head.spriteFrame=cc.loader.getRes("common/pubOpa",cc.SpriteFrame):1==t?this.body.spriteFrame=cc.loader.getRes("heroElements/item_body00",cc.SpriteFrame):2==t?(this.rightArm.spriteFrame=cc.loader.getRes("heroElements/item_arm00_right",cc.SpriteFrame),this.leftArm.spriteFrame=cc.loader.getRes("heroElements/item_arm00_left",cc.SpriteFrame)):3==t?this.shield.spriteFrame=cc.loader.getRes("heroElements/item_shield00",cc.SpriteFrame):this.weapon.spriteFrame=cc.loader.getRes("heroElements/item_weapon00",cc.SpriteFrame)},start:function(){}}),cc._RF.pop()},{EventType:"EventType"}],heroStars:[function(t,e,i){"use strict";cc._RF.push(e,"158bbROBoJBNofwb360tIEi","heroStars"),cc.Class({extends:cc.Component,properties:{INTELLIGENCE:{default:null,type:cc.Label},LEADERSHIP:{default:null,type:cc.Label},STREGTH:{default:null,type:cc.Label},DEFENSE:{default:null,type:cc.Label},SPEED:{default:null,type:cc.Label},TROOPS:{default:null,type:cc.Label}},initValue:function(t){this.INTELLIGENCE.string=t.stat_total_intelligence,this.LEADERSHIP.string=t.stat_total_leadership,this.STREGTH.string=t.stat_total_strength,this.DEFENSE.string=t.stat_total_defense,this.SPEED.string=t.stat_total_speed,this.TROOPS.string=100*t.stat_total_leadership},start:function(){}}),cc._RF.pop()},{}],herocard:[function(t,e,i){"use strict";cc._RF.push(e,"62547evhtFPP7RElb2i2qVD","herocard"),cc.Class({extends:cc.Component,properties:{head:{default:null,type:cc.Sprite},helmet:{default:null,type:cc.Sprite},rightArm:{default:null,type:cc.Sprite},body:{default:null,type:cc.Sprite},weapon:{default:null,type:cc.Sprite},leftArm:{default:null,type:cc.Sprite},shield:{default:null,type:cc.Sprite},heroName:{default:null,type:cc.Label},heroTitle:{default:null,type:cc.Label},headAtlas:{default:null,type:cc.SpriteAtlas},helmetAtlas:{default:null,type:cc.SpriteAtlas},leftarmAtlas:{default:[],type:cc.SpriteAtlas},rightarmAtlas:{default:null,type:cc.SpriteAtlas},bodyAtlas:{default:null,type:cc.SpriteAtlas},weaponAtlas:{default:null,type:cc.SpriteAtlas},shieldAtlas:{default:null,type:cc.SpriteAtlas}},onLoad:function(){},initHeroCard:function(t){this.herodata=t,this.heroName.string=cc.zz.TableDataManage.Language.getLangueForID(this.herodata.base.first_name)+" "+cc.zz.TableDataManage.Language.getLangueForID(this.herodata.base.last_name),console.warn(this.herodata);var e="";this.herodata.equipments[0]?e=this.herodata.equipments[0].appereance:this.herodata.base.appearance_face&&(e=this.herodata.base.appearance_face),e.length>0?this.helmet.spriteFrame=this.helmetAtlas.getSpriteFrame(e):this.helmet.spriteFrame=cc.loader.getRes("common/pubOpa",cc.SpriteFrame);var i="";this.herodata.equipments[1]?i=this.herodata.equipments[1].appereance:this.herodata.base.appearance_body&&(i=this.herodata.base.appearance_body),i.length>0?this.body.spriteFrame=this.bodyAtlas.getSpriteFrame(i):this.body.spriteFrame=this.bodyAtlas.getSpriteFrame("item_body00");var n="";if(this.herodata.equipments[2]?n=this.herodata.equipments[2].appereance:this.herodata.base.appearance_arm&&(n=this.herodata.base.appearance_arm),n.length>0){var a=0;n.split("item_arm")[1]>=100&&(a=1),this.leftArm.spriteFrame=this.leftarmAtlas[a].getSpriteFrame(n+"_left"),this.rightArm.spriteFrame=this.rightarmAtlas.getSpriteFrame(n+"_right")}else this.leftArm.spriteFrame=this.leftarmAtlas[0].getSpriteFrame("item_arm00_left"),this.rightArm.spriteFrame=this.rightarmAtlas.getSpriteFrame("item_arm00_right");var o="";this.herodata.equipments[3]?o=this.herodata.equipments[3].appereance:this.herodata.base.appearance_shield&&(o=this.herodata.base.appearance_shield),o.length>0?this.shield.spriteFrame=this.shieldAtlas.getSpriteFrame(o):this.shield.spriteFrame=this.shieldAtlas.getSpriteFrame("item_shield00");var c="";this.herodata.equipments[4]?c=this.herodata.equipments[4].appereance:this.herodata.base.appearance_weapon&&(c=this.herodata.base.appearance_weapon),c.length>0?this.weapon.spriteFrame=this.weaponAtlas.getSpriteFrame(c):this.weapon.spriteFrame=this.weaponAtlas.getSpriteFrame("item_weapon00"),this.head.spriteFrame=this.headAtlas.getSpriteFrame(this.herodata.base.appearance_head)},getHeroID:function(){return this.herodata.class_id}}),cc._RF.pop()},{}],heroinfo:[function(t,e,i){"use strict";cc._RF.push(e,"63cb32iItBDvZnhbM5sAK17","heroinfo"),cc.Class({extends:cc.Component,properties:{card:{default:null,type:cc.Node},info:{default:null,type:cc.Node}},onLoad:function(){},initHero:function(t){this.card.getComponent("herocard").initHeroCard(t),this.info.getComponent("heroStars").initValue(t.base)},start:function(){}}),cc._RF.pop()},{}],onfire:[function(t,e,i){"use strict";cc._RF.push(e,"18c627f5J1EKaR9jW0bj5+1","onfire");var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t,i){"object"===(void 0===e?"undefined":n(e))&&e.exports?e.exports=i():t.onfire=i()}("undefined"!=typeof window?window:void 0,function(){var t={},e=0,i="string",a="function",o=Function.call.bind(Object.hasOwnProperty),c=Function.call.bind(Array.prototype.slice);function s(c,s,r,l){if((void 0===c?"undefined":n(c))!==i||(void 0===s?"undefined":n(s))!==a)throw new Error("args: "+i+", "+a);return o(t,c)||(t[c]={}),t[c][++e]=[s,r,l],[c,e]}function r(t,e){for(var i in t)o(t,i)&&e(i,t[i])}function l(e,i){o(t,e)&&r(t[e],function(n,a){a[0].apply(a[2],i),a[1]&&delete t[e][n]})}return{on:function(t,e,i){return s(t,e,0,i)},one:function(t,e,i){return s(t,e,1,i)},un:function(e){var c,s,l=!1,d=void 0===e?"undefined":n(e);return d===i?!!o(t,e)&&(delete t[e],!0):"object"===d?(c=e[0],s=e[1],!(!o(t,c)||!o(t[c],s)||(delete t[c][s],0))):d!==a||(r(t,function(i,n){r(n,function(n,a){a[0]===e&&(delete t[i][n],l=!0)})}),l)},fire:function(t){var e=c(arguments,1);setTimeout(function(){l(t,e)})},fireSync:function(t){l(t,c(arguments,1))},clear:function(){t={}}}}),cc._RF.pop()},{}],"polyglot.min":[function(t,e,i){"use strict";cc._RF.push(e,"e26fd9yy65A4q3/JkpVnFYg","polyglot.min");var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};(function(t,a){"function"==typeof define&&define.amd?define([],function(){return a(t)}):"object"==(void 0===i?"undefined":n(i))?e.exports=a(t):t.Polyglot=a(t)})(void 0,function(t){function e(t){t=t||{},this.phrases={},this.extend(t.phrases||{}),this.currentLocale=t.locale||"en",this.allowMissing=!!t.allowMissing,this.warn=t.warn||o}function i(t,e,i){var n,o;return null!=i&&t?n=function(t){return t.replace(/^\s+|\s+$/g,"")}((o=t.split(c))[a(e,i)]||o[0]):n=t,n}function a(t,e){return s[function(t){var e=function(t){var e,i,n,a={};for(e in t)if(t.hasOwnProperty(e))for(n in i=t[e])a[i[n]]=e;return a}(r);return e[t]||e.en}(t)](e)}function o(e){t.console&&t.console.warn&&t.console.warn("WARNING: "+e)}e.VERSION="0.4.3",e.prototype.locale=function(t){return t&&(this.currentLocale=t),this.currentLocale},e.prototype.extend=function(t,e){var i;for(var a in t)t.hasOwnProperty(a)&&(i=t[a],e&&(a=e+"."+a),"object"==(void 0===i?"undefined":n(i))?this.extend(i,a):this.phrases[a]=i)},e.prototype.clear=function(){this.phrases={}},e.prototype.replace=function(t){this.clear(),this.extend(t)},e.prototype.t=function(t,e){var n,a;return"number"==typeof(e=null==e?{}:e)&&(e={smart_count:e}),"string"==typeof this.phrases[t]?n=this.phrases[t]:"string"==typeof e._?n=e._:this.allowMissing?n=t:(this.warn('Missing translation for key: "'+t+'"'),a=t),"string"==typeof n&&(e=function(t){var e={};for(var i in t)e[i]=t[i];return e}(e),a=function(t,e){for(var i in e)"_"!==i&&e.hasOwnProperty(i)&&(t=t.replace(new RegExp("%\\{"+i+"\\}","g"),e[i]));return t}(a=i(n,this.currentLocale,e.smart_count),e)),a},e.prototype.has=function(t){return t in this.phrases};var c="||||",s={chinese:function(t){return 0},german:function(t){return 1!==t?1:0},french:function(t){return t>1?1:0},russian:function(t){return t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2},czech:function(t){return 1===t?0:t>=2&&t<=4?1:2},polish:function(t){return 1===t?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2},icelandic:function(t){return t%10!=1||t%100==11?1:0}},r={chinese:["fa","id","ja","ko","lo","ms","th","tr","zh"],german:["da","de","en","es","fi","el","he","hu","it","nl","no","pt","sv"],french:["fr","tl","pt-br"],russian:["hr","ru"],czech:["cs"],polish:["pl"],icelandic:["is"]};return e}),cc._RF.pop()},{}],popupView:[function(t,e,i){"use strict";cc._RF.push(e,"19cb64fhOhOJZFh+zatGgaG","popupView"),cc.Class({extends:cc.Component,properties:{backgroundLayer:{default:null,type:cc.Node},simplePopup:{default:null,type:cc.Node},iconCentricPopup:{default:null,type:cc.Node}},onLoad:function(){},start:function(){},showNotification:function(t){this.isShowingPopup()||(this.hideAllNode(),this.Loading.active=!1,this.Notification.active=!0,this.notificationView.getComponent("NotificationView").InitData(t.title,t.content,t.icon))},hideAllNode:function(){this.simplePopup.active&&this.simplePopup.getComponent("PopupSimpleView").stopAllActions();this.iconCentricPopup.active&&this.iconCentricPopup.getComponent("PopupIconcentricView").stopAllActions();this.simplePopup.active=!1,this.iconCentricPopup.active=!1},hideAnyPopup:function(){this.hideAllNode(),this.node.active=!1},show:function(t,e){if(cc.zz.Popup.isValidPopupType(t)){var i=cc.zz.Popup.getPopupParams(t);i.view_type==cc.zz.Popup.VIEW_TYPE.SIMPLE?this.showSimple(i,e):i.view_type==cc.zz.Popup.VIEW_TYPE.ICONCENTRIC?this.showIconcentric(i,e):cc.error(i.view_type+" has not been implemented yet!")}else cc.log(t+" is not a valid popup type")},openPopupUrl:function(){},showSimple:function(t,e){this.hideAllNode(),this.simplePopup.getComponent("PopupSimpleView").InitData(t,e),this.node.active=!0,this.backgroundLayer.active=!0,this.simplePopup.active=!0},showIconcentric:function(t,e){this.isShowingPopup()?cc.warn("Iconcentric popups can not interrupt already showed popups!"):(this.iconCentricPopup.getComponent("PopupIconcentricView").InitData(t,e),this.hideAllNode(),this.node.active=!0,this.backgroundLayer.active=!0,this.iconCentricPopup.active=!0)},isShowingPopup:function(){return this.backgroundLayer.active&&this.node.active}}),cc._RF.pop()},{}]},{},["cn","en","BlockchainTimer","CityPanel","CorrectWalletUsage","FightPanel","HeroPanel","LocalizedImage","MapPanel","MarketPanel","Popup","ScriptableLabel","TopMenu","Troops","TroopsPanel","ViewPanel","NeoInteractor","TronInteractor","BanditData","CityData","HeroData","ItemData","Language","NpcData","StrongholdData","ArmoryBag","ArmoryBoard","BusinessMan","BusinessView","BuyView","CityPopupView","CityTargetsView","CongratulationsView","ExplanationTipView","FightView","ItemRemoveView","ItemTipView","LeaderboardView","LinkView","LoseView","PopupIconcentricView","PopupSimpleView","RankInfo","ReferlinkView","ResultView","SellBag","SellView","SettingView","ShelfView","TroopsTipView","WinView","popupView","Bandits","CityNode","Commodity","EquipItem","ExplanationTipAttacher","FilterButton","ItemIcon","ItemScripts","Stronghold","TroopItem","TroopProgressBar","TroopsTimer","heroEquip","heroStars","herocard","heroinfo","BlackCat","clipboard","onfire","Http","Net","LoginData","WordMapData","Hero","Login","Main","app","CloseWindow","EventType","NewSlider","ShowWindow","SoundManage","TableDataManage","TipManage","Utils","LanguageData","LocalizedLabel","LocalizedSprite","SpriteFrameSet","polyglot.min"]);